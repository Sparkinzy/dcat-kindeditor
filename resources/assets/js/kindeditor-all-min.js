(function(w,z){function Q(a){return a?"[object Array]"===Object.prototype.toString.call(a):!1}function V(a){return a?"[object Function]"===Object.prototype.toString.call(a):!1}function F(a,b){for(var c=0,k=b.length;c<k;c++)if(a===b[c])return c;return-1}function H(a,b){if(Q(a))for(var c=0,k=a.length;c<k&&!1!==b.call(a[c],c,a[c]);c++);else for(c in a)if(a.hasOwnProperty(c)&&!1===b.call(a[c],c,a[c]))break}function Y(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function N(a,b,c){c=c===z?
    ",":c;return 0<=(c+b+c).indexOf(c+a+c)}function L(a,b){b=b||"px";return a&&/^-?\d+(?:\.\d+)?$/.test(a)?a+b:a}function M(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function T(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function ba(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function Z(a){var b=a.split("-");a="";H(b,function(c,k){a+=0<c?k.charAt(0).toUpperCase()+k.substr(1):
    k});return a}function S(a){function b(c){c=parseInt(c,10).toString(16).toUpperCase();return 1<c.length?c:"0"+c}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(c,k,q,f){return"#"+b(k)+b(q)+b(f)})}function da(a,b){b=b===z?",":b;var c={};a=Q(a)?a:a.split(b);var k;H(a,function(q,f){if(k=/^(\d+)\.\.(\d+)$/.exec(f))for(q=parseInt(k[1],10);q<=parseInt(k[2],10);q++)c[q.toString()]=!0;else c[f]=!0});return c}function pa(a,b){return Array.prototype.slice.call(a,b||0)}function W(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         b){return a===z?b:a}function ka(a,b,c){c||(c=b,b=null);if(b){var k=function(){};k.prototype=b.prototype;var q=new k;H(c,function(f,n){q[f]=n})}else q=c;q.constructor=a;a.prototype=q;a.parent=b?b.prototype:null}function ca(a){var b;if(b=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))a=b[0];b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));
    if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw"JSON parse error";}function sa(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function ya(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function aa(a,b){this.init(a,b)}function Ga(a){try{delete a[nb]}catch(b){a.removeAttribute&&
a.removeAttribute(nb)}}function ha(a,b,c){if(0<=b.indexOf(","))H(b.split(","),function(){ha(a,this,c)});else{var k=a[nb]||null;k||(a[nb]=++ac,k=ac);Ma[k]===z&&(Ma[k]={});var q=Ma[k][b];q&&0<q.length?ya(a,b,q[0]):(Ma[k][b]=[],Ma[k].el=a);q=Ma[k][b];0===q.length&&(q[0]=function(f){var n=f?new aa(a,f):z;H(q,function(g,l){0<g&&l&&l.call(a,n)})});0>F(c,q)&&q.push(c);sa(a,b,q[0])}}function va(a,b,c){if(b&&0<=b.indexOf(","))H(b.split(","),function(){va(a,this,c)});else{var k=a[nb]||null;if(k)if(b===z)k in
Ma&&(H(Ma[k],function(n,g){"el"!=n&&0<g.length&&ya(a,n,g[0])}),delete Ma[k],Ga(a));else if(Ma[k]){var q=Ma[k][b];if(q&&0<q.length){c===z?(ya(a,b,q[0]),delete Ma[k][b]):(H(q,function(n,g){0<n&&g===c&&q.splice(n,1)}),1==q.length&&(ya(a,b,q[0]),delete Ma[k][b]));var f=0;H(Ma[k],function(){f++});2>f&&(delete Ma[k],Ga(a))}}}}function qa(a,b){if(0<=b.indexOf(","))H(b.split(","),function(){qa(a,this)});else{var c=a[nb]||null;if(c&&(b=Ma[c][b],Ma[c]&&b&&0<b.length))b[0]()}}function Ba(a,b,c){b=/^\d{2,}$/.test(b)?
    b:b.toUpperCase().charCodeAt(0);ha(a,"keydown",function(k){!k.ctrlKey||k.which!=b||k.shiftKey||k.altKey||(c.call(a),k.stop())})}function ua(a){a=a.replace(/&quot;/g,'"');for(var b={},c=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,k;k=c.exec(a);){var q=Y(k[1].toLowerCase());k=Y(S(k[2]));b[q]=k}return b}function ta(a){for(var b={},c=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,k;k=c.exec(a);){var q=(k[1]||k[2]||k[4]||k[6]).toLowerCase();b[q]=
    (k[2]?k[3]:k[4]?k[5]:k[7])||""}return b}function za(a,b){return a=/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(c,k,q,f){return 0>(" "+q+" ").indexOf(" "+b+" ")?""===q?k+b+f:k+q+" "+b+f:c}):a.substr(0,a.length-1)+' class="'+b+'">'}function Ia(a){var b="";H(ua(a),function(c,k){b+=c+":"+k+";"});return b}function Na(a,b,c,k){function q(l){l=l.split("/");for(var d=[],e=0,h=l.length;e<h;e++){var m=l[e];".."==m?0<d.length&&d.pop():""!==m&&"."!=m&&d.push(m)}return"/"+d.join("/")}
    function f(l,d){if(a.substr(0,l.length)===l){for(var e=[],h=0;h<d;h++)e.push("..");d=".";0<e.length&&(d+="/"+e.join("/"));"/"==k&&(d+="/");return d+a.substr(l.length)}if(g=/^(.*)\//.exec(l))return f(g[1],++d)}b=W(b,"").toLowerCase();"data:"!=a.substr(0,5)&&(a=a.replace(/([^:])\/\//g,"$1/"));if(0>F(b,["absolute","relative","domain"]))return a;c=c||location.protocol+"//"+location.host;if(k===z){var n=location.pathname.match(/^(\/.*)\//);k=n?n[1]:""}var g;if(g=/^(\w+:\/\/[^\/]*)/.exec(a)){if(g[1]!==
        c)return a}else if(/^\w+:/.test(a))return a;/^\//.test(a)?a=c+q(a.substr(1)):/^\w+:\/\//.test(a)||(a=c+q(k+"/"+a));"relative"===b?a=f(c+k,0).substr(2):"absolute"===b&&a.substr(0,c.length)===c&&(a=a.substr(c.length));return a}function Ja(a,b,c,k,q){null==a&&(a="");c=c||"";k=W(k,!1);q=W(q,"\t");var f="xx-small x-small small medium large x-large xx-large".split(" ");a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(l,d,e,h){return d+e.replace(/<(?:br|br\s[^>]*)>/ig,"\n")+h});a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/ig,
    "</p>");a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/ig,"$1<br />$2");a=a.replace(/\u200B/g,"");a=a.replace(/\u00A9/g,"&copy;");a=a.replace(/\u00AE/g,"&reg;");a=a.replace(/\u2003/g,"&emsp;");a=a.replace(/\u3000/g,"&emsp;");a=a.replace(/<[^>]+/g,function(l){return l.replace(/\s+/g," ")});var n={};b&&(H(b,function(l,d){l=l.split(",");for(var e=0,h=l.length;e<h;e++)n[l[e]]=da(d)}),n.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/ig,"")),n.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/ig,
    "")));var g=[];a=a.replace(/(\s*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>(\s*)/g,function(l,d,e,h,m,p,r){d=d||"";e=e||"";var v=h.toLowerCase(),u=m||"";h=p?" "+p:"";r=r||"";if(b&&!n[v])return"";""===h&&bc[v]&&(h=" /");cc[v]&&(d&&(d=" "),r&&(r=" "));Ib[v]&&(e?r="\n":d="\n");k&&"br"==v&&(r="\n");if(dc[v]&&!Ib[v])if(k){e&&0<g.length&&g[g.length-1]===v?g.pop():g.push(v);r=d="\n";m=0;for(p=e?g.length:g.length-1;m<p;m++)d+=
    q,e||(r+=q);h?g.pop():e||(r+=q)}else d=r="";if(""!==u){var t=ta(l);if("font"===v){var x={},E="";H(t,function(B,A){"color"===B&&(x.color=A,delete t[B]);"size"===B&&(x["font-size"]=f[parseInt(A,10)-1]||"",delete t[B]);"face"===B&&(x["font-family"]=A,delete t[B]);"style"===B&&(E=A)});E&&!/;$/.test(E)&&(E+=";");H(x,function(B,A){""!==A&&(/\s/.test(A)&&(A="'"+A+"'"),E+=B+":"+A+";")});t.style=E}H(t,function(B,A){Hc[B]&&(t[B]=B);0<=F(B,["src","href"])&&(t[B]=Na(A,c));(b&&"style"!==B&&!n[v]["*"]&&!n[v][B]||
    "body"===v&&"contenteditable"===B||/^kindeditor_\d+$/.test(B))&&delete t[B];if("style"===B&&""!==A){var D=ua(A);H(D,function(C,O){!b||n[v].style||n[v]["."+C]||delete D[C]});var G="";H(D,function(C,O){G+=C+":"+O+";"});t.style=G}});u="";H(t,function(B,A){if("style"!==B||""!==A)A=A.replace(/"/g,"&quot;"),u+=" "+B+'="'+A+'"'})}"font"===v&&(v="span");return d+"<"+e+v+u+h+">"+r});a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(l,d,e,h){return d+e.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+
    h});a=a.replace(/\n\s*\n/g,"\n");a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n");return Y(a)}function Ta(a,b){a=a.replace(/<meta[\s\S]*?>/ig,"").replace(/<![\s\S]*?>/ig,"").replace(/<style[^>]*>[\s\S]*?<\/style>/ig,"").replace(/<script[^>]*>[\s\S]*?<\/script>/ig,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/ig,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<(?:table|td)[^>]*>/ig,function(c){return c.replace(/border-bottom:([#\w\s]+)/ig,"border:$1")});
    return Ja(a,b)}function Va(a){return/\.(rm|rmvb)(\?|$)/i.test(a)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(a)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function Sa(a){return ta(unescape(a))}function Aa(a){var b="<embed ";H(a,function(c,k){b+=c+'="'+k+'" '});return b+="/>"}function Ka(a,b){var c=b.width,k=b.height,q=b.type||Va(b.src);b=Aa(b);var f="";/\D/.test(c)?f+="width:"+c+";":0<c&&(f+="width:"+c+"px;");/\D/.test(k)?f+="height:"+k+";":0<k&&(f+="height:"+k+"px;");c=/realaudio/i.test(q)?
    "ke-rm":/flash/i.test(q)?"ke-flash":"ke-media";a='<img class="'+c+'" src="'+a+'" ';""!==f&&(a+='style="'+f+'" ');return a+='data-ke-tag="'+escape(b)+'" alt="" />'}function bb(a,b){if(9==a.nodeType&&9!=b.nodeType)return!0;for(;b=b.parentNode;)if(b==a)return!0;return!1}function ob(a,b){b=b.toLowerCase();var c=null;if(Ic||"script"==a.nodeName.toLowerCase())try{c=a.getAttribute(b,2)}catch(q){c=a.getAttribute(b,1)}else{var k=a.ownerDocument.createElement("div");k.appendChild(a.cloneNode(!1));a=ta(ba(k.innerHTML));
    b in a&&(c=a[b])}"style"===b&&null!==c&&(c=Ia(c));return c}function hb(a,b){function c(A){return"string"!=typeof A?A:A.replace(/([^\w\-])/g,"\\$1")}function k(A,D){return"*"===A||A.toLowerCase()===c(D.toLowerCase())}function q(A,D,G){var C=[];(A=(G.ownerDocument||G).getElementById(A.replace(/\\/g,"")))&&k(D,A.nodeName)&&bb(G,A)&&C.push(A);return C}function f(A,D,G){var C=G.ownerDocument||G,O=[],U;if(G.getElementsByClassName){C=G.getElementsByClassName(A.replace(/\\/g,""));var J=0;for(U=C.length;J<
U;J++){var I=C[J];k(D,I.nodeName)&&O.push(I)}}else if(C.querySelectorAll)for(C=C.querySelectorAll(("#document"!==G.nodeName?G.nodeName+" ":"")+D+"."+A),J=0,U=C.length;J<U;J++)I=C[J],bb(G,I)&&O.push(I);else for(C=G.getElementsByTagName(D),A=" "+A+" ",J=0,U=C.length;J<U;J++)I=C[J],1==I.nodeType&&(D=I.className)&&-1<(" "+D+" ").indexOf(A)&&O.push(I);return O}function n(A,D,G,C){var O=[];G=C.getElementsByTagName(G);for(var U=0,J=G.length;U<J;U++)C=G[U],1==C.nodeType&&(null===D?null!==ob(C,A)&&O.push(C):
    D===c(ob(C,A))&&O.push(C));return O}function g(A,D){var G=[],C,O=(C=/^((?:\\.|[^.#\s\[<>])+)/.exec(A))?C[1]:"*";if(C=/#((?:[\w\-]|\\.)+)$/.exec(A))G=q(C[1],O,D);else if(C=/\.((?:[\w\-]|\\.)+)$/.exec(A))G=f(C[1],O,D);else if(C=/\[((?:[\w\-]|\\.)+)\]/.exec(A))G=n(C[1].toLowerCase(),null,O,D);else if(C=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(A))if(G=C[1].toLowerCase(),C=C[2],"id"===G)G=q(C,O,D);else if("class"===G)G=f(C,O,D);else if("name"===G){G=[];C=(D.ownerDocument||D).getElementsByName(C.replace(/\\/g,
    ""));for(var U=0,J=C.length;U<J;U++)A=C[U],k(O,A.nodeName)&&bb(D,A)&&null!==A.getAttribute("name")&&G.push(A)}else G=n(G,C,O,D);else for(D=D.getElementsByTagName(O),C=0,A=D.length;C<A;C++)O=D[C],1==O.nodeType&&G.push(O);return G}var l=a.split(",");if(1<l.length){var d=[];H(l,function(){H(hb(this,b),function(){0>F(this,d)&&d.push(this)})});return d}b=b||document;l=[];for(var e,h=/((?:\\.|[^\s>])+|[\s>])/g;e=h.exec(a);)" "!==e[1]&&l.push(e[1]);a=[];if(1==l.length)return g(l[0],b);e=!1;var m,p;var r=
    0;for(lenth=l.length;r<lenth;r++)if(h=l[r],">"===h)e=!0;else{if(0<r){var v=[];var u=0;for(m=a.length;u<m;u++){var t=a[u];var x=g(h,t);var E=0;for(p=x.length;E<p;E++){var B=x[E];e?t===B.parentNode&&v.push(B):v.push(B)}}a=v}else a=g(h,b);if(0===a.length)return[]}return a}function ib(a){return a?a.ownerDocument||a.document||a:document}function jb(a){if(!a)return w;a=ib(a);return a.parentWindow||a.defaultView}function Jc(a,b){if(1==a.nodeType){var c=ib(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+
    b;var k=c.getElementById("__kindeditor_temp_tag__");k.parentNode.removeChild(k)}catch(q){y(a).empty(),y("@"+b,c).each(function(){a.appendChild(this)})}}}function Jb(a,b,c){Ca&&8>Oa&&"class"==b.toLowerCase()&&(b="className");a.setAttribute(b,""+c)}function Kb(a){return a&&a.nodeName?a.nodeName.toLowerCase():""}function Kc(a,b){var c=jb(a),k=Z(b),q="";c.getComputedStyle?(c=c.getComputedStyle(a,null),q=c[k]||c.getPropertyValue(b)||a.style[k]):a.currentStyle&&(q=a.currentStyle[k]||a.style[k]);return q}
    function Wa(a){a=a||document;return cb?a.body:a.documentElement}function pb(a){a=a||document;if(Ca||Lc||Lb){var b=Wa(a).scrollLeft;a=Wa(a).scrollTop}else b=jb(a).scrollX,a=jb(a).scrollY;return{x:b,y:a}}function Qa(a){this.init(a)}function ec(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;return a}function Mb(a,b,c){function k(t,x,E){var B=t.nodeValue.length;if(b){var A=t.cloneNode(!0);A=0<x?A.splitText(x):A;E<B&&A.splitText(E-x)}if(c){var D=t;0<x&&(D=t.splitText(x),
        a.setStart(t,x));E<B&&(t=D.splitText(E-x),a.setEnd(t,0));g.push(D)}return A}function q(){c&&a.up().collapse(!0);for(var t=0,x=g.length;t<x;t++){var E=g[t];E.parentNode&&E.parentNode.removeChild(E)}}function f(t,x){t=t.firstChild;for(var E;t;){E=(new Za(n)).selectNode(t);d=E.compareBoundaryPoints(1,a);0<=d&&0>=e&&(e=E.compareBoundaryPoints(0,a));0<=e&&0>=h&&(h=E.compareBoundaryPoints(2,a));0<=h&&0>=m&&(m=E.compareBoundaryPoints(3,a));if(0<=m)return!1;E=t.nextSibling;if(0<d)if(1==t.nodeType)if(0<=e&&
        0>=h)b&&x.appendChild(t.cloneNode(!0)),c&&g.push(t);else{if(b){var B=t.cloneNode(!1);x.appendChild(B)}if(!1===f(t,B))return!1}else if(3==t.nodeType&&(t=t==l.startContainer?k(t,l.startOffset,t.nodeValue.length):t==l.endContainer?k(t,0,l.endOffset):k(t,0,t.nodeValue.length),b))try{x.appendChild(t)}catch(A){}t=E}}var n=a.doc,g=[],l=a.cloneRange().down(),d=-1,e=-1,h=-1,m=-1,p=a.commonAncestor(),r=n.createDocumentFragment();if(3==p.nodeType)return p=k(p,a.startOffset,a.endOffset),b&&r.appendChild(p),q(),
        b?r:a;f(p,r);c&&a.up().collapse(!0);p=0;for(var v=g.length;p<v;p++){var u=g[p];u.parentNode&&u.parentNode.removeChild(u)}return b?r:a}function rb(a,b){for(var c=b;c;){var k=y(c);if("marquee"==k.name||"select"==k.name)return;c=c.parentNode}try{a.moveToElementText(b)}catch(q){}}function fc(a,b){var c=a.parentElement().ownerDocument,k=a.duplicate();k.collapse(b);var q=k.parentElement(),f=q.childNodes;if(0===f.length)return{node:q.parentNode,offset:y(q).index()};b=c;var n=0,g=-1,l=a.duplicate();rb(l,
        q);for(var d=0,e=f.length;d<e;d++){var h=f[d];g=l.compareEndPoints("StartToStart",k);if(0===g)return{node:h.parentNode,offset:d};if(1==h.nodeType){var m=a.duplicate(),p=y(h),r=h;if(p.isControl()){var v=c.createElement("span");p.after(v);r=v;n+=p.text().replace(/\r\n|\n|\r/g,"").length}rb(m,r);l.setEndPoint("StartToEnd",m);n=0<g?n+m.text.replace(/\r\n|\n|\r/g,"").length:0;v&&y(v).remove()}else 3==h.nodeType&&(l.moveStart("character",h.nodeValue.length),n+=h.nodeValue.length);0>g&&(b=h)}if(0>g&&1==
        b.nodeType)return{node:q,offset:y(q.lastChild).index()+1};if(0<g)for(;b.nextSibling&&1==b.nodeType;)b=b.nextSibling;l=a.duplicate();rb(l,q);l.setEndPoint("StartToEnd",k);n-=l.text.replace(/\r\n|\n|\r/g,"").length;if(0<g&&3==b.nodeType)for(a=b.previousSibling;a&&3==a.nodeType;)n-=a.nodeValue.length,a=a.previousSibling;return{node:b,offset:n}}function gc(a,b){var c=a.ownerDocument||a,k=c.body.createTextRange();if(c==a)return k.collapse(!0),k;if(1==a.nodeType&&0<a.childNodes.length){a=a.childNodes;if(0===
        b){var q=a[0];var f=!0}else q=a[b-1],f=!1;if(!q)return k;if("head"===y(q).name)return 1===b&&(f=!0),2===b&&(f=!1),k.collapse(f),k;if(1==q.nodeType){b=y(q);if(b.isControl()){var n=c.createElement("span");f?b.before(n):b.after(n);q=n}rb(k,q);k.collapse(f);n&&y(n).remove();return k}a=q;b=f?0:q.nodeValue.length}c=c.createElement("span");y(a).before(c);rb(k,c);k.moveStart("character",b);y(c).remove();return k}function hc(a){function b(q){"tr"==y(q.node).name&&(q.node=q.node.cells[q.offset],q.offset=0)}
        if(Xa){if(a.item){var c=ib(a.item(0));c=new Za(c);c.selectNode(a.item(0));return c}c=a.parentElement().ownerDocument;var k=fc(a,!0);a=fc(a,!1);b(k);b(a);c=new Za(c);c.setStart(k.node,k.offset);c.setEnd(a.node,a.offset);return c}k=a.startContainer;c=k.ownerDocument||k;c=new Za(c);c.setStart(k,a.startOffset);c.setEnd(a.endContainer,a.endOffset);return c}function Za(a){this.init(a)}function Nb(a){return a.nodeName?new Za(a):a.constructor===Za?a:hc(a)}function db(a,b,c){try{a.execCommand(b,!1,c)}catch(k){}}
    function ic(a,b){var c="";try{c=a.queryCommandValue(b)}catch(k){}"string"!==typeof c&&(c="");return c}function Ob(a){var b=jb(a);return Xa?a.selection:b.getSelection()}function jc(a){var b={},c,k;H(a,function(q,f){c=q.split(",");q=0;for(var n=c.length;q<n;q++)k=c[q],b[k]=f});return b}function Pb(a,b){return kc(a,b,"*")||kc(a,b)}function kc(a,b,c){c=c||a.name;if(1!==a.type)return!1;b=jc(b);if(!b[c])return!1;c=b[c].split(",");b=0;for(var k=c.length;b<k;b++){var q=c[b];if("*"===q)return!0;var f=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(q),
        n=f[1]?"css":"attr";q=f[2];f=f[3]||"";if(""===f&&""!==a[n](q)||""!==f&&a[n](q)===f)return!0}return!1}function Qb(a,b){1==a.type&&(lc(a,b,"*"),lc(a,b))}function lc(a,b,c){c=c||a.name;if(1===a.type&&(b=jc(b),b[c])){c=b[c].split(",");b=!1;for(var k=0,q=c.length;k<q;k++){var f=c[k];if("*"===f){b=!0;break}var n=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(f);f=n[2];n[1]?(f=Z(f),a[0].style[f]&&(a[0].style[f]="")):a.removeAttr(f)}b&&a.remove(!0)}}function Rb(a){for(;a.first();)a=a.first();return a}function qb(a){return 1!=
    a.type||a.isSingle()?!1:""===a.html().replace(/<[^>]+>/g,"")}function Mc(a,b,c){H(b,function(k,q){"style"!==k&&a.attr(k,q)});H(c,function(k,q){a.css(k,q)})}function sb(a){this.init(a)}function mc(a){a.nodeName&&(a=ib(a),a=Nb(a).selectNodeContents(a.body).collapse(!1));return new sb(a)}function Sb(a){var b=a.moveEl,c=a.moveFn,k=a.clickEl||b,q=a.beforeDrag,f=[document];(a.iframeFix===z||a.iframeFix)&&y("iframe").each(function(){var n=Na(this.src||"","absolute");if(!/^https?:\/\//.test(n)){try{var g=
        Tb(this)}catch(l){}g&&(n=y(this).pos(),y(g).data("pos-x",n.x),y(g).data("pos-y",n.y),f.push(g))}});k.mousedown(function(n){function g(t){t.preventDefault();var x=y(ib(t.target)),E=eb((x.data("pos-x")||0)+t.pageX-v);t=eb((x.data("pos-y")||0)+t.pageY-u);c.call(k,h,m,p,r,E,t)}function l(t){t.preventDefault()}function d(t){t.preventDefault();y(f).unbind("mousemove",g).unbind("mouseup",d).unbind("selectstart",l);e.releaseCapture&&e.releaseCapture()}if(0===n.button||1===n.button){n.stopPropagation();var e=
        k.get(),h=M(b.css("left")),m=M(b.css("top")),p=b.width(),r=b.height(),v=n.pageX,u=n.pageY;q&&q();y(f).mousemove(g).mouseup(d).bind("selectstart",l);e.setCapture&&e.setCapture()}})}function fb(a){this.init(a)}function Ub(a){return new fb(a)}function Tb(a){a=y(a)[0];return a.contentDocument||a.contentWindow.document}function Nc(a,b,c,k){var q=[""===Vb?"<html>":'<html dir="'+Vb+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",
        'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}","img.ke-flash {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/flash.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-rm {","\tborder:1px solid #AAA;",
        "\tbackground-image:url("+a+"common/rm.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-media {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/media.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-anchor {","\tborder:1px dashed #666;","\twidth:16px;","\theight:16px;","}",".ke-script, .ke-noscript, .ke-display-none {","\tdisplay:none;",
        "\tfont-size:0;","\twidth:0;","\theight:0;","}",".ke-pagebreak {","\tborder:1px dotted #AAA;","\tfont-size:0;","\theight:2px;","}","</style>"];Q(c)||(c=[c]);H(c,function(f,n){n&&q.push('<link href="'+n+'" rel="stylesheet" />')});k&&q.push("<style>"+k+"</style>");q.push("</head><body "+(b?'class="'+b+'"':"")+"></body></html>");return q.join("\n")}function tb(a,b){return a.hasVal()?b===z?(a=a.val(),a=a.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,"")):a.val(b):a.html(b)}function ub(a){this.init(a)}function nc(a){return new ub(a)}
    function oc(a,b){(a=this.get(a))&&!a.hasClass("ke-disabled")&&b(a)}function Db(a){this.init(a)}function pc(a){return new Db(a)}function vb(a){this.init(a)}function Wb(a){return new vb(a)}function wb(a){this.init(a)}function qc(a){return new wb(a)}function Xb(a){this.init(a)}function xb(a){this.init(a)}function rc(a){return new xb(a)}function Yb(a,b){var c=document.getElementsByTagName("head")[0]||(cb?document.body:document.documentElement),k=document.createElement("script");c.appendChild(k);k.src=
        a;k.charset="utf-8";k.onload=k.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(b&&b(),k.onload=k.onreadystatechange=null,c.removeChild(k))}}function sc(a){var b=a.indexOf("?");return 0<b?a.substr(0,b):a}function Zb(a){for(var b=document.getElementsByTagName("head")[0]||(cb?document.body:document.documentElement),c=document.createElement("link"),k=sc(Na(a,"absolute")),q=y('link[rel="stylesheet"]',b),f=0,n=q.length;f<n;f++)if(sc(Na(q[f].href,"absolute"))===k)return;b.appendChild(c);
        c.href=a;c.rel="stylesheet"}function Oc(a){var b=a.split(",");a=b[0].match(/:(.*?);/)[1];b=atob(b[1]);for(var c=b.length,k=new Uint8Array(c);c--;)k[c]=b.charCodeAt(c);return new Blob([k],{type:a})}function Pc(a,b){var c=a.edit.doc,k=new FormData;k.append("name","snapshot.png");k.append("file",Oc($(b).attr("src")),"snapshot.png");$.ajax({url:a.uploadJson,type:"POST",Accept:"text/html;charset=UTF-8",cache:!1,async:!0,processData:!1,contentType:!1,crossDomain:!0,data:k,xhr:function(){var q=$.ajaxSettings.xhr();
            q.upload&&q.upload.addEventListener("progress",function(f){f=Math.floor(100*f.loaded/f.total);y("#__kindeditor_paste_image_mask__",c).css("height",100-f+"%")},!1);return q},beforeSend:function(q,f){a.insertHtml('<div id="__kindeditor_paste_image__" style="display: inline-block;position: relative;"><div id="__kindeditor_paste_image_mask__" style="position: absolute;background: rgba(0,0,0,0.3);height: 100%;width: 100%; "></div>'+b+"</div>",!0)},success:function(q){y.query("#__kindeditor_paste_image__",
            c).remove();"function"===typeof a.options.afterUploaded&&(q=a.options.afterUploaded(q));0!==q.error?alert("\u4e0a\u4f20\u5931\u8d25:"+q.message):(b='<img src="'+q.url+'">',a.insertHtml(b,!0))},error:function(q){y("#__kindeditor_paste_image__").remove()}})}function tc(a,b){if(a===z)return $a;if(!b)return $a[a];$a[a]=b}function uc(a){var b,c="core";if(b=/^(\w+)\.(\w+)$/.exec(a))c=b[1],a=b[2];return{ns:c,key:a}}function vc(a,b){b=b===z?y.options.langType:b;if("string"===typeof a){if(!ab[b])return"no language";
        var c=a.length-1;if("."===a.substr(c))return ab[b][a.substr(0,c)];a=uc(a);return ab[b][a.ns][a.key]}H(a,function(k,q){k=uc(k);ab[b]||(ab[b]={});ab[b][k.ns]||(ab[b][k.ns]={});ab[b][k.ns][k.key]=q})}function Eb(a,b){if(!a.collapsed){a=a.cloneRange().up();var c=a.startContainer,k=a.startOffset;if((kb||a.isControl())&&(a=y(c.childNodes[k]))&&"img"==a.name&&b(a))return a}}function Qc(){var a=this;y(a.edit.doc).contextmenu(function(b){a.menu&&a.hideMenu();if(!a.useContextmenu)b.preventDefault();else if(0!==
        a._contextmenus.length){var c=0,k=[];for(H(a._contextmenus,function(){"-"==this.title?k.push(this):this.cond&&this.cond()&&(k.push(this),this.width&&this.width>c&&(c=this.width))});0<k.length&&"-"==k[0].title;)k.shift();for(;0<k.length&&"-"==k[k.length-1].title;)k.pop();var q=null;H(k,function(l){"-"==this.title&&"-"==q.title&&delete k[l];q=this});if(0<k.length){b.preventDefault();var f=y(a.edit.iframe).pos(),n=Wb({x:f.x+b.clientX,y:f.y+b.clientY,width:c,css:{visibility:"hidden"},shadowMode:a.shadowMode});
        H(k,function(){this.title&&n.addItem(this)});f=Wa(n.doc);var g=n.div.height();b.clientY+g>=f.clientHeight-100&&n.pos(n.x,M(n.y)-g);n.div.css("visibility","visible");a.menu=n}}})}function Rc(){function a(n){for(n=y(n.commonAncestor());n&&(1!=n.type||n.isStyle());)n=n.parent();return n.name}var b=this,c=b.edit.doc,k=b.newlineTag;if(!(Ca&&"br"!==k||lb&&3>Oa&&"p"!==k||Lb&&9>Oa)){var q=da("h1,h2,h3,h4,h5,h6,pre,li"),f=da("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");y(c).keydown(function(n){if(!(13!=n.which||
        n.shiftKey||n.ctrlKey||n.altKey)){b.cmd.selection();var g=a(b.cmd.range);"marquee"!=g&&"select"!=g&&("br"!==k||q[g]?f[g]||db(c,"formatblock","<p>"):(n.preventDefault(),b.insertHtml("<br />"+(Ca&&9>Oa?"":"\u200b"))))}});y(c).keyup(function(n){if(!(13!=n.which||n.shiftKey||n.ctrlKey||n.altKey)&&"br"!=k)if(lb){n=b.cmd.commonAncestor("p");var g=b.cmd.commonAncestor("a");g&&""==g.text()&&(g.remove(!0),b.cmd.range.selectNodeContents(n[0]).collapse(!0),b.cmd.select())}else b.cmd.selection(),n=a(b.cmd.range),
    "marquee"!=n&&"select"!=n&&(f[n]||db(c,"formatblock","<p>"))})}}function Sc(){var a=this,b=a.edit.doc;y(b).keydown(function(c){if(9==c.which)if(c.preventDefault(),a.afterTab)a.afterTab.call(a,c);else{c=a.cmd;var k=c.range;k.shrink();k.collapsed&&1==k.startContainer.nodeType&&(k.insertNode(y("@&nbsp;",b)[0]),c.select());a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function Tc(){var a=this;y(a.edit.textarea[0],a.edit.win).focus(function(b){a.afterFocus&&a.afterFocus.call(a,b)}).blur(function(b){a.afterBlur&&
    a.afterBlur.call(a,b)})}function gb(a){return Y(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/ig,""))}function Fb(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/ig,"")}function wc(a,b){if(0===a.length)a.push(b);else{var c=a[a.length-1];gb(b.html)!==gb(c.html)&&a.push(b)}}function xc(a,b){var c=this.edit,k=c.doc.body;if(0===a.length)return this;if(c.designMode){var q=this.cmd.range;var f=q.createBookmark(!0);f.html=k.innerHTML}else f=
        {html:k.innerHTML};wc(b,f);b=a.pop();gb(f.html)===gb(b.html)&&0<a.length&&(b=a.pop());c.designMode?(c.html(b.html),b.start&&(q.moveToBookmark(b),this.select())):y(k).html(gb(b.html));return this}function yb(a){function b(q,f){yb.prototype[q]===z&&(c[q]=f);c.options[q]=f}var c=this;c.options={};H(a,function(q,f){b(q,a[q])});H(y.options,function(q,f){c[q]===z&&b(q,f)});var k=y(c.srcElement||"<textarea/>");c.width||(c.width=k[0].style.width||k.width());c.height||(c.height=k[0].style.height||k.height());
        b("width",W(c.width,c.minWidth));b("height",W(c.height,c.minHeight));b("width",L(c.width));b("height",L(c.height));Uc&&(!Vc||534>Oa)&&(c.designMode=!1);c.srcElement=k;c.initContent="";c.plugin={};c.isCreated=!1;c._handlers={};c._contextmenus=[];c._undoStack=[];c._redoStack=[];c._firstAddBookmark=!0;c.menu=c.contextmenu=null;c.dialogs=[]}function yc(a,b){function c(f){H($a,function(n,g){V(g)&&(g.call(f,KindEditor),f._pluginStatus||(f._pluginStatus={}),f._pluginStatus[n]="inited")});return f.create()}
        b=b||{};b.basePath=W(b.basePath,y.basePath);b.themesPath=W(b.themesPath,b.basePath+"themes/");b.langPath=W(b.langPath,b.basePath+"lang/");b.pluginsPath=W(b.pluginsPath,b.basePath+"plugins/");if(W(b.loadStyleMode,y.options.loadStyleMode)){var k=W(b.themeType,y.options.themeType);Zb(b.themesPath+"default/default.css");Zb(b.themesPath+k+"/"+k+".css")}if((a=y(a))&&0!==a.length){if(1<a.length)return a.each(function(){yc(this,b)}),zb[0];b.srcElement=a[0];var q=new yb(b);zb.push(q);if(ab[q.langType])return c(q);
            Yb(q.langPath+q.langType+".js?ver="+encodeURIComponent(y.DEBUG?Gb:"5.0.2 (2020-12-08)"),function(){c(q)});return q}}function Ab(a,b){y(a).each(function(c,k){y.each(zb,function(q,f){if(f&&f.srcElement[0]==k)return b.call(f,q),!1})})}if(!w.KindEditor){w.console||(w.console={});console.log||(console.log=function(){});var Ya=navigator.userAgent.toLowerCase(),Ca=-1<Ya.indexOf("msie")&&-1==Ya.indexOf("opera"),Lc=-1==Ya.indexOf("msie")&&-1<Ya.indexOf("trident"),lb=-1<Ya.indexOf("gecko")&&-1==Ya.indexOf("khtml"),
        kb=-1<Ya.indexOf("applewebkit"),Lb=-1<Ya.indexOf("opera"),Uc=-1<Ya.indexOf("mobile"),Vc=/ipad|iphone|ipod/.test(Ya),cb="CSS1Compat"!=document.compatMode,Xa=!w.getSelection,zc=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(Ya),Oa=zc?zc[1]:"0",Gb=(new Date).getTime(),eb=Math.round,y={DEBUG:!1,VERSION:"5.0.2 (2020-12-08)",IE:Ca,GECKO:lb,WEBKIT:kb,OPERA:Lb,V:Oa,TIME:Gb,each:H,isArray:Q,isFunction:V,inArray:F,inString:N,trim:Y,addUnit:L,removeUnit:M,escape:T,unescape:ba,toCamel:Z,toHex:S,toMap:da,toArray:pa,
            undef:W,invalidUrl:function(a){return!a||/[<>"]/.test(a)},addParam:function(a,b){return 0<=a.indexOf("?")?a+"&"+b:a+"?"+b},extend:ka,json:ca},cc=da("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),dc=da("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),
        bc=da("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),Ac=da("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),Wc=da("img,table,input,textarea,button"),Ib=da("pre,style,script"),Hb=da("html,head,body,td,tr,table,ol,ul,li");da("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var Hc=da("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),Bc=da("input,button,textarea,select");y.basePath=function(){for(var a=
        document.getElementsByTagName("script"),b,c=0,k=a.length;c<k;c++)if(b=a[c].src||"",/kindeditor[\w\-\.]*\.js/.test(b))return b.substring(0,b.lastIndexOf("/")+1);return""}();y.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,allowFileManager:!1,basePath:y.basePath,themesPath:y.basePath+"themes/",langPath:y.basePath+"lang/",pluginsPath:y.basePath+"plugins/",themeType:"simple",langType:"zh-CN",urlType:"",newlineTag:"br",resizeType:2,syncType:"form",
        pasteType:2,dialogAlignType:"page",useContextmenu:!1,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,zIndex:19890322,items:"source | formatblock fontsize | justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist forecolor hilitecolor bold italic underline lineheight table insertimages preview fullscreen".split(" "),noDisableItems:["source","fullscreen"],colorTable:["#E53333 #E56600 #FF9900 #64451D #DFC5A4 #FFE500".split(" "),
            "#009900 #006600 #99BB00 #B8D100 #60D978 #00D5FF".split(" "),"#337FE5 #003399 #4C33E5 #9933E5 #CC33E5 #EE33EE".split(" "),"#FFFFFF #CCCCCC #999999 #666666 #333333 #000000".split(" ")],fontSizeTable:"9px 10px 12px 14px 16px 18px 24px 32px".split(" "),htmlTags:{font:"id class color size face .background-color".split(" "),span:"id class .color .background-color .font-size .font-family .background .font-weight .font-style .text-decoration .vertical-align .line-height".split(" "),div:"id class align .border .margin .padding .text-align .color .background-color .font-size .font-family .font-weight .background .font-style .text-decoration .vertical-align .margin-left".split(" "),
            table:"id class border cellspacing cellpadding width height align bordercolor .padding .margin .border bgcolor .text-align .color .background-color .font-size .font-family .font-weight .font-style .text-decoration .background .width .height .border-collapse".split(" "),"td,th":"id class align valign width height colspan rowspan bgcolor .text-align .color .background-color .font-size .font-family .font-weight .font-style .text-decoration .vertical-align .background .border".split(" "),a:["id","class",
                "href","target","name"],embed:"id class src width height type loop autostart quality .width .height align allowscriptaccess wmode".split(" "),img:"id class src width height border alt title align .width .height .border".split(" "),"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":"id class align .text-align .color .background-color .font-size .font-family .background .font-weight .font-style .text-decoration .vertical-align .text-indent .margin-left".split(" "),pre:["id","class"],hr:["id","class",".page-break-after"],
            "br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:"id class src frameborder width height .width .height".split(" ")},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var Cc=da("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),Xc=da("33..40"),$b={};H(Cc,function(a,b){$b[a]=b});H(Xc,function(a,b){$b[a]=b});var Yc="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
        ka(aa,{init:function(a,b){var c=this,k=a.ownerDocument||a.document||a;c.event=b;H(Yc,function(q,f){c[f]=b[f]});c.target||(c.target=c.srcElement||k);3===c.target.nodeType&&(c.target=c.target.parentNode);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement);null==c.pageX&&null!=c.clientX&&(a=k.documentElement,k=k.body,c.pageX=c.clientX+(a&&a.scrollLeft||k&&k.scrollLeft||0)-(a&&a.clientLeft||k&&k.clientLeft||0),c.pageY=c.clientY+(a&&a.scrollTop||k&&k.scrollTop||
                0)-(a&&a.clientTop||k&&k.clientTop||0));!c.which&&(c.charCode||0===c.charCode?c.charCode:c.keyCode)&&(c.which=c.charCode||c.keyCode);!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey);c.which||c.button===z||(c.which=c.button&1?1:c.button&2?3:c.button&4?2:0);switch(c.which){case 186:c.which=59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110}96<=c.which&&105>=c.which&&(c.which-=48)},preventDefault:function(){var a=
                this.event;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){var a=this.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},stop:function(){this.preventDefault();this.stopPropagation()}});var nb="kindeditor_"+Gb,ac=0,Ma={},Dc=!1;w.attachEvent&&w.attachEvent("onunload",function(){H(Ma,function(a,b){b.el&&va(b.el)})});y.ctrl=Ba;y.ready=function(a){function b(){q||(q=!0,a(KindEditor),Dc=!0)}function c(){if(!q){try{document.documentElement.doScroll("left")}catch(n){setTimeout(c,
            100);return}b()}}function k(){"complete"===document.readyState&&b()}if(Dc)a(KindEditor);else{var q=!1;if(document.addEventListener)ha(document,"DOMContentLoaded",b);else if(document.attachEvent){ha(document,"readystatechange",k);var f=!1;try{f=null==w.frameElement}catch(n){}document.documentElement.doScroll&&f&&c()}ha(w,"load",b)}};y.formatUrl=Na;y.formatHtml=Ja;y.getCssList=ua;y.getAttrList=ta;y.mediaType=Va;y.mediaAttrs=Sa;y.mediaEmbed=Aa;y.mediaImg=Ka;y.clearMsWord=Ta;y.tmpl=function(a,b){a=new Function("obj",
            "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?a(b):a};var Ec=document.createElement("div");Ec.setAttribute("className","t");var Ic="t"!==Ec.className;y.query=function(a,b){a=hb(a,b);return 0<a.length?a[0]:null};y.queryAll=hb;ka(Qa,{init:function(a){a=
                Q(a)?a:[a];for(var b=0,c=0,k=a.length;c<k;c++)a[c]&&(this[c]=a[c].constructor===Qa?a[c][0]:a[c],b++);this.length=b;this.doc=ib(this[0]);this.name=Kb(this[0]);this.type=0<this.length?this[0].nodeType:null;this.win=jb(this[0])},each:function(a){for(var b=0;b<this.length&&!1!==a.call(this[b],b,this[b]);b++);return this},bind:function(a,b){this.each(function(){ha(this,a,b)});return this},unbind:function(a,b){this.each(function(){va(this,a,b)});return this},fire:function(a){if(1>this.length)return this;
                qa(this[0],a);return this},hasAttr:function(a){return 1>this.length?!1:!!ob(this[0],a)},attr:function(a,b){var c=this;if(a===z)return ta(c.outer());if("object"===typeof a)return H(a,function(k,q){c.attr(k,q)}),c;if(b===z)return b=1>c.length?null:ob(c[0],a),null===b?"":b;c.each(function(){Jb(this,a,b)});return c},removeAttr:function(a){this.each(function(){var b=a;Ca&&8>Oa&&"class"==b.toLowerCase()&&(b="className");Jb(this,b,"");this.removeAttribute(b)});return this},get:function(a){return 1>this.length?
                null:this[a||0]},eq:function(a){return 1>this.length?null:this[a]?new Qa(this[a]):null},hasClass:function(a){return 1>this.length?!1:N(a,this[0].className," ")},addClass:function(a){this.each(function(){N(a,this.className," ")||(this.className=Y(this.className+" "+a))});return this},removeClass:function(a){this.each(function(){N(a,this.className," ")&&(this.className=Y(this.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," ")))});return this},html:function(a){if(a===z)return 1>this.length||1!=
            this.type?"":Ja(this[0].innerHTML);this.each(function(){Jc(this,a)});return this},text:function(){return 1>this.length?"":Ca?this[0].innerText:this[0].textContent},hasVal:function(){return 1>this.length?!1:!!Bc[Kb(this[0])]},val:function(a){if(a===z)return 1>this.length?"":this.hasVal()?this[0].value:this.attr("value");this.each(function(){Bc[Kb(this)]?this.value=a:Jb(this,"value",a)});return this},css:function(a,b){var c=this;if(a===z)return ua(c.attr("style"));if("object"===typeof a)return H(a,
                function(k,q){c.css(k,q)}),c;if(b===z)return 1>c.length?"":c[0].style[Z(a)]||Kc(c[0],a)||"";c.each(function(){this.style[Z(a)]=b});return c},width:function(a){return a===z?1>this.length?0:this[0].offsetWidth:this.css("width",L(a))},height:function(a){return a===z?1>this.length?0:this[0].offsetHeight:this.css("height",L(a))},opacity:function(a){this.each(function(){this.style.opacity===z?this.style.filter=1==a?"":"alpha(opacity="+100*a+")":this.style.opacity=1==a?"":a});return this},data:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     b){a="kindeditor_data_"+a;if(b===z)return 1>this.length?null:this[0][a];this.each(function(){this[a]=b});return this},pos:function(){var a=this[0],b=0,c=0;if(a)if(a.getBoundingClientRect)a=a.getBoundingClientRect(),c=pb(this.doc),b=a.left+c.x,c=a.top+c.y;else for(;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{x:eb(b),y:eb(c)}},clone:function(a){return 1>this.length?new Qa([]):new Qa(this[0].cloneNode(a))},append:function(a){this.each(function(){this.appendChild&&this.appendChild(y(a)[0])});
                return this},appendTo:function(a){this.each(function(){y(a)[0].appendChild(this)});return this},before:function(a){this.each(function(){this.parentNode.insertBefore(y(a)[0],this)});return this},after:function(a){this.each(function(){this.nextSibling?this.parentNode.insertBefore(y(a)[0],this.nextSibling):this.parentNode.appendChild(y(a)[0])});return this},replaceWith:function(a){var b=[];this.each(function(c,k){va(k);c=y(a)[0];k.parentNode.replaceChild(c,k);b.push(c)});return y(b)},empty:function(){this.each(function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){for(a=b.firstChild;a&&b.parentNode;){var c=a.nextSibling;a.parentNode.removeChild(a);a=c}});return this},remove:function(a){var b=this;b.each(function(c,k){if(k.parentNode){va(k);if(a)for(var q=k.firstChild;q;){var f=q.nextSibling;k.parentNode.insertBefore(q,k);q=f}k.parentNode.removeChild(k);delete b[c]}});b.length=0;return b},show:function(a){a===z&&(a=this._originDisplay||"");return"none"!=this.css("display")?this:this.css("display",a)},hide:function(){if(1>this.length)return this;this._originDisplay=
                this[0].style.display;return this.css("display","none")},outer:function(){if(1>this.length)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(!0));return Ja(a.innerHTML)},isSingle:function(){return!!bc[this.name]},isInline:function(){return!!cc[this.name]},isBlock:function(){return!!dc[this.name]},isStyle:function(){return!!Ac[this.name]},isControl:function(){return!!Wc[this.name]},contains:function(a){return 1>this.length?!1:bb(this[0],y(a)[0])},parent:function(){if(1>this.length)return null;
                var a=this[0].parentNode;return a?new Qa(a):null},children:function(){if(1>this.length)return new Qa([]);for(var a=[],b=this[0].firstChild;b;)3==b.nodeType&&""===Y(b.nodeValue)||a.push(b),b=b.nextSibling;return new Qa(a)},first:function(){var a=this.children();return 0<a.length?a.eq(0):null},last:function(){var a=this.children();return 0<a.length?a.eq(a.length-1):null},index:function(){if(1>this.length)return-1;for(var a=-1,b=this[0];b;)a++,b=b.previousSibling;return a},prev:function(){if(1>this.length)return null;
                var a=this[0].previousSibling;return a?new Qa(a):null},next:function(){if(1>this.length)return null;var a=this[0].nextSibling;return a?new Qa(a):null},scan:function(a,b){function c(k){for(k=b?k.firstChild:k.lastChild;k;){var q=b?k.nextSibling:k.previousSibling;if(!1===a(k)||!1===c(k))return!1;k=q}}if(!(1>this.length))return b=b===z?!0:b,c(this[0]),this}});H("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
            function(a,b){Qa.prototype[b]=function(c){return c?this.bind(b,c):this.fire(b)}});var Zc=y;y=function(a,b){function c(l){l[0]||(l=[]);return new Qa(l)}if(a!==z&&null!==a){if("string"===typeof a){b&&(b=y(b)[0]);var k=a.length;"@"===a.charAt(0)&&(a=a.substr(1));if(a.length!==k||/<.+>/.test(a)){k=(b?b.ownerDocument||b:document).createElement("div");var q=[];k.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+a;for(var f=0,n=k.childNodes.length;f<n;f++){var g=
            k.childNodes[f];"__kindeditor_temp_tag__"!=g.id&&q.push(g)}return c(q)}return c(hb(a,b))}if(a&&a.constructor===Qa)return a;a.toArray&&(a=a.toArray());return Q(a)?c(a):c(pa(arguments))}};H(Zc,function(a,b){y[a]=b});y.NodeClass=Qa;w.KindEditor=y;var Fc=0;ka(Za,{init:function(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this.collapsed=!0;this.doc=a},commonAncestor:function(){function a(l){for(var d=[];l;)d.push(l),l=l.parentNode;return d}for(var b=a(this.startContainer),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               c=a(this.endContainer),k=0,q=b.length,f=c.length,n,g;++k&&(n=b[q-k],g=c[f-k],n&&g&&n===g););return b[q-k+1]},setStart:function(a,b){var c=this.doc;this.startContainer=a;this.startOffset=b;this.endContainer===c&&(this.endContainer=a,this.endOffset=b);return ec(this)},setEnd:function(a,b){var c=this.doc;this.endContainer=a;this.endOffset=b;this.startContainer===c&&(this.startContainer=a,this.startOffset=b);return ec(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,y(a).index())},
            setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,y(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,y(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,y(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=y(a);if(3==b.type||b.isSingle())return this.selectNode(a);b=b.children();return 0<b.length?this.setStartBefore(b[0]).setEndAfter(b[b.length-1]):
                this.setStart(a,0).setEnd(a,0)},collapse:function(a){return a?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),k=b.get();if(Xa){c=c.compareEndPoints({0:"StartToStart",1:"EndToStart",2:"EndToEnd",3:"StartToEnd"}[a],k);if(0!==c)return c;if(0===a||3===a){var q=this.startContainer;var f=this.startOffset}if(1===a||2===a)q=this.endContainer,f=this.endOffset;if(0===a||1===a){var n=b.startContainer;var g=
                b.startOffset}if(2===a||3===a)n=b.endContainer,g=b.endOffset;if(q===n)return q=f-g,0<q?1:0>q?-1:0;for(a=n;a&&a.parentNode!==q;)a=a.parentNode;if(a)return y(a).index()>=f?-1:1;for(a=q;a&&a.parentNode!==n;)a=a.parentNode;if(a)return y(a).index()>=g?1:-1;if((a=y(n).next())&&a.contains(q))return 1;if((a=y(q).next())&&a.contains(n))return-1}else return c.compareBoundaryPoints(a,k)},cloneRange:function(){return(new Za(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},
            toString:function(){var a=this.get();return(Xa?a.text:a.toString()).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return Mb(this,!0,!1)},deleteContents:function(){return Mb(this,!1,!0)},extractContents:function(){return Mb(this,!0,!0)},insertNode:function(a){var b=this.startContainer,c=this.startOffset,k=this.endContainer,q=this.endOffset,f,n=1;if("#document-fragment"===a.nodeName.toLowerCase()){var g=a.firstChild;var l=a.lastChild;n=a.childNodes.length}1==b.nodeType?(f=b.childNodes[c])?(b.insertBefore(a,
                f),b===k&&(q+=n)):b.appendChild(a):3==b.nodeType&&(0===c?(b.parentNode.insertBefore(a,b),b.parentNode===k&&(q+=n)):c>=b.nodeValue.length?b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a):(f=0<c?b.splitText(c):b,b.parentNode.insertBefore(a,f),b===k&&(k=f,q-=c)));g?this.setStartBefore(g).setEndAfter(l):this.selectNode(a);return 1<=this.compareBoundaryPoints(2,this.cloneRange().setEnd(k,q))?this:this.setEnd(k,q)},surroundContents:function(a){a.appendChild(this.extractContents());
                return this.insertNode(a).selectNode(a)},isControl:function(){var a=this.startContainer,b=this.startOffset,c=this.endContainer,k=this.endOffset;return 1==a.nodeType&&a===c&&b+1===k&&y(a.childNodes[b]).isControl()},get:function(a){var b=this.doc;if(!Xa){b=b.createRange();try{b.setStart(this.startContainer,this.startOffset),b.setEnd(this.endContainer,this.endOffset)}catch(c){}return b}if(a&&this.isControl())return b=b.body.createControlRange(),b.addElement(this.startContainer.childNodes[this.startOffset]),
                b;a=this.cloneRange().down();b=b.body.createTextRange();b.setEndPoint("StartToStart",gc(a.startContainer,a.startOffset));b.setEndPoint("EndToStart",gc(a.endContainer,a.endOffset));return b},html:function(){return y(this.cloneContents()).outer()},down:function(){function a(c,k,q){if(1==c.nodeType&&(c=y(c).children(),0!==c.length)){var f,n;0<k&&(f=c.eq(k-1));k<c.length&&(n=c.eq(k));if(f&&3==f.type){var g=f[0];var l=g.nodeValue.length}n&&3==n.type&&(g=n[0],l=0);g&&(q?b.setStart(g,l):b.setEnd(g,l))}}
                var b=this;a(b.startContainer,b.startOffset,!0);a(b.endContainer,b.endOffset,!1);return b},up:function(){function a(c,k,q){3==c.nodeType&&(0===k?q?b.setStartBefore(c):b.setEndBefore(c):k==c.nodeValue.length&&(q?b.setStartAfter(c):b.setEndAfter(c)))}var b=this;a(b.startContainer,b.startOffset,!0);a(b.endContainer,b.endOffset,!1);return b},enlarge:function(a){function b(k,q,f){k=y(k);if(!(3==k.type||Hb[k.name]||!a&&k.isBlock()))if(0===q){for(;!k.prev();){q=k.parent();if(!q||Hb[q.name]||!a&&q.isBlock())break;
                k=q}f?c.setStartBefore(k[0]):c.setEndBefore(k[0])}else if(q==k.children().length){for(;!k.next();){q=k.parent();if(!q||Hb[q.name]||!a&&q.isBlock())break;k=q}f?c.setStartAfter(k[0]):c.setEndAfter(k[0])}}var c=this;c.up();b(c.startContainer,c.startOffset,!0);b(c.endContainer,c.endOffset,!1);return c},shrink:function(){for(var a,b=this.collapsed;1==this.startContainer.nodeType&&(a=this.startContainer.childNodes[this.startOffset])&&1==a.nodeType&&!y(a).isSingle();)this.setStart(a,0);if(b)return this.collapse(b);
                for(;1==this.endContainer.nodeType&&0<this.endOffset&&(a=this.endContainer.childNodes[this.endOffset-1])&&1==a.nodeType&&!y(a).isSingle();)this.setEnd(a,a.childNodes.length);return this},createBookmark:function(a){var b=y('<span style="display:none;"></span>',this.doc)[0];b.id="__kindeditor_bookmark_start_"+Fc++ +"__";if(!this.collapsed){var c=b.cloneNode(!0);c.id="__kindeditor_bookmark_end_"+Fc++ +"__"}c&&this.cloneRange().collapse(!1).insertNode(c).setEndBefore(c);this.insertNode(b).setStartAfter(b);
                return{start:a?"#"+b.id:b,end:c?a?"#"+c.id:c:null}},moveToBookmark:function(a){var b=this.doc,c=y(a.start,b);a=a.end?y(a.end,b):null;if(!c||1>c.length)return this;this.setStartBefore(c[0]);c.remove();a&&0<a.length?(this.setEndBefore(a[0]),a.remove()):this.collapse(!0);return this},dump:function(){console.log("--------------------");console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset);console.log(3==this.endContainer.nodeType?this.endContainer.nodeValue:
                this.endContainer,this.endOffset)}});y.RangeClass=Za;y.range=Nb;y.START_TO_START=0;y.START_TO_END=1;y.END_TO_END=2;y.END_TO_START=3;ka(sb,{init:function(a){var b=a.doc;this.doc=b;this.win=jb(b);this.sel=Ob(b);this.range=a},selection:function(a){var b=this.doc;var c=Ob(b);try{var k=0<c.rangeCount?c.getRangeAt(0):c.createRange()}catch(q){}c=!Xa||k&&(k.item||k.parentElement().ownerDocument===b)?k:null;this.sel=Ob(b);if(c)return this.range=Nb(c),"html"==y(this.range.startContainer).name&&this.range.selectNodeContents(b.body).collapse(!1),
                this;a&&this.range.selectNodeContents(b.body).collapse(!1);return this},select:function(a){a=W(a,!0);var b=this.sel,c=this.range.cloneRange().shrink(),k=c.startContainer,q=c.startOffset,f=ib(k),n=this.win,g=!1;if(a&&1==k.nodeType&&c.collapsed){if(Xa){b=y("<span>&nbsp;</span>",f);c.insertNode(b[0]);var l=f.body.createTextRange();try{l.moveToElementText(b[0])}catch(d){}l.collapse(!1);l.select();b.remove();n.focus();return this}kb&&(a=k.childNodes,y(k).isInline()||0<q&&y(a[q-1]).isInline()||a[q]&&y(a[q]).isInline())&&
            (c.insertNode(f.createTextNode("\u200b")),g=!0)}if(Xa)try{l=c.get(!0),l.select()}catch(d){}else g&&c.collapse(!1),l=c.get(!0),b.removeAllRanges(),b.addRange(l),f!==document&&(c=y(l.endContainer).pos(),n.scrollTo(c.x,c.y));n.focus();return this},wrap:function(a){var b=this.range;var c=y(a,this.doc);if(b.collapsed)return b.shrink(),b.insertNode(c[0]).selectNodeContents(c[0]),this;if(c.isBlock()){for(var k=a=c.clone(!0);k.first();)k=k.first();k.append(b.extractContents());b.insertNode(a[0]).selectNode(a[0]);
                return this}b.enlarge();var q=b.createBookmark();a=b.commonAncestor();var f=!1;y(a).scan(function(n){if(!f&&n==q.start)f=!0;else if(f){if(n==q.end)return!1;var g=y(n),l;a:{for(l=g;l&&"body"!=l.name;){if(Ib[l.name]||"div"==l.name&&l.hasClass("ke-script")){l=!0;break a}l=l.parent()}l=!1}if(!l&&3==g.type&&0<Y(n.nodeValue).length){for(var d;(d=g.parent())&&d.isStyle()&&1==d.children().length;)g=d;d=c;d=d.clone(!0);if(3==g.type)Rb(d).append(g.clone(!1)),g.replaceWith(d);else{n=g;for(var e;(e=g.first())&&
            1==e.children().length;)g=e;e=g.first();for(g=g.doc.createDocumentFragment();e;)g.appendChild(e[0]),e=e.next();e=n.clone(!0);l=Rb(e);for(var h=e,m=!1;d;){for(;h;)h.name===d.name&&(Mc(h,d.attr(),d.css()),m=!0),h=h.first();m||l.append(d.clone(!1));m=!1;d=d.first()}d=e;g.firstChild&&Rb(d).append(g);n.replaceWith(d)}}}});b.moveToBookmark(q);return this},split:function(a,b){for(var c=this.range,k=c.doc,q=c.cloneRange().collapse(a),f=q.startContainer,n=q.startOffset,g=3==f.nodeType?f.parentNode:f,l=!1,
                                                                                                                                                                                                                                                                                                                                                                                                        d;g&&g.parentNode;){d=y(g);if(b){if(!d.isStyle())break;if(!Pb(d,b))break}else if(Hb[d.name])break;l=!0;g=g.parentNode}l&&(b=k.createElement("span"),c.cloneRange().collapse(!a).insertNode(b),a?q.setStartBefore(g.firstChild).setEnd(f,n):q.setStart(f,n).setEndAfter(g.lastChild),f=q.extractContents(),n=f.firstChild,k=f.lastChild,a?(q.insertNode(f),c.setStartAfter(k).setEndBefore(b)):(g.appendChild(f),c.setStartBefore(b).setEndBefore(n)),q=b.parentNode,q==c.endContainer&&(g=y(b).prev(),f=y(b).next(),g&&
            f&&3==g.type&&3==f.type?c.setEnd(g[0],g[0].nodeValue.length):a||c.setEnd(c.endContainer,c.endOffset-1)),q.removeChild(b));return this},remove:function(a){var b=this.doc,c=this.range;c.enlarge();if(0===c.startOffset){for(var k=y(c.startContainer),q;(q=k.parent())&&q.isStyle()&&1==q.children().length;)k=q;c.setStart(k[0],0);k=y(c.startContainer);k.isBlock()&&Qb(k,a);(k=k.parent())&&k.isBlock()&&Qb(k,a)}if(c.collapsed)return this.split(!0,a),b=c.startContainer,k=c.startOffset,0<k&&(q=y(b.childNodes[k-
            1]))&&qb(q)&&(q.remove(),c.setStart(b,k-1)),(k=y(b.childNodes[k]))&&qb(k)&&k.remove(),qb(b)&&(c.startBefore(b),b.remove()),c.collapse(!0),this;this.split(!0,a);this.split(!1,a);var f=b.createElement("span"),n=b.createElement("span");c.cloneRange().collapse(!1).insertNode(n);c.cloneRange().collapse(!0).insertNode(f);var g=[],l=!1;y(c.commonAncestor()).scan(function(h){if(l||h!=f){if(h==n)return!1;l&&g.push(h)}else l=!0});y(f).remove();y(n).remove();b=c.startContainer;k=c.startOffset;q=c.endContainer;
                var d=c.endOffset;if(0<k){var e=y(b.childNodes[k-1]);e&&qb(e)&&(e.remove(),c.setStart(b,k-1),b==q&&c.setEnd(q,d-1));(k=y(b.childNodes[k]))&&qb(k)&&(k.remove(),b==q&&c.setEnd(q,d-1))}(b=y(q.childNodes[c.endOffset]))&&qb(b)&&b.remove();b=c.createBookmark(!0);H(g,function(h,m){Qb(y(m),a)});c.moveToBookmark(b);return this},commonNode:function(a){function b(n){for(var g=n;n;){if(Pb(y(n),a))return y(n);n=n.parentNode}for(;g&&(g=g.lastChild);)if(Pb(y(g),a))return y(g);return null}var c=this.range,k=c.endContainer;
                c=c.endOffset;var q=3==k.nodeType||0===c?k:k.childNodes[c-1],f=b(q);if(f)return f;if(1==q.nodeType||3==k.nodeType&&0===c)if(k=y(q).prev())return b(k);return null},commonAncestor:function(a){function b(n){for(;n;){if(1==n.nodeType&&n.tagName.toLowerCase()===a)return n;n=n.parentNode}return null}var c=this.range,k=c.startContainer,q=c.startOffset,f=c.endContainer;c=c.endOffset;f=3==f.nodeType||0===c?f:f.childNodes[c-1];k=b(3==k.nodeType||0===q?k:k.childNodes[q-1]);q=b(f);return k&&q&&k===q?y(k):null},
            state:function(a){var b=this.doc,c=!1;try{c=b.queryCommandState(a)}catch(k){}return c},val:function(a){var b=this.doc;a=a.toLowerCase();var c="";return"fontfamily"===a||"fontname"===a?(c=ic(b,"fontname"),c=c.replace(/['"]/g,""),c.toLowerCase()):"formatblock"===a?(c=ic(b,a),""===c&&(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))&&(c=a.name),"Normal"===c&&(c="p"),c.toLowerCase()):"fontsize"===a?((a=this.commonNode({"*":".font-size"}))&&(c=a.css("font-size")),c.toLowerCase()):"forecolor"===
            a?((a=this.commonNode({"*":".color"}))&&(c=a.css("color")),c=S(c),""===c&&(c="default"),c.toLowerCase()):"hilitecolor"===a?((a=this.commonNode({"*":".background-color"}))&&(c=a.css("background-color")),c=S(c),""===c&&(c="default"),c.toLowerCase()):c},toggle:function(a,b){this.commonNode(b)?this.remove(b):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",
                em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.wrap('<span style="color:'+a+';"></span>').select()},hilitecolor:function(a){return this.wrap('<span style="background-color:'+a+';"></span>').select()},fontsize:function(a){return this.wrap('<span style="font-size:'+a+';"></span>').select()},fontname:function(a){return this.fontfamily(a)},
            fontfamily:function(a){return this.wrap('<span style="font-family:'+a+';"></span>').select()},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"};H(Ac,function(b,c){a[b]="*"});this.remove(a);return this.select()},inserthtml:function(a,b){function c(n,g){g='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+g;var l=n.get();l.item?l.item(0).outerHTML=g:l.pasteHTML(g);g=n.doc.getElementById("__kindeditor_temp_tag__");
                g.parentNode.removeChild(g);l=hc(l);n.setEnd(l.endContainer,l.endOffset);n.collapse(!1);q.select(!1)}function k(n,g){var l=n.doc,d=l.createDocumentFragment();y("@"+g,l).each(function(){d.appendChild(this)});n.deleteContents();n.insertNode(d);n.collapse(!1);q.select(!1)}var q=this,f=q.range;if(""===a)return q;if(Xa&&b){try{c(f,a)}catch(n){k(f,a)}return q}k(f,a);return q},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(a,b,c,k,q,f){b=
                W(b,"");W(q,0);a='<img src="'+T(a)+'" data-ke-src="'+T(a)+'" ';c&&(a+='width="'+T(c)+'" ');k&&(a+='height="'+T(k)+'" ');b&&(a+='title="'+T(b)+'" ');f&&(a+='align="'+T(f)+'" ');a+='alt="'+T(b)+'" ';return this.inserthtml(a+"/>")},createlink:function(a,b){function c(l,d,e){y(l).attr("href",d).attr("data-ke-src",d);e?y(l).attr("target",e):y(l).removeAttr("target")}var k=this.doc,q=this.range;this.select();var f=this.commonNode({a:"*"});f&&!q.isControl()&&(q.selectNode(f.get()),this.select());f='<a href="'+
                T(a)+'" data-ke-src="'+T(a)+'" ';b&&(f+=' target="'+T(b)+'"');if(q.collapsed)return f+=">"+T(a)+"</a>",this.inserthtml(f);if(q.isControl()){var n=y(q.startContainer.childNodes[q.startOffset]);n.after(y(f+"></a>",k));n.next().append(n);q.selectNode(n[0]);return this.select()}f=q.startContainer;n=q.startOffset;var g=q.endContainer;q=q.endOffset;if(1==f.nodeType&&f===g&&n+1===q&&(q=f.childNodes[n],"a"==q.nodeName.toLowerCase()))return c(q,a,b),this;db(k,"createlink","__kindeditor_temp_url__");y('a[href="__kindeditor_temp_url__"]',
                k).each(function(){c(this,a,b)});return this},unlink:function(){var a=this.doc,b=this.range;this.select();if(b.collapsed){var c=this.commonNode({a:"*"});c&&(b.selectNode(c.get()),this.select());db(a,"unlink",null);kb&&"img"===y(b.startContainer).name&&(a=y(b.startContainer).parent(),"a"===a.name&&a.remove(!0))}else db(a,"unlink",null);return this}});H("formatblock selectall justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript".split(" "),
            function(a,b){sb.prototype[b]=function(c){this.select();db(this.doc,b,c);Xa&&0<=F(b,["justifyleft","justifycenter","justifyright","justifyfull"])&&this.selection();(!Xa||0<=F(b,["formatblock","selectall","insertorderedlist","insertunorderedlist"]))&&this.selection();return this}});H(["cut","copy","paste"],function(a,b){sb.prototype[b]=function(){if(!this.doc.queryCommandSupported(b))throw"not supported";this.select();db(this.doc,b,null);return this}});y.CmdClass=sb;y.cmd=mc;ka(fb,{init:function(a){var b=
                this;b.name=a.name||"";b.doc=a.doc||document;b.win=jb(b.doc);b.x=L(a.x);b.y=L(a.y);b.z=a.z;b.width=L(a.width);b.height=L(a.height);b.div=y('<div style="display:block;"></div>');b.options=a;b._alignEl=a.alignEl;b.width&&b.div.css("width",b.width);b.height&&b.div.css("height",b.height);b.z&&b.div.css({position:"absolute",left:b.x,top:b.y,"z-index":b.z});!b.z||b.x!==z&&b.y!==z||b.autoPos(b.width,b.height);a.cls&&b.div.addClass(a.cls);a.shadowMode&&b.div.addClass("ke-shadow");a.css&&b.div.css(a.css);
                a.src?y(a.src).replaceWith(b.div):y(b.doc.body).append(b.div);a.html&&b.div.html(a.html);if(a.autoScroll)if(Ca&&7>Oa||cb){var c=pb();y(b.win).bind("scroll",function(k){var q=pb();k=q.x-c.x;q=q.y-c.y;b.pos(M(b.x)+k,M(b.y)+q,!1)})}else b.div.css("position","fixed")},pos:function(a,b,c){c=W(c,!0);null!==a&&(a=0>a?0:L(a),this.div.css("left",a),c&&(this.x=a));null!==b&&(b=0>b?0:L(b),this.div.css("top",b),c&&(this.y=b));return this},autoPos:function(a,b){var c=M(a)||0;a=M(b)||0;b=pb();if(this._alignEl){var k=
                y(this._alignEl),q=k.pos();c=eb(k[0].clientWidth/2-c/2);a=eb(k[0].clientHeight/2-a/2);c=0>c?q.x:q.x+c;a=0>a?q.y:q.y+a}else q=Wa(this.doc),c=eb(b.x+(q.clientWidth-c)/2),a=eb(b.y+(q.clientHeight-a)/2);Ca&&7>Oa||cb||(c-=b.x,a-=b.y);return this.pos(c,a)},remove:function(){var a=this;(Ca&&7>Oa||cb)&&y(a.win).unbind("scroll");a.div.remove();H(a,function(b){a[b]=null});return this},show:function(){this.div.show();return this},hide:function(){this.div.hide();return this},draggable:function(a){var b=this;
                a=a||{};a.moveEl=b.div;a.moveFn=function(c,k,q,f,n,g){0>(c+=n)&&(c=0);0>(k+=g)&&(k=0);b.pos(c,k)};Sb(a);return b}});y.WidgetClass=fb;y.widget=Ub;var Gc,Vb="";if(Gc=document.getElementsByTagName("html"))Vb=Gc[0].dir;ka(ub,fb,{init:function(a){function b(){var d=Tb(c.iframe);d.open();g&&(d.domain=document.domain);d.write(Nc(k,q,f,n));d.close();c.win=c.iframe[0].contentWindow;c.doc=d;var e=mc(d);c.afterChange(function(h){e.selection()});kb&&y(d).click(function(h){"img"===y(h.target).name&&(e.selection(!0),
                e.range.selectNode(h.target),e.select())});Ca&&(c._mousedownHandler=function(){var h=e.range.cloneRange();h.shrink();h.isControl()&&c.blur()},y(document).mousedown(c._mousedownHandler),y(d).keydown(function(h){if(8==h.which){e.selection();var m=e.range;m.isControl()&&(m.collapse(!0),y(m.startContainer.childNodes[m.startOffset]).remove(),h.preventDefault())}}));c.cmd=e;c.html(tb(c.srcElement));Ca?(d.body.disabled=!0,d.body.contentEditable=!0,d.body.removeAttribute("disabled")):d.designMode="on";a.afterCreate&&
            a.afterCreate.call(c)}var c=this;ub.parent.init.call(c,a);c.srcElement=y(a.srcElement);c.div.addClass("ke-edit");c.designMode=W(a.designMode,!0);c.beforeGetHtml=a.beforeGetHtml;c.beforeSetHtml=a.beforeSetHtml;c.afterSetHtml=a.afterSetHtml;var k=W(a.themesPath,""),q=a.bodyClass,f=a.cssPath,n=a.cssData,g="res:"!=location.protocol&&location.host.replace(/:\d+/,"")!==document.domain,l="document.open();"+(g?'document.domain="'+document.domain+'";':"")+"document.close();";l=Ca?' src="javascript:void(function(){'+
                encodeURIComponent(l)+'}())"':"";c.iframe=y('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+l+"></iframe>").css("width","100%");c.textarea=y('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%");c.tabIndex=isNaN(parseInt(a.tabIndex,10))?c.srcElement.attr("tabindex"):parseInt(a.tabIndex,10);c.iframe.attr("tabindex",c.tabIndex);c.textarea.attr("tabindex",c.tabIndex);c.width&&c.setWidth(c.width);c.height&&c.setHeight(c.height);c.designMode?c.textarea.hide():
                c.iframe.hide();g&&c.iframe.bind("load",function(d){c.iframe.unbind("load");Ca?b():setTimeout(b,0)});c.div.append(c.iframe);c.div.append(c.textarea);c.srcElement.hide();!g&&b()},setWidth:function(a){this.width=a=L(a);this.div.css("width",a);return this},setHeight:function(a){this.height=a=L(a);this.div.css("height",a);this.iframe.css("height",a);if(Ca&&8>Oa||cb)a=L(M(a)-2);this.textarea.css("height",a);return this},remove:function(){var a=this.doc;y(a.body).unbind();y(a).unbind();y(this.win).unbind();
                this._mousedownHandler&&y(document).unbind("mousedown",this._mousedownHandler);tb(this.srcElement,this.html());this.srcElement.show();this.iframe.unbind();this.textarea.unbind();ub.parent.remove.call(this)},html:function(a,b){var c=this.doc;if(this.designMode){c=c.body;if(a===z)return a=b?"<!doctype html><html>"+c.parentNode.innerHTML+"</html>":c.innerHTML,this.beforeGetHtml&&(a=this.beforeGetHtml(a)),lb&&"<br />"==a&&(a=""),a;this.beforeSetHtml&&(a=this.beforeSetHtml(a));Ca&&9<=Oa&&(a=a.replace(/(<.*?checked=")checked(".*>)/ig,
                "$1$2"));y(c).html(a);this.afterSetHtml&&this.afterSetHtml();return this}if(a===z)return this.textarea.val();this.textarea.val(a);return this},design:function(a){if(a===z?!this.designMode:a){if(!this.designMode){a=this.html();this.designMode=!0;this.textarea.hide();this.html(a);var b=this.iframe,c=M(this.height);b.height(c-2);b.show();setTimeout(function(){b.height(c)},0)}}else this.designMode&&(a=this.html(),this.designMode=!1,this.html(a),this.iframe.hide(),this.textarea.show());return this.focus()},
            focus:function(){this.designMode?this.win.focus():this.textarea[0].focus();return this},blur:function(){if(Ca){var a=y('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',this.div);this.div.append(a);a[0].focus();a.remove()}else this.designMode?this.win.blur():this.textarea[0].blur();return this},afterChange:function(a){function b(q){setTimeout(function(){a(q)},1)}var c=this.doc,k=c.body;y(c).keyup(function(q){q.ctrlKey||q.altKey||!$b[q.which]||a(q)});
                y(c).mouseup(a).contextmenu(a);y(this.win).blur(a);y(k).bind("paste",b);y(k).bind("cut",b);return this}});y.EditClass=ub;y.edit=nc;y.iframeDoc=Tb;ka(Db,fb,{init:function(a){function b(q){q=y(q);if(q.hasClass("ke-outline"))return q;if(q.hasClass("ke-toolbar-icon"))return q.parent()}function c(q,f){if((q=b(q.target))&&!q.hasClass("ke-disabled")&&!q.hasClass("ke-selected"))q[f]("ke-on")}var k=this;Db.parent.init.call(k,a);k.disableMode=W(a.disableMode,!1);k.noDisableItemMap=da(W(a.noDisableItems,[]));
                k._itemMap={};k.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(q){q.preventDefault()}).attr("unselectable","on");k.div.mouseover(function(q){c(q,"addClass")}).mouseout(function(q){c(q,"removeClass")}).click(function(q){var f=b(q.target);f&&!f.hasClass("ke-disabled")&&k.options.click.call(this,q,f.attr("data-name"))})},get:function(a){return this._itemMap[a]?this._itemMap[a]:this._itemMap[a]=y("span.ke-icon-"+a,this.div).parent()},select:function(a){oc.call(this,a,function(b){b.addClass("ke-selected")});
                return self},unselect:function(a){oc.call(this,a,function(b){b.removeClass("ke-selected").removeClass("ke-on")});return self},enable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-disabled"),a.opacity(1);return this},disable:function(a){if(a=a.get?a:this.get(a))a.removeClass("ke-selected").addClass("ke-disabled"),a.opacity(.5);return this},disableAll:function(a,b){var c=this,k=c.noDisableItemMap;b&&(k=da(b));(a===z?!c.disableMode:a)?(y("span.ke-outline",c.div).each(function(){var q=y(this),
                f=q[0].getAttribute("data-name",2);k[f]||c.disable(q)}),c.disableMode=!0):(y("span.ke-outline",c.div).each(function(){var q=y(this),f=q[0].getAttribute("data-name",2);k[f]||c.enable(q)}),c.disableMode=!1);return c}});y.ToolbarClass=Db;y.toolbar=pc;ka(vb,fb,{init:function(a){a.z=a.z||811213;vb.parent.init.call(this,a);this.centerLineMode=W(a.centerLineMode,!0);this.div.addClass("ke-menu").bind("click,mousedown",function(b){b.stopPropagation()}).attr("unselectable","on")},addItem:function(a){if("-"===
                a.title)this.div.append(y('<div class="ke-menu-separator"></div>'));else{var b=y('<div class="ke-menu-item" unselectable="on"></div>'),c=y('<div class="ke-inline-block ke-menu-item-left"></div>'),k=y('<div class="ke-inline-block ke-menu-item-right"></div>'),q=L(a.height),f=W(a.iconClass,"");this.div.append(b);q&&(b.css("height",q),k.css("line-height",q));if(this.centerLineMode){var n=y('<div class="ke-inline-block ke-menu-item-center"></div>');q&&n.css("height",q)}b.mouseover(function(g){y(this).addClass("ke-menu-item-on");
                n&&n.addClass("ke-menu-item-center-on")}).mouseout(function(g){y(this).removeClass("ke-menu-item-on");n&&n.removeClass("ke-menu-item-center-on")}).click(function(g){a.click.call(y(this));g.stopPropagation()}).append(c);n&&b.append(n);b.append(k);a.checked&&(f="ke-icon-checked");""!==f&&c.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+f+'"></span>');k.html(a.title);return this}},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);y(".ke-menu-item",
                this.div[0]).unbind();vb.parent.remove.call(this);return this}});y.MenuClass=vb;y.menu=Wb;ka(wb,fb,{init:function(a){a.z=a.z||811213;wb.parent.init.call(this,a);var b=a.colors||["#E53333 #E56600 #FF9900 #64451D #DFC5A4 #FFE500".split(" "),"#009900 #006600 #99BB00 #B8D100 #60D978 #00D5FF".split(" "),"#337FE5 #003399 #4C33E5 #9933E5 #CC33E5 #EE33EE".split(" "),"#FFFFFF #CCCCCC #999999 #666666 #333333 #000000".split(" ")];this.selectedColor=(a.selectedColor||"").toLowerCase();this._cells=[];this.div.addClass("ke-colorpicker").bind("click,mousedown",
                function(n){n.stopPropagation()}).attr("unselectable","on");a=this.doc.createElement("table");this.div.append(a);a.className="ke-colorpicker-table";a.cellPadding=0;a.cellSpacing=0;a.border=0;var c=a.insertRow(0),k=c.insertCell(0);k.colSpan=b[0].length;this._addAttr(k,"","ke-colorpicker-cell-top");for(var q=0;q<b.length;q++){c=a.insertRow(q+1);for(var f=0;f<b[q].length;f++)k=c.insertCell(f),this._addAttr(k,b[q][f],"ke-colorpicker-cell")}},_addAttr:function(a,b,c){var k=this;a=y(a).addClass(c);k.selectedColor===
            b.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected");a.attr("title",b||k.options.noColor);a.mouseover(function(q){y(this).addClass("ke-colorpicker-cell-on")});a.mouseout(function(q){y(this).removeClass("ke-colorpicker-cell-on")});a.click(function(q){q.stop();k.options.click.call(y(this),b)});b?a.append(y('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",b)):a.html(k.options.noColor);y(a).attr("unselectable","on");k._cells.push(a)},remove:function(){H(this._cells,
                function(){this.unbind()});wb.parent.remove.call(this);return this}});y.ColorPickerClass=wb;y.colorpicker=qc;!function(a,b){var c=function(){var k={};return b.apply(k,arguments),k.moxie};"function"==typeof define&&define.amd?define("moxie",[],c):"object"==typeof module&&module.exports?module.exports=c():a.moxie=c()}(this||w,function(){!function(a,b){function c(f,n){for(var g,l=[],d=0;d<f.length;++d){var e;if(!(e=q[f[d]]))a:{e=a;for(var h=f[d].split(/[.\/]/),m=0;m<h.length;++m){if(!e[h[m]]){e=void 0;
            break a}e=e[h[m]]}}if(g=e,!g)throw"module definition dependecy not found: "+f[d];l.push(g)}n.apply(null,l)}function k(f,n,g){if("string"!=typeof f)throw"invalid module definition, module id must be defined and be a string";if(n===b)throw"invalid module definition, dependencies must be specified";if(g===b)throw"invalid module definition, definition function must be specified";c(n,function(){q[f]=g.apply(null,arguments)})}var q={};k("moxie/core/utils/Basic",[],function(){function f(e){return void 0===
        e?"undefined":null===e?"null":e.nodeType?"node":{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function n(){return g(!1,!1,arguments)}function g(e,h,m){var p=m[0];return l(m,function(r,v){0<v&&l(r,function(u,t){var x=-1!==d(f(u),["array","object"]);if(void 0===u||e&&void 0===p[t])t=!0;else{if(x&&h)a:switch(f(u)){case "array":u=Array.prototype.slice.call(u);break a;case "object":u=n({},u)}t=(f(p[t])===f(u)&&x?g(e,h,[p[t],u]):p[t]=u,void 0)}return t})}),p}function l(e,h){var m;if(e){try{var p=
            e.length}catch(r){p=void 0}if(void 0===p||"number"!=typeof p)for(m in e){if(e.hasOwnProperty(m)&&!1===h(e[m],m))break}else for(m=0;p>m&&!1!==h(e[m],m);m++);}}function d(e,h){if(h){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(h,e);for(var m=0,p=h.length;p>m;m++)if(h[m]===e)return m}return-1}return{guid:function(){var e=0;return function(h){var m,p=(new Date).getTime().toString(32);for(m=0;5>m;m++)p+=Math.floor(65535*Math.random()).toString(32);return(h||"o_")+p+(e++).toString(32)}}(),
            typeOf:f,extend:n,extendIf:function(){return g(!0,!1,arguments)},extendImmutable:function(){return g(!1,!0,arguments)},extendImmutableIf:function(){return g(!0,!0,arguments)},clone:function(e){switch(f(e)){case "array":return g(!1,!0,[[],e]);case "object":return g(!1,!0,[{},e]);default:return e}},inherit:function(e,h){function m(){this.constructor=e}for(var p in h)({}).hasOwnProperty.call(h,p)&&(e[p]=h[p]);return m.prototype=h.prototype,e.prototype=new m,e.parent=h.prototype,e},each:l,isEmptyObj:function(e){var h;
                if(!e||"object"!==f(e))return!0;for(h in e)return!1;return!0},inSeries:function(e,h){function m(r){"function"===f(e[r])&&e[r](function(v){++r<p&&!v?m(r):h(v)})}var p=e.length;"function"!==f(h)&&(h=function(){});e&&e.length||h();m(0)},inParallel:function(e,h){var m=0,p=e.length,r=Array(p);l(e,function(v,u){v(function(t){if(t)return h(t);var x=[].slice.call(arguments);x.shift();r[u]=x;m++;m===p&&(r.unshift(null),h.apply(this,r))})})},inArray:d,arrayDiff:function(e,h){var m=[];"array"!==f(e)&&(e=[e]);
                "array"!==f(h)&&(h=[h]);for(var p in e)-1===d(e[p],h)&&m.push(e[p]);return m.length?m:!1},arrayIntersect:function(e,h){var m=[];return l(e,function(p){-1!==d(p,h)&&m.push(p)}),m.length?m:null},toArray:function(e){var h,m=[];for(h=0;h<e.length;h++)m[h]=e[h];return m},trim:function(e){return e?String.prototype.trim?String.prototype.trim.call(e):e.toString().replace(/^\s*/,"").replace(/\s*$/,""):e},sprintf:function(e){var h=[].slice.call(arguments,1);return e.replace(/%([a-z])/g,function(m,p){m=h.shift();
                switch(p){case "s":return m+"";case "d":return parseInt(m,10);case "f":return parseFloat(m);case "c":return"";default:return m}})},parseSizeStr:function(e){if("string"!=typeof e)return e;var h,m={t:1099511627776,g:1073741824,m:1048576,k:1024};return e=/^([0-9\.]+)([tmgk]?)$/.exec(e.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),h=e[2],e=+e[1],m.hasOwnProperty(h)&&(e*=m[h]),Math.floor(e)},delay:function(e,h){var m=this;setTimeout(function(){e.call(m)},h||1)}}});k("moxie/core/utils/Encode",[],function(){var f=
            function(g){return unescape(encodeURIComponent(g))},n=function(g){return decodeURIComponent(escape(g))};return{utf8_encode:f,utf8_decode:n,atob:function(g,l){if("function"==typeof w.atob)return l?n(w.atob(g)):w.atob(g);var d=0,e=0,h="",m=[];if(!g)return g;g+="";do{var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g.charAt(d++));var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g.charAt(d++));var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g.charAt(d++));
                var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g.charAt(d++));var t=p<<18|r<<12|v<<6|u;p=255&t>>16;r=255&t>>8;t&=255;m[e++]=64==v?String.fromCharCode(p):64==u?String.fromCharCode(p,r):String.fromCharCode(p,r,t)}while(d<g.length);return h=m.join(""),l?n(h):h},btoa:function(g,l){if(l&&(g=f(g)),"function"==typeof w.btoa)return w.btoa(g);var d=l=0,e=[];if(!g)return g;do{var h=g.charCodeAt(l++);var m=g.charCodeAt(l++);var p=g.charCodeAt(l++);var r=h<<16|m<<8|p;h=63&r>>
                18;m=63&r>>12;p=63&r>>6;r&=63;e[d++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)}while(l<g.length);l=e.join("");g=g.length%3;return(g?l.slice(0,g-3):l)+"===".slice(g||3)}}});k("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(f){var n=
            function(e){var h={has:function(x,E){return-1!==E.toLowerCase().indexOf(x.toLowerCase())},lowerize:function(x){return x.toLowerCase()}},m=function(){for(var x,E,B,A,D,G,C=0,O=arguments;C<O.length;C+=2){G=O[C];var U=O[C+1];if("undefined"===typeof x)for(A in x={},U)E=U[A],"object"===typeof E?x[E[0]]=e:x[E]=e;for(E=B=0;E<G.length;E++)if(D=G[E].exec(this.getUA())){for(A=0;A<U.length;A++)G=D[++B],E=U[A],"object"===typeof E&&0<E.length?2==E.length?x[E[0]]="function"==typeof E[1]?E[1].call(this,G):E[1]:
                3==E.length?x[E[0]]="function"!==typeof E[1]||E[1].exec&&E[1].test?G?G.replace(E[1],E[2]):e:G?E[1].call(this,G,E[2]):e:4==E.length&&(x[E[0]]=G?E[3].call(this,G.replace(E[1],E[2])):e):x[E]=G?G:e;break}if(D)break}return x},p=function(x,E){for(var B in E)if("object"===typeof E[B]&&0<E[B].length)for(var A=0;A<E[B].length;A++){if(h.has(E[B][A],x))return"?"===B?e:B}else if(h.has(E[B],x))return"?"===B?e:B;return x},r={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",
                7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",RT:"ARM"},v=[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],
                ["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],
                    "version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",p,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412",
                    "2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,
                    /(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],u=[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]+).*(gecko)/i],["version","name"]],t=[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
                ["name",["version",p,r]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",p,r]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palmos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name",
                    "Firefox OS"],"version"],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
                ["name","version"],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]];return function(x){var E=x||(w&&w.navigator&&w.navigator.userAgent?w.navigator.userAgent:
                "");this.getBrowser=function(){return m.apply(this,v)};this.getEngine=function(){return m.apply(this,u)};this.getOS=function(){return m.apply(this,t)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}};this.getUA=function(){return E};this.setUA=function(B){return E=B,this};this.setUA(E)}}(),g=function(){var e={access_global_ns:function(){return!!w.moxie},define_property:!1,create_canvas:function(){var h=document.createElement("canvas");
                h=!(!h.getContext||!h.getContext("2d"));return e.create_canvas=h,h},return_response_type:function(h){try{if(-1!==f.inArray(h,["","text","document"]))return!0;if(w.XMLHttpRequest){var m=new XMLHttpRequest;if(m.open("get","/"),"responseType"in m)return m.responseType=h,m.responseType!==h?!1:!0}}catch(p){}return!1},use_blob_uri:function(){var h=w.URL;return e.use_blob_uri=h&&"createObjectURL"in h&&"revokeObjectURL"in h&&("IE"!==d.browser||d.verComp(d.version,"11.0.46",">=")),e.use_blob_uri},use_data_uri:function(){var h=
                new Image;return h.onload=function(){e.use_data_uri=1===h.width&&1===h.height},setTimeout(function(){h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==d.browser||9<=d.version)},use_data_uri_of:function(h){return e.use_data_uri&&33E3>h||e.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;
                var h=document.createElement("input");return h.setAttribute("type","file"),e.use_fileinput=!h.disabled},use_webgl:function(){var h,m=document.createElement("canvas"),p=null;try{p=m.getContext("webgl")||m.getContext("experimental-webgl")}catch(r){}return p||(p=null),h=!!p,e.use_webgl=h,h}};return function(h){var m=[].slice.call(arguments);return m.shift(),"function"===f.typeOf(e[h])?e[h].apply(this,m):!!e[h]}}(),l=(new n).getResult(),d={can:g,uaParser:n,browser:l.browser.name,version:l.browser.version,
            os:l.os.name,osVersion:l.os.version,verComp:function(e,h,m){var p=0,r=0,v=0,u={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1};p=function(x){return x=(""+x).replace(/[_\-+]/g,"."),x=x.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),x.length?x.split("."):[-8]};var t=function(x){return x?isNaN(x)?u[x]||-7:parseInt(x,10):0};e=p(e);h=p(h);r=Math.max(e.length,h.length);for(p=0;r>p;p++)if(e[p]!=h[p]){if(e[p]=t(e[p]),h[p]=t(h[p]),e[p]<h[p]){v=-1;break}if(e[p]>h[p]){v=1;break}}if(!m)return v;
                switch(m){case ">":case "gt":return 0<v;case ">=":case "ge":return 0<=v;case "<=":case "le":return 0>=v;case "==":case "=":case "eq":return 0===v;case "<>":case "!=":case "ne":return 0!==v;case "":case "<":case "lt":return 0>v;default:return null}},swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return d.OS=d.os,d});k("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(f){function n(g,l){for(var d in g)if(g[d]===
            l)return d;return null}return{RuntimeError:function(){function g(d,e){this.code=d;this.name=n(l,d);this.message=this.name+(e||": RuntimeError "+this.code)}var l={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return f.extend(g,l),g.prototype=Error.prototype,g}(),OperationNotAllowedException:function(){function g(l){this.code=l;this.name="OperationNotAllowedException"}return f.extend(g,{NOT_ALLOWED_ERR:1}),g.prototype=Error.prototype,g}(),ImageError:function(){function g(d){this.code=
                d;this.name=n(l,d);this.message=this.name+": ImageError "+this.code}var l={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return f.extend(g,l),g.prototype=Error.prototype,g}(),FileException:function(){function g(d){this.code=d;this.name=n(l,d);this.message=this.name+": FileException "+this.code}var l={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return f.extend(g,l),g.prototype=Error.prototype,
                g}(),DOMException:function(){function g(d){this.code=d;this.name=n(l,d);this.message=this.name+": DOMException "+this.code}var l={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,
                NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return f.extend(g,l),g.prototype=Error.prototype,g}(),EventException:function(){function g(l){this.code=l;this.name="EventException"}return f.extend(g,{UNSPECIFIED_EVENT_TYPE_ERR:0}),g.prototype=Error.prototype,g}()}});k("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(f){var n=function(g,l){return g.className?(new RegExp("(^|\\s+)"+l+"(\\s+|$)")).test(g.className):
            !1};return{get:function(g){return"string"!=typeof g?g:document.getElementById(g)},hasClass:n,addClass:function(g,l){n(g,l)||(g.className=g.className?g.className.replace(/\s+$/,"")+" "+l:l)},removeClass:function(g,l){g.className&&(g.className=g.className.replace(new RegExp("(^|\\s+)"+l+"(\\s+|$)"),function(d,e,h){return" "===e&&" "===h?" ":""}))},getStyle:function(g,l){return g.currentStyle?g.currentStyle[l]:w.getComputedStyle?w.getComputedStyle(g,null)[l]:void 0},getPos:function(g,l){function d(v){var u,
                t,x=0,E=0;return v&&(t=v.getBoundingClientRect(),u="CSS1Compat"===r.compatMode?r.documentElement:r.body,x=t.left+u.scrollLeft,E=t.top+u.scrollTop),{x:x,y:E}}var e,h,m=0,p=0,r=document;if(l=l||r.body,g&&g.getBoundingClientRect&&"IE"===f.browser&&(!r.documentMode||8>r.documentMode))return e=d(g),h=d(l),{x:e.x-h.x,y:e.y-h.y};for(e=g;e&&e!=l&&e.nodeType;)m+=e.offsetLeft||0,p+=e.offsetTop||0,e=e.offsetParent;for(e=g.parentNode;e&&e!=l&&e.nodeType;)m-=e.scrollLeft||0,p-=e.scrollTop||0,e=e.parentNode;return{x:m,
                y:p}},getSize:function(g){return{w:g.offsetWidth||g.clientWidth,h:g.offsetHeight||g.clientHeight}}}});k("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(f,n,g){function l(){this.uid=g.guid()}var d={};return g.extend(l.prototype,{init:function(){this.uid||(this.uid=g.guid("uid_"))},addEventListener:function(e,h,m,p){var r,v=this;return this.hasOwnProperty("uid")||(this.uid=g.guid("uid_")),e=g.trim(e),/\s/.test(e)?(g.each(e.split(/\s+/),function(u){v.addEventListener(u,
                h,m,p)}),void 0):(e=e.toLowerCase(),m=parseInt(m,10)||0,r=d[this.uid]&&d[this.uid][e]||[],r.push({fn:h,priority:m,scope:p||this}),d[this.uid]||(d[this.uid]={}),d[this.uid][e]=r,void 0)},hasEventListener:function(e){var h;return e?(e=e.toLowerCase(),h=d[this.uid]&&d[this.uid][e]):h=d[this.uid],h?h:!1},removeEventListener:function(e,h){var m,p,r=this;if(e=e.toLowerCase(),/\s/.test(e))return g.each(e.split(/\s+/),function(v){r.removeEventListener(v,h)}),void 0;if(m=d[this.uid]&&d[this.uid][e]){if(h)for(p=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             m.length-1;0<=p;p--){if(m[p].fn===h){m.splice(p,1);break}}else m=[];m.length||(delete d[this.uid][e],g.isEmptyObj(d[this.uid])&&delete d[this.uid])}},removeAllEventListeners:function(){d[this.uid]&&delete d[this.uid]},dispatchEvent:function(e){var h,m,p={},r=!0;if("string"!==g.typeOf(e)){if(m=e,"string"!==g.typeOf(m.type))throw new n.EventException(n.EventException.UNSPECIFIED_EVENT_TYPE_ERR);e=m.type;void 0!==m.total&&void 0!==m.loaded&&(p.total=m.total,p.loaded=m.loaded);p.async=m.async||!1}if(-1!==
            e.indexOf("::")?function(t){h=t[0];e=t[1]}(e.split("::")):h=this.uid,e=e.toLowerCase(),m=d[h]&&d[h][e]){m.sort(function(t,x){return x.priority-t.priority});var v=[].slice.call(arguments);v.shift();p.type=e;v.unshift(p);var u=[];g.each(m,function(t){v[0].target=t.scope;p.async?u.push(function(x){setTimeout(function(){x(!1===t.fn.apply(t.scope,v))},1)}):u.push(function(x){x(!1===t.fn.apply(t.scope,v))})});u.length&&g.inSeries(u,function(t){r=!t})}return r},bindOnce:function(e,h,m,p){var r=this;r.bind.call(this,
                e,function u(){return r.unbind(e,u),h.apply(this,arguments)},m,p)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(e){var h=this;this.bind(e.join(" "),function(m){var p="on"+m.type.toLowerCase();"function"===g.typeOf(this[p])&&this[p].apply(this,arguments)});
                g.each(e,function(m){m="on"+m.toLowerCase(m);"undefined"===g.typeOf(h[m])&&(h[m]=null)})}}),l.instance=new l,l});k("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(f,n,g,l){function d(m,p,r,v,u){var t=this,x=n.guid(p+"_");u=u||"browser";m=m||{};h[x]=this;r=n.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,
            return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},r);m.preferred_caps&&(u=d.getMode(v,m.preferred_caps,u));var E=function(){var B={};return{exec:function(A,D,G,C){return E[D]&&(B[A]||(B[A]={context:this,instance:new E[D]}),B[A].instance[G])?B[A].instance[G].apply(this,C):void 0},
            removeInstance:function(A){delete B[A]},removeAllInstances:function(){var A=this;n.each(B,function(D,G){"function"===n.typeOf(D.instance.destroy)&&D.instance.destroy.call(D.context);A.removeInstance(G)})}}}();n.extend(this,{initialized:!1,uid:x,type:p,mode:d.getMode(v,m.required_caps,u),shimid:x+"_container",clients:0,options:m,can:function(B,A,D){D=D||r;if("string"===n.typeOf(B)&&"undefined"===n.typeOf(A)&&(B=d.parseCaps(B)),"object"===n.typeOf(B)){for(var G in B)if(!this.can(G,B[G],D))return!1;
                return!0}return"function"===n.typeOf(D[B])?D[B].call(this,A):A===D[B]},getShimContainer:function(){var B,A=g.get(this.shimid);return A||(B=g.get(this.options.container)||document.body,A=document.createElement("div"),A.id=this.shimid,A.className="moxie-shim moxie-shim-"+this.type,n.extend(A.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),B.appendChild(A)),A},getShim:function(){return E},shimExec:function(B,A){var D=[].slice.call(arguments,2);return t.getShim().exec.call(this,
                this.uid,B,A,D)},exec:function(B,A){var D=[].slice.call(arguments,2);return t[B]&&t[B][A]?t[B][A].apply(this,D):t.shimExec.apply(this,arguments)},destroy:function(){if(t){var B=g.get(this.shimid);B&&B.parentNode.removeChild(B);E&&E.removeAllInstances();this.unbindAll();delete h[this.uid];x=t=E=this.uid=null}}});this.mode&&m.required_caps&&!this.can(m.required_caps)&&(this.mode=!1)}var e={},h={};return d.order="html5,flash,silverlight,html4",d.getRuntime=function(m){return h[m]?h[m]:!1},d.addConstructor=
            function(m,p){p.prototype=l.instance;e[m]=p},d.getConstructor=function(m){return e[m]||null},d.getInfo=function(m){var p=d.getRuntime(m);return p?{uid:p.uid,type:p.type,mode:p.mode,can:function(){return p.can.apply(p,arguments)}}:null},d.parseCaps=function(m){var p={};return"string"!==n.typeOf(m)?m||{}:(n.each(m.split(","),function(r){p[r]=!0}),p)},d.can=function(m,p){var r,v;return(m=d.getConstructor(m))?(r=new m({required_caps:p}),v=r.mode,r.destroy(),!!v):!1},d.thatCan=function(m,p){p=(p||d.order).split(/\s*,\s*/);
            for(var r in p)if(d.can(p[r],m))return p[r];return null},d.getMode=function(m,p,r){var v=null;if("undefined"===n.typeOf(r)&&(r="browser"),p&&!n.isEmptyObj(m)){if(n.each(p,function(u,t){if(m.hasOwnProperty(t))if(u=m[t](u),"string"==typeof u&&(u=[u]),v){if(!(v=n.arrayIntersect(v,u)))return v=!1}else v=u}),v)return-1!==n.inArray(r,v)?r:v[0];if(!1===v)return!1}return r},d.getGlobalEventTarget=function(){if(/^moxie\./.test(f.global_event_dispatcher)&&!f.can("access_global_ns")){var m=n.guid("moxie_event_target_");
            w[m]=function(p,r){l.instance.dispatchEvent(p,r)};f.global_event_dispatcher=m}return f.global_event_dispatcher},d.capTrue=function(){return!0},d.capFalse=function(){return!1},d.capTest=function(m){return function(){return!!m}},d});k("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(f,n,g,l){return function(){var d;g.extend(this,{connectRuntime:function(e){function h(r){var v,u;return r.length?(v=r.shift().toLowerCase(),
                (u=l.getConstructor(v))?(d=new u(e),d.bind("Init",function(){d.initialized=!0;setTimeout(function(){d.clients++;p.ruid=d.uid;p.trigger("RuntimeInit",d)},1)}),d.bind("Error",function(){d.destroy();h(r)}),d.bind("Exception",function(t,x){p.trigger("RuntimeError",new n.RuntimeError(n.RuntimeError.EXCEPTION_ERR,x.name+"(#"+x.code+")"+(x.message?", from: "+x.message:"")))}),d.mode?(d.init(),void 0):(d.trigger("Error"),void 0)):(h(r),void 0)):(p.trigger("RuntimeError",new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR)),
                d=null,void 0)}var m,p=this;if("string"===g.typeOf(e)?m=e:"string"===g.typeOf(e.ruid)&&(m=e.ruid),m){if(d=l.getRuntime(m))return p.ruid=m,d.clients++,d;throw new n.RuntimeError(n.RuntimeError.NOT_INIT_ERR);}h((e.runtime_order||l.order).split(/\s*,\s*/))},disconnectRuntime:function(){d&&0>=--d.clients&&d.destroy();d=null},getRuntime:function(){return d&&d.uid?d:d=null},exec:function(){return d?d.exec.apply(this,arguments):null},can:function(e){return d?d.can(e):!1}})}});k("moxie/file/Blob",["moxie/core/utils/Basic",
            "moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(f,n,g){function l(e,h){function m(p,r,v){var u,t=d[this.uid];return"string"===f.typeOf(t)&&t.length?(u=new l(null,{type:v,size:r-p}),u.detach(t.substr(p,u.size)),u):null}g.call(this);e&&this.connectRuntime(e);h?"string"===f.typeOf(h)&&(h={data:h}):h={};f.extend(this,{uid:h.uid||f.guid("uid_"),ruid:e,size:h.size||0,type:h.type||"",slice:function(p,r,v){return this.isDetached()?m.apply(this,arguments):this.getRuntime().exec.call(this,
                "Blob","slice",this.getSource(),p,r,v)},getSource:function(){return d[this.uid]?d[this.uid]:null},detach:function(p){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),p=p||"","data:"==p.substr(0,5)){var r=p.indexOf(";base64,");this.type=p.substring(5,r);p=n.atob(p.substring(r+8))}this.size=p.length;d[this.uid]=p},isDetached:function(){return!this.ruid&&"string"===f.typeOf(d[this.uid])},destroy:function(){this.detach();delete d[this.uid]}});
            h.data?this.detach(h.data):d[this.uid]=h}var d={};return l});k("moxie/core/I18n",["moxie/core/utils/Basic"],function(f){var n={};return{addI18n:function(g){return f.extend(n,g)},translate:function(g){return n[g]||g},_:function(g){return this.translate(g)},sprintf:function(g){var l=[].slice.call(arguments,1);return g.replace(/%[a-z]/g,function(){var d=l.shift();return"undefined"!==f.typeOf(d)?d:""})}}});k("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(f,n){var g={},l=
            {},d=function(m){var p,r=m.split(/,/);for(m=0;m<r.length;m+=2){var v=r[m+1].split(/ /);for(p=0;p<v.length;p++)g[v[p]]=r[m];l[r[m]]=v}},e=function(m){var p=[];return f.each(m,function(r){if(r=r.toLowerCase(),"*"===r)return p=[],!1;var v=r.match(/^(\w+)\/(\*|\w+)$/);v&&("*"===v[2]?f.each(l,function(u,t){(new RegExp("^"+v[1]+"/")).test(t)&&[].push.apply(p,l[t])}):l[r]&&[].push.apply(p,l[r]))}),p},h=function(m){return(m=m&&m.match(/\.([^.]+)$/))?m[1].toLowerCase():""};return d("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb xlt xla,application/vnd.ms-powerpoint,ppt pps pot ppa,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe"),
            {mimes:g,extensions:l,addMimeType:d,extList2mimes:function(m,p){var r,v,u,t=[];for(r=0;r<m.length;r++){var x=m[r].extensions.toLowerCase().split(/\s*,\s*/);for(v=0;v<x.length;v++){if("*"===x[v])return[];if(u=t[x[v]],p&&/^\w+$/.test(x[v]))t.push("."+x[v]);else if(u&&-1===f.inArray(u,t))t.push(u);else if(!u)return[]}}return t},mimes2exts:e,mimes2extList:function(m){var p=[],r=[];return"string"===f.typeOf(m)&&(m=f.trim(m).split(/\s*,\s*/)),r=e(m),p.push({title:n.translate("Files"),extensions:r.length?
                        r.join(","):"*"}),p},getFileExtension:h,getFileMime:function(m){return g[h(m)]||""}}});k("moxie/file/FileInput","moxie/core/utils/Basic moxie/core/utils/Env moxie/core/utils/Mime moxie/core/utils/Dom moxie/core/Exceptions moxie/core/EventTarget moxie/core/I18n moxie/runtime/Runtime moxie/runtime/RuntimeClient".split(" "),function(f,n,g,l,d,e,h,m,p){function r(u){var t;if(-1!==f.inArray(f.typeOf(u),["string","node"])&&(u={browse_button:u}),t=l.get(u.browse_button),!t)throw new d.DOMException(d.DOMException.NOT_FOUND_ERR);
            t={accept:[{title:h.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:t.parentNode||document.body};u=f.extend({},t,u);"string"==typeof u.required_caps&&(u.required_caps=m.parseCaps(u.required_caps));"string"==typeof u.accept&&(u.accept=g.mimes2extList(u.accept));(t=l.get(u.container))||(t=document.body);"static"===l.getStyle(t,"position")&&(t.style.position="relative");t=t=null;p.call(this);f.extend(this,{uid:f.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var x=
                    this;x.bind("RuntimeInit",function(E,B){x.ruid=B.uid;x.shimid=B.shimid;x.bind("Ready",function(){x.trigger("Refresh")},999);x.bind("Refresh",function(){var A,D,G;var C=l.get(u.browse_button);var O=l.get(B.shimid);C&&(A=l.getPos(C,l.get(u.container)),D=l.getSize(C),G=parseInt(l.getStyle(C,"z-index"),10)||0,O&&f.extend(O.style,{top:A.y+"px",left:A.x+"px",width:D.w+"px",height:D.h+"px",zIndex:G+1}))});B.exec.call(x,"FileInput","init",u)});x.connectRuntime(f.extend({},u,{required_caps:{select_file:!0}}))},
                getOption:function(x){return u[x]},setOption:function(x,E){if(u.hasOwnProperty(x)){var B=u[x];switch(x){case "accept":"string"==typeof E&&(E=g.mimes2extList(E));break;case "container":case "required_caps":throw new d.FileException(d.FileException.NO_MODIFICATION_ALLOWED_ERR);}u[x]=E;this.exec("FileInput","setOption",x,E);this.trigger("OptionChanged",x,E,B)}},disable:function(x){this.getRuntime()&&this.exec("FileInput","disable","undefined"===f.typeOf(x)?!0:x)},refresh:function(){this.trigger("Refresh")},
                destroy:function(){var x=this.getRuntime();x&&(x.exec.call(this,"FileInput","destroy"),this.disconnectRuntime());"array"===f.typeOf(this.files)&&f.each(this.files,function(E){E.destroy()});this.files=null;this.unbindAll()}});this.handleEventProps(v)}var v="ready change cancel mouseenter mouseleave mousedown mouseup".split(" ");return r.prototype=e.instance,r});k("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(f,n,g){function l(d,e){e||(e={});g.apply(this,
            arguments);this.type||(this.type=n.getFileMime(e.name));if(e.name){var h=e.name.replace(/\\/g,"/");h=h.substr(h.lastIndexOf("/")+1)}else this.type&&(h=this.type.split("/")[0],h=f.guid((""!==h?h:"file")+"_"),n.extensions[this.type]&&(h+="."+n.extensions[this.type][0]));f.extend(this,{name:h||f.guid("file_"),relativePath:"",lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString()})}return l.prototype=g.prototype,l});k("moxie/file/FileDrop","moxie/core/I18n moxie/core/utils/Dom moxie/core/Exceptions moxie/core/utils/Basic moxie/core/utils/Env moxie/file/File moxie/runtime/RuntimeClient moxie/core/EventTarget moxie/core/utils/Mime".split(" "),
            function(f,n,g,l,d,e,h,m,p){function r(u){var t=this;"string"==typeof u&&(u={drop_zone:u});var x={accept:[{title:f.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}};u="object"==typeof u?l.extend({},x,u):x;u.container=n.get(u.drop_zone)||document.body;"static"===n.getStyle(u.container,"position")&&(u.container.style.position="relative");"string"==typeof u.accept&&(u.accept=p.mimes2extList(u.accept));h.call(t);l.extend(t,{uid:l.guid("uid_"),ruid:null,files:null,init:function(){t.bind("RuntimeInit",
                    function(E,B){t.ruid=B.uid;B.exec.call(t,"FileDrop","init",u);t.dispatchEvent("ready")});t.connectRuntime(u)},destroy:function(){var E=this.getRuntime();E&&(E.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime());this.files=null;this.unbindAll()}});this.handleEventProps(v)}var v=["ready","dragenter","dragleave","drop","error"];return r.prototype=m.instance,r});k("moxie/file/FileReader","moxie/core/utils/Basic moxie/core/utils/Encode moxie/core/Exceptions moxie/core/EventTarget moxie/file/Blob moxie/runtime/RuntimeClient".split(" "),
            function(f,n,g,l,d,e){function h(){function p(r,v){if(this.trigger("loadstart"),this.readyState===h.LOADING)return this.trigger("error",new g.DOMException(g.DOMException.INVALID_STATE_ERR)),this.trigger("loadend"),void 0;if(!(v instanceof d))return this.trigger("error",new g.DOMException(g.DOMException.NOT_FOUND_ERR)),this.trigger("loadend"),void 0;if(this.result=null,this.readyState=h.LOADING,v.isDetached()){var u=v.getSource();switch(r){case "readAsText":case "readAsBinaryString":this.result=u;
                break;case "readAsDataURL":this.result="data:"+v.type+";base64,"+n.btoa(u)}this.readyState=h.DONE;this.trigger("load");this.trigger("loadend")}else this.connectRuntime(v.ruid),this.exec("FileReader","read",r,v)}e.call(this);f.extend(this,{uid:f.guid("uid_"),readyState:h.EMPTY,result:null,error:null,readAsBinaryString:function(r){p.call(this,"readAsBinaryString",r)},readAsDataURL:function(r){p.call(this,"readAsDataURL",r)},readAsText:function(r){p.call(this,"readAsText",r)},abort:function(){this.result=
                    null;-1===f.inArray(this.readyState,[h.EMPTY,h.DONE])&&(this.readyState===h.LOADING&&(this.readyState=h.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort();this.exec("FileReader","destroy");this.disconnectRuntime();this.unbindAll()}});this.handleEventProps(m);this.bind("Error",function(r,v){this.readyState=h.DONE;this.error=v},999);this.bind("Load",function(){this.readyState=h.DONE},999)}var m="loadstart progress load abort error loadend".split(" ");
                return h.EMPTY=0,h.LOADING=1,h.DONE=2,h.prototype=l.instance,h});k("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(f){var n=function(g,l){var d,e="source scheme authority userInfo user pass host port relative path directory file query fragment".split(" "),h=e.length,m={http:80,https:443},p={},r=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(g||"");g=/^\/\/\w/.test(g);
            switch(f.typeOf(l)){case "undefined":l=n(document.location.href,!1);break;case "string":l=n(l,!1)}for(;h--;)r[h]&&(p[e[h]]=r[h]);if(d=!g&&!p.scheme,(g||d)&&(p.scheme=l.scheme),d)p.host=l.host,p.port=l.port,d="",/^[^\/]/.test(p.path)&&(d=l.path,d=/\/[^\/]*\.[^\/]*$/.test(d)?d.replace(/\/[^\/]+$/,"/"):d.replace(/\/?$/,"/")),p.path=d+(p.path||"");return p.port||(p.port=m[p.scheme]||80),p.port=parseInt(p.port,10),p.path||(p.path="/"),delete p.source,p};return{parseUrl:n,resolveUrl:function(g){g="object"==
            typeof g?g:n(g);return g.scheme+"://"+g.host+(g.port!=={http:80,https:443}[g.scheme]?":"+g.port:"")+g.path+(g.query?g.query:"")},hasSameOrigin:function(g){function l(d){return[d.scheme,d.host,d.port].join("/")}return"string"==typeof g&&(g=n(g)),l(n())===l(g)}}});k("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(f,n,g){function l(){this.uid=f.guid("uid_");n.call(this);this.destroy=function(){this.disconnectRuntime();this.unbindAll()}}
            return l.prototype=g.instance,l});k("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(f,n,g){return function(){function l(d,e){if(!e.isDetached()){var h=this.connectRuntime(e.ruid).exec.call(this,"FileReaderSync","read",d,e);return this.disconnectRuntime(),h}h=e.getSource();switch(d){case "readAsBinaryString":return h;case "readAsDataURL":return"data:"+e.type+";base64,"+g.btoa(h);case "readAsText":d="";e=0;for(var m=h.length;m>
        e;e++)d+=String.fromCharCode(h[e]);return d}}n.call(this);f.extend(this,{uid:f.guid("uid_"),readAsBinaryString:function(d){return l.call(this,"readAsBinaryString",d)},readAsDataURL:function(d){return l.call(this,"readAsDataURL",d)},readAsText:function(d){return l.call(this,"readAsText",d)}})}});k("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(f,n,g){return function(){var l,d=[];n.extend(this,{append:function(e,h){var m=this,p=n.typeOf(h);h instanceof
            g?l={name:e,value:h}:"array"===p?(e+="[]",n.each(h,function(r){m.append(e,r)})):"object"===p?n.each(h,function(r,v){m.append(e+"["+v+"]",r)}):"null"===p||"undefined"===p||"number"===p&&isNaN(h)?m.append(e,"false"):d.push({name:e,value:h.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return l&&l.value||null},getBlobName:function(){return l&&l.name||null},each:function(e){n.each(d,function(h){e(h.value,h.name)});l&&e(l.value,l.name)},destroy:function(){l=null;d=[]}})}});
            k("moxie/xhr/XMLHttpRequest","moxie/core/utils/Basic moxie/core/Exceptions moxie/core/EventTarget moxie/core/utils/Encode moxie/core/utils/Url moxie/runtime/Runtime moxie/runtime/RuntimeTarget moxie/file/Blob moxie/file/FileReaderSync moxie/xhr/FormData moxie/core/utils/Env moxie/core/utils/Mime".split(" "),function(f,n,g,l,d,e,h,m,p,r,v,u){function t(){this.uid=f.guid("uid_")}function x(){function A(R,X){return ja.hasOwnProperty(R)?1===arguments.length?v.can("define_property")?ja[R]:la[R]:(v.can("define_property")?
                ja[R]=X:la[R]=X,void 0):void 0}function D(R){function X(){J&&(J.destroy(),J=null);fa.dispatchEvent("loadend");fa=null}function na(La){J.bind("LoadStart",function(oa){A("readyState",x.LOADING);fa.dispatchEvent("readystatechange");fa.dispatchEvent(oa);K&&fa.upload.dispatchEvent(oa)});J.bind("Progress",function(oa){A("readyState")!==x.LOADING&&(A("readyState",x.LOADING),fa.dispatchEvent("readystatechange"));fa.dispatchEvent(oa)});J.bind("UploadProgress",function(oa){K&&fa.upload.dispatchEvent({type:"progress",
                lengthComputable:!1,total:oa.total,loaded:oa.loaded})});J.bind("Load",function(oa){A("readyState",x.DONE);A("status",Number(La.exec.call(J,"XMLHttpRequest","getStatus")||0));A("statusText",E[A("status")]||"");A("response",La.exec.call(J,"XMLHttpRequest","getResponse",A("responseType")));~f.inArray(A("responseType"),["text",""])?A("responseText",A("response")):"document"===A("responseType")&&A("responseXML",A("response"));Da=La.exec.call(J,"XMLHttpRequest","getAllResponseHeaders");fa.dispatchEvent("readystatechange");
                0<A("status")?(K&&fa.upload.dispatchEvent(oa),fa.dispatchEvent(oa)):(ea=!0,fa.dispatchEvent("error"));X()});J.bind("Abort",function(oa){fa.dispatchEvent(oa);X()});J.bind("Error",function(oa){ea=!0;A("readyState",x.DONE);fa.dispatchEvent("readystatechange");P=!0;fa.dispatchEvent(oa);X()});La.exec.call(J,"XMLHttpRequest","send",{url:G,method:C,async:wa,user:O,password:U,headers:ra,mimeType:Ha,encoding:Ea,responseType:fa.responseType,withCredentials:fa.withCredentials,options:ma},R)}var fa=this;(new Date).getTime();
                J=new h;"string"==typeof ma.required_caps&&(ma.required_caps=e.parseCaps(ma.required_caps));ma.required_caps=f.extend({},ma.required_caps,{return_response_type:fa.responseType});R instanceof r&&(ma.required_caps.send_multipart=!0);f.isEmptyObj(ra)||(ma.required_caps.send_custom_headers=!0);ia||(ma.required_caps.do_cors=!0);ma.ruid?na(J.connectRuntime(ma)):(J.bind("RuntimeInit",function(La,oa){na(oa)}),J.bind("RuntimeError",function(La,oa){fa.dispatchEvent("RuntimeError",oa)}),J.connectRuntime(ma))}
                var G,C,O,U,J,I,la=this,ja={timeout:0,readyState:x.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},wa=!0,ra={},Ea=null,Ha=null,xa=!1,Fa=!1,K=!1,P=!1,ea=!1,ia=!1,ma={},Da="";f.extend(this,ja,{uid:f.guid("uid_"),upload:new t,open:function(R,X,na,fa,La){var oa;if(!R||!X)throw new n.DOMException(n.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(R)||l.utf8_encode(R)!==R)throw new n.DOMException(n.DOMException.SYNTAX_ERR);if(~f.inArray(R.toUpperCase(),
                        "CONNECT DELETE GET HEAD OPTIONS POST PUT TRACE TRACK".split(" "))&&(C=R.toUpperCase()),~f.inArray(C,["CONNECT","TRACE","TRACK"]))throw new n.DOMException(n.DOMException.SECURITY_ERR);if(X=l.utf8_encode(X),oa=d.parseUrl(X),ia=d.hasSameOrigin(oa),G=d.resolveUrl(X),(fa||La)&&!ia)throw new n.DOMException(n.DOMException.INVALID_ACCESS_ERR);if(O=fa||oa.user,U=La||oa.pass,wa=na||!0,!1===wa&&(A("timeout")||A("withCredentials")||""!==A("responseType")))throw new n.DOMException(n.DOMException.INVALID_ACCESS_ERR);
                        xa=!wa;Fa=!1;ra={};A("responseText","");A("responseXML",null);A("response",null);A("status",0);A("statusText","");A("readyState",x.OPENED);this.dispatchEvent("readystatechange")},setRequestHeader:function(R,X){if(A("readyState")!==x.OPENED||Fa)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(R)||l.utf8_encode(R)!==R)throw new n.DOMException(n.DOMException.SYNTAX_ERR);return R=f.trim(R).toLowerCase(),~f.inArray(R,"accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" "))||
                    /^(proxy\-|sec\-)/.test(R)?!1:(ra[R]?ra[R]+=", "+X:ra[R]=X,!0)},hasRequestHeader:function(R){return R&&ra[R.toLowerCase()]||!1},getAllResponseHeaders:function(){return Da||""},getResponseHeader:function(R){return R=R.toLowerCase(),ea||~f.inArray(R,["set-cookie","set-cookie2"])?null:Da&&""!==Da&&(I||(I={},f.each(Da.split(/\r\n/),function(X){X=X.split(/:\s+/);2===X.length&&(X[0]=f.trim(X[0]),I[X[0].toLowerCase()]={header:X[0],value:f.trim(X[1])})})),I.hasOwnProperty(R))?I[R].header+": "+I[R].value:
                        null},overrideMimeType:function(R){var X;if(~f.inArray(A("readyState"),[x.LOADING,x.DONE]))throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);if(R=f.trim(R.toLowerCase()),/;/.test(R)&&(X=R.match(/^([^;]+)(?:;\scharset=)?(.*)$/))&&(R=X[1]),!u.mimes[R])throw new n.DOMException(n.DOMException.SYNTAX_ERR);},send:function(R,X){if(ma="string"===f.typeOf(X)?{ruid:X}:X?X:{},this.readyState!==x.OPENED||Fa)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);R instanceof m?(ma.ruid=R.ruid,Ha=
                        R.type||"application/octet-stream"):R instanceof r?R.hasBlob()&&(X=R.getBlob(),ma.ruid=X.ruid,Ha=X.type||"application/octet-stream"):"string"==typeof R&&(Ea="UTF-8",Ha="text/plain;charset=UTF-8",R=l.utf8_encode(R));this.withCredentials||(this.withCredentials=ma.required_caps&&ma.required_caps.send_browser_cookies&&!ia);K=!xa&&this.upload.hasEventListener();ea=!1;P=!R;xa||(Fa=!0);D.call(this,R)},abort:function(){if(ea=!0,xa=!1,~f.inArray(A("readyState"),[x.UNSENT,x.OPENED,x.DONE]))A("readyState",x.UNSENT);
                    else{if(A("readyState",x.DONE),Fa=!1,!J)throw new n.DOMException(n.DOMException.INVALID_STATE_ERR);J.getRuntime().exec.call(J,"XMLHttpRequest","abort",P);P=!0}},destroy:function(){J&&("function"===f.typeOf(J.destroy)&&J.destroy(),J=null);this.unbindAll();this.upload&&(this.upload.unbindAll(),this.upload=null)}});this.handleEventProps(B.concat(["readystatechange"]));this.upload.handleEventProps(B)}var E={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",
                203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",
                412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};t.prototype=
                g.instance;var B="loadstart progress abort error load timeout loadend".split(" ");return x.UNSENT=0,x.OPENED=1,x.HEADERS_RECEIVED=2,x.LOADING=3,x.DONE=4,x.prototype=g.instance,x});k("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(f,n,g,l){function d(){function e(x,E){var B=this;p=E;B.bind("TransportingProgress",function(A){u=A.loaded;v>u&&-1===f.inArray(B.state,[d.IDLE,d.DONE])&&h.call(B)},999);B.bind("TransportingComplete",
                function(){u=v;B.state=d.DONE;r=null;B.result=p.exec.call(B,"Transporter","getAsBlob",x||"")},999);B.state=d.BUSY;B.trigger("TransportingStarted");h.call(B)}function h(){var x=v-u;t>x&&(t=x);x=n.btoa(r.substr(u,t));p.exec.call(this,"Transporter","receive",x,v)}var m,p,r,v,u,t;g.call(this);f.extend(this,{uid:f.guid("uid_"),state:d.IDLE,result:null,transport:function(x,E,B){var A=this;B=f.extend({chunk_size:204798},B);(m=B.chunk_size%3)&&(B.chunk_size+=3-m);t=B.chunk_size;v=u=0;r=this.result=null;if(r=
                    x,v=x.length,"string"===f.typeOf(B)||B.ruid)e.call(A,E,this.connectRuntime(B));else{var D=function(G,C){A.unbind("RuntimeInit",D);e.call(A,E,C)};this.bind("RuntimeInit",D);this.connectRuntime(B)}},abort:function(){this.state=d.IDLE;p&&(p.exec.call(this,"Transporter","clear"),this.trigger("TransportingAborted"));v=u=0;r=this.result=null},destroy:function(){this.unbindAll();p=null;this.disconnectRuntime();v=u=0;r=this.result=null}})}return d.IDLE=0,d.BUSY=1,d.DONE=2,d.prototype=l.instance,d});k("moxie/image/Image",
                "moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/Exceptions moxie/file/FileReaderSync moxie/xhr/XMLHttpRequest moxie/runtime/Runtime moxie/runtime/RuntimeClient moxie/runtime/Transporter moxie/core/utils/Env moxie/core/EventTarget moxie/file/Blob moxie/file/File moxie/core/utils/Encode".split(" "),function(f,n,g,l,d,e,h,m,p,r,v,u,t){function x(){function B(C){var O=f.typeOf(C);try{if(C instanceof x){if(!C.size)throw new g.DOMException(g.DOMException.INVALID_STATE_ERR);A.apply(this,arguments)}else if(C instanceof
                    v){if(!~f.inArray(C.type,["image/jpeg","image/png"]))throw new g.ImageError(g.ImageError.WRONG_FORMAT);D.apply(this,arguments)}else if(-1!==f.inArray(O,["blob","file"]))B.call(this,new u(null,C),arguments[1]);else if("string"===O)"data:"===C.substr(0,5)?B.call(this,new v(null,{data:C}),arguments[1]):G.apply(this,arguments);else{if("node"!==O||"img"!==C.nodeName.toLowerCase())throw new g.DOMException(g.DOMException.TYPE_MISMATCH_ERR);B.call(this,C.src,arguments[1])}}catch(U){this.trigger("error",U.code)}}
                    function A(C,O){var U=this.connectRuntime(C.ruid);this.ruid=U.uid;U.exec.call(this,"Image","loadFromImage",C,"undefined"===f.typeOf(O)?!0:O)}function D(C,O){function U(I){J.ruid=I.uid;I.exec.call(J,"Image","loadFromBlob",C)}var J=this;J.name=C.name||"";C.isDetached()?(this.bind("RuntimeInit",function(I,la){U(la)}),O&&"string"==typeof O.required_caps&&(O.required_caps=e.parseCaps(O.required_caps)),this.connectRuntime(f.extend({required_caps:{access_image_binary:!0,resize_image:!0}},O))):U(this.connectRuntime(C.ruid))}
                    function G(C,O){var U=this;var J=new d;J.open("get",C);J.responseType="blob";J.onprogress=function(I){U.trigger(I)};J.onload=function(){D.call(U,J.response,!0)};J.onerror=function(I){U.trigger(I)};J.onloadend=function(){J.destroy()};J.bind("RuntimeError",function(I,la){U.trigger("RuntimeError",la)});J.send(null,O)}h.call(this);f.extend(this,{uid:f.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){B.apply(this,arguments)},
                        resize:function(C){var O,U,J={x:0,y:0,width:this.width,height:this.height},I=f.extendIf({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},C);try{if(!this.size)throw new g.DOMException(g.DOMException.INVALID_STATE_ERR);if(this.width>x.MAX_RESIZE_WIDTH||this.height>x.MAX_RESIZE_HEIGHT)throw new g.ImageError(g.ImageError.MAX_RESOLUTION_ERR);if(O=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==
                        f.inArray(O,[5,6,7,8])){var la=I.width;I.width=I.height;I.height=la}if(I.crop){switch(U=Math.max(I.width/this.width,I.height/this.height),C.fit?(J.width=Math.min(Math.ceil(I.width/U),this.width),J.height=Math.min(Math.ceil(I.height/U),this.height),U=I.width/J.width):(J.width=Math.min(I.width,this.width),J.height=Math.min(I.height,this.height),U=1),"boolean"==typeof I.crop&&(I.crop="cc"),I.crop.toLowerCase().replace(/_/,"-")){case "rb":case "right-bottom":J.x=this.width-J.width;J.y=this.height-J.height;
                            break;case "cb":case "center-bottom":J.x=Math.floor((this.width-J.width)/2);J.y=this.height-J.height;break;case "lb":case "left-bottom":J.x=0;J.y=this.height-J.height;break;case "lt":case "left-top":J.x=0;J.y=0;break;case "ct":case "center-top":J.x=Math.floor((this.width-J.width)/2);J.y=0;break;case "rt":case "right-top":J.x=this.width-J.width;J.y=0;break;case "rc":case "right-center":case "right-middle":J.x=this.width-J.width;J.y=Math.floor((this.height-J.height)/2);break;case "lc":case "left-center":case "left-middle":J.x=
                            0;J.y=Math.floor((this.height-J.height)/2);break;default:J.x=Math.floor((this.width-J.width)/2),J.y=Math.floor((this.height-J.height)/2)}J.x=Math.max(J.x,0);J.y=Math.max(J.y,0)}else U=Math.min(I.width/this.width,I.height/this.height),1<U&&!I.fit&&(U=1);this.exec("Image","resize",J,U,I)}catch(ja){this.trigger("error",ja.code)}},downsize:function(C,O,U,J){var I={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,fit:!1,preserveHeaders:!0,resample:"default"};C="object"==
                        typeof C?f.extend(I,C):f.extend(I,{width:C,height:O,crop:U,preserveHeaders:J});this.resize(C)},crop:function(C,O,U){this.downsize(C,O,!0,U)},getAsCanvas:function(){if(!p.can("create_canvas"))throw new g.RuntimeError(g.RuntimeError.NOT_SUPPORTED_ERR);return this.exec("Image","getAsCanvas")},getAsBlob:function(C,O){if(!this.size)throw new g.DOMException(g.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",C||"image/jpeg",O||90)},getAsDataURL:function(C,O){if(!this.size)throw new g.DOMException(g.DOMException.INVALID_STATE_ERR);
                            return this.exec("Image","getAsDataURL",C||"image/jpeg",O||90)},getAsBinaryString:function(C,O){C=this.getAsDataURL(C,O);return t.atob(C.substring(C.indexOf("base64,")+7))},embed:function(C,O){function U(wa,ra){var Ea=this;if(p.can("create_canvas")){var Ha=Ea.getAsCanvas();if(Ha)return C.appendChild(Ha),Ha=null,Ea.destroy(),I.trigger("embedded"),void 0}ra=Ea.getAsDataURL(wa,ra);if(!ra)throw new g.ImageError(g.ImageError.WRONG_FORMAT);p.can("use_data_uri_of",ra.length)?(C.innerHTML='<img src="'+ra+
                            '" width="'+Ea.width+'" height="'+Ea.height+'" alt="" />',Ea.destroy(),I.trigger("embedded")):(Ha=new m,Ha.bind("TransportingComplete",function(){J=I.connectRuntime(this.result.ruid);I.bind("Embedded",function(){f.extend(J.getShimContainer().style,{top:"0px",left:"0px",width:Ea.width+"px",height:Ea.height+"px"});J=null},999);J.exec.call(I,"ImageView","display",this.result.uid,width,height);Ea.destroy()}),Ha.transport(t.atob(ra.substring(ra.indexOf("base64,")+7)),wa,{required_caps:{display_media:!0},
                            runtime_order:"flash,silverlight",container:C}))}var J,I=this,la=f.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,fit:!0,resample:"nearest"},O);try{if(!(C=n.get(C)))throw new g.DOMException(g.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new g.DOMException(g.DOMException.INVALID_STATE_ERR);this.width>x.MAX_RESIZE_WIDTH||this.height>x.MAX_RESIZE_HEIGHT;var ja=new x;return ja.bind("Resize",function(){U.call(this,la.type,la.quality)}),ja.bind("Load",function(){this.downsize(la)}),
                            this.meta.thumb&&this.meta.thumb.width>=la.width&&this.meta.thumb.height>=la.height?ja.load(this.meta.thumb.data):ja.clone(this,!1),ja}catch(wa){this.trigger("error",wa.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime());this.meta&&this.meta.thumb&&this.meta.thumb.data.destroy();this.unbindAll()}});this.handleEventProps(E);this.bind("Load Resize",function(){var C=void 0;try{var O=(C||(C=this.exec("Image","getInfo")),this.size=C.size,
                        this.width=C.width,this.height=C.height,this.type=C.type,this.meta=C.meta,""===this.name&&(this.name=C.name),!0)}catch(U){O=(this.trigger("error",U.code),!1)}return O},999)}var E=["progress","load","error","resize","embedded"];return x.MAX_RESIZE_WIDTH=8192,x.MAX_RESIZE_HEIGHT=8192,x.prototype=r.instance,x});k("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(f,n,g,l){var d={};return g.addConstructor("html5",function(e,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    h,m){var p=this,r=g.capTest,v=g.capTrue;m=f.extend({access_binary:r(w.FileReader||w.File&&w.File.getAsDataURL),access_image_binary:function(){return p.can("access_binary")&&!!d.Image},display_media:r((l.can("create_canvas")||l.can("use_data_uri_over32kb"))&&!!q["moxie/image/Image"]),do_cors:r(w.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:r(function(){var u=document.createElement("div");return("draggable"in u||"ondragstart"in u&&"ondrop"in u)&&("IE"!==l.browser||l.verComp(l.version,
                    9,">"))}()),filter_by_extension:r(!("Chrome"===l.browser&&l.verComp(l.version,28,"<")||"IE"===l.browser&&l.verComp(l.version,10,"<")||"Safari"===l.browser&&l.verComp(l.version,7,"<")||"Firefox"===l.browser&&l.verComp(l.version,37,"<"))),return_response_headers:v,return_response_type:function(u){return"json"===u&&w.JSON?!0:l.can("return_response_type",u)},return_status_code:v,report_upload_progress:r(w.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return p.can("access_binary")&&
                    l.can("create_canvas")},select_file:function(){return l.can("use_fileinput")&&w.File},select_folder:function(){return p.can("select_file")&&("Chrome"===l.browser&&l.verComp(l.version,21,">=")||"Firefox"===l.browser&&l.verComp(l.version,42,">="))},select_multiple:function(){return!(!p.can("select_file")||"Safari"===l.browser&&"Windows"===l.os||"iOS"===l.os&&l.verComp(l.osVersion,"7.0.0",">")&&l.verComp(l.osVersion,"8.0.0","<"))},send_binary_string:r(w.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||
                    w.Uint8Array&&w.ArrayBuffer)),send_custom_headers:r(w.XMLHttpRequest),send_multipart:function(){return!!(w.XMLHttpRequest&&(new XMLHttpRequest).upload&&w.FormData)||p.can("send_binary_string")},slice_blob:r(w.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return p.can("slice_blob")&&p.can("send_multipart")},summon_file_dialog:function(){return p.can("select_file")&&!("Firefox"===l.browser&&l.verComp(l.version,4,"<")||"Opera"===l.browser&&
                    l.verComp(l.version,12,"<")||"IE"===l.browser&&l.verComp(l.version,10,"<"))},upload_filesize:v,use_http_method:v},m);g.call(this,e,h||"html5",m);f.extend(this,{init:function(){this.trigger("Init")},destroy:function(u){return function(){u.call(p);u=p=null}}(this.destroy)});f.extend(this.getShim(),d)}),d});k("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(f,n){return f.Blob=function(){function g(l,d,e){var h;if(!w.File.prototype.slice)return(h=w.File.prototype.webkitSlice||
                w.File.prototype.mozSlice)?h.call(l,d,e):null;try{return l.slice(),l.slice(d,e)}catch(m){return l.slice(d,e-d)}}this.slice=function(){return new n(this.getRuntime().uid,g.apply(this,arguments))};this.destroy=function(){this.getRuntime().getShim().removeInstance(this.uid)}}});k("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(f){function n(){this.returnValue=!1}function g(){this.cancelBubble=!0}var l={},d="moxie_"+f.guid(),e=function(h,m,p){if(m=m.toLowerCase(),h[d]&&l[h[d]]&&l[h[d]][m]){var r=
                l[h[d]][m];for(var v=r.length-1;0<=v&&(r[v].orig!==p&&r[v].key!==p||(h.removeEventListener?h.removeEventListener(m,r[v].func,!1):h.detachEvent&&h.detachEvent("on"+m,r[v].func),r[v].orig=null,r[v].func=null,r.splice(v,1),void 0===p));v--);if(r.length||delete l[h[d]][m],f.isEmptyObj(l[h[d]])){delete l[h[d]];try{delete h[d]}catch(u){h[d]=void 0}}}};return{addEvent:function(h,m,p,r){var v;m=m.toLowerCase();h.addEventListener?(v=p,h.addEventListener(m,v,!1)):h.attachEvent&&(v=function(){var u=w.event;
                    u.target||(u.target=u.srcElement);u.preventDefault=n;u.stopPropagation=g;p(u)},h.attachEvent("on"+m,v));h[d]||(h[d]=f.guid());l.hasOwnProperty(h[d])||(l[h[d]]={});h=l[h[d]];h.hasOwnProperty(m)||(h[m]=[]);h[m].push({func:v,orig:p,key:r})},removeEvent:e,removeAllEvents:function(h,m){h&&h[d]&&f.each(l[h[d]],function(p,r){e(h,r,m)})}}});k("moxie/runtime/html5/file/FileInput","moxie/runtime/html5/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime moxie/core/utils/Env".split(" "),
                function(f,n,g,l,d,e,h){return f.FileInput=function(){var m,p;g.extend(this,{init:function(r){var v,u=this,t=u.getRuntime();m=r;r=e.extList2mimes(m.accept,t.can("filter_by_extension"));var x=t.getShimContainer();x.innerHTML='<input id="'+t.uid+'" type="file" style="font-size:999px;opacity:0;"'+(m.multiple&&t.can("select_multiple")?"multiple":"")+(m.directory&&t.can("select_folder")?"webkitdirectory directory":"")+(r?' accept="'+r.join(",")+'"':"")+" />";r=l.get(t.uid);g.extend(r.style,{position:"absolute",
                        top:0,left:0,width:"100%",height:"100%"});var E=l.get(m.browse_button);p=l.getStyle(E,"z-index")||"auto";t.can("summon_file_dialog")&&("static"===l.getStyle(E,"position")&&(E.style.position="relative"),d.addEvent(E,"click",function(B){var A=l.get(t.uid);A&&!A.disabled&&A.click();B.preventDefault()},u.uid),u.bind("Refresh",function(){v=parseInt(p,10)||1;l.get(m.browse_button).style.zIndex=v;this.getRuntime().getShimContainer().style.zIndex=v-1}));x=t.can("summon_file_dialog")?E:x;d.addEvent(x,"mouseover",
                        function(){u.trigger("mouseenter")},u.uid);d.addEvent(x,"mouseout",function(){u.trigger("mouseleave")},u.uid);d.addEvent(x,"mousedown",function(){u.trigger("mousedown")},u.uid);d.addEvent(l.get(m.container),"mouseup",function(){u.trigger("mouseup")},u.uid);(t.can("summon_file_dialog")?r:E).setAttribute("tabindex",-1);r.onchange=function A(){if(u.files=[],g.each(this.files,function(G){var C="";return m.directory&&"."==G.name?!0:(G.webkitRelativePath&&(C="/"+G.webkitRelativePath.replace(/^\//,"")),
                        G=new n(t.uid,G),G.relativePath=C,u.files.push(G),void 0)}),"IE"!==h.browser&&"IEMobile"!==h.browser)this.value="";else{var D=this.cloneNode(!0);this.parentNode.replaceChild(D,this);D.onchange=A}u.files.length&&u.trigger("change")};u.trigger({type:"ready",async:!0});x=null},setOption:function(r,v){var u=this.getRuntime(),t=l.get(u.uid);switch(r){case "accept":v?(r=v.mimes||e.extList2mimes(v,u.can("filter_by_extension")),t.setAttribute("accept",r.join(","))):t.removeAttribute("accept");break;case "directory":v&&
                    u.can("select_folder")?(t.setAttribute("directory",""),t.setAttribute("webkitdirectory","")):(t.removeAttribute("directory"),t.removeAttribute("webkitdirectory"));break;case "multiple":v&&u.can("select_multiple")?t.setAttribute("multiple",""):t.removeAttribute("multiple")}},disable:function(r){var v,u=this.getRuntime();(v=l.get(u.uid))&&(v.disabled=!!r)},destroy:function(){var r=this.getRuntime(),v=r.getShim();r=r.getShimContainer();var u=m&&l.get(m.container),t=m&&l.get(m.browse_button);u&&d.removeAllEvents(u,
                        this.uid);t&&(d.removeAllEvents(t,this.uid),t.style.zIndex=p);r&&(d.removeAllEvents(r,this.uid),r.innerHTML="");v.removeInstance(this.uid);m=null}})}});k("moxie/runtime/html5/file/FileDrop","moxie/runtime/html5/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime".split(" "),function(f,n,g,l,d,e){return f.FileDrop=function(){function h(D){if(!D.dataTransfer||!D.dataTransfer.types)return!1;D=g.toArray(D.dataTransfer.types||[]);return-1!==
                g.inArray("Files",D)||-1!==g.inArray("public.file-url",D)||-1!==g.inArray("application/x-moz-file",D)}function m(D,G){if(A.length){var C=e.getFileExtension(D.name);C=!C||-1!==g.inArray(C,A)}else C=!0;C&&(D=new n(E,D),D.relativePath=G||"",B.push(D))}function p(D){for(var G=[],C=0;C<D.length;C++)[].push.apply(G,D[C].extensions.split(/\s*,\s*/));return-1===g.inArray("*",G)?G:[]}function r(D,G){var C=[];g.each(D,function(O){var U=O.webkitGetAsEntry();U&&(U.isFile?m(O.getAsFile(),U.fullPath):C.push(U))});
                C.length?v(C,G):G()}function v(D,G){var C=[];g.each(D,function(O){C.push(function(U){u(O,U)})});g.inSeries(C,function(){G()})}function u(D,G){D.isFile?D.file(function(C){m(C,D.fullPath);G()},function(){G()}):D.isDirectory?t(D,G):G()}function t(D,G){function C(J){U.readEntries(function(I){I.length?([].push.apply(O,I),C(J)):J()},J)}var O=[],U=D.createReader();C(function(){v(O,G)})}var x,E,B=[],A=[];g.extend(this,{init:function(D){var G=this;x=D;E=G.ruid;A=p(x.accept);D=x.container;d.addEvent(D,"dragover",
                    function(C){h(C)&&(C.preventDefault(),C.dataTransfer.dropEffect="copy")},G.uid);d.addEvent(D,"drop",function(C){h(C)&&(C.preventDefault(),B=[],C.dataTransfer.items&&C.dataTransfer.items[0].webkitGetAsEntry?r(C.dataTransfer.items,function(){G.files=B;G.trigger("drop")}):(g.each(C.dataTransfer.files,function(O){m(O)}),G.files=B,G.trigger("drop")))},G.uid);d.addEvent(D,"dragenter",function(){G.trigger("dragenter")},G.uid);d.addEvent(D,"dragleave",function(){G.trigger("dragleave")},G.uid)},destroy:function(){d.removeAllEvents(x&&
                    l.get(x.container),this.uid);E=B=A=x=null;this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(f,n,g){return f.FileReader=function(){var l,d=!1;g.extend(this,{read:function(e,h){var m=this;m.result="";l=new w.FileReader;l.addEventListener("progress",function(p){m.trigger(p)});l.addEventListener("load",function(p){if(d){var r=l.result;r=n.atob(r.substring(r.indexOf("base64,")+
                    7))}else r=l.result;m.result=r;m.trigger(p)});l.addEventListener("error",function(p){m.trigger(p,l.error)});l.addEventListener("loadend",function(p){l=null;m.trigger(p)});"function"===g.typeOf(l[e])?(d=!1,l[e](h.getSource())):"readAsBinaryString"===e&&(d=!0,l.readAsDataURL(h.getSource()))},abort:function(){l&&l.abort()},destroy:function(){l=null;this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/html5/xhr/XMLHttpRequest","moxie/runtime/html5/Runtime moxie/core/utils/Basic moxie/core/utils/Mime moxie/core/utils/Url moxie/file/File moxie/file/Blob moxie/xhr/FormData moxie/core/Exceptions moxie/core/utils/Env".split(" "),
                function(f,n,g,l,d,e,h,m,p){return f.XMLHttpRequest=function(){function r(B,A){var D=this;var G=A.getBlob().getSource();var C=new w.FileReader;C.onload=function(){A.append(A.getBlobName(),new e(null,{type:G.type,data:C.result}));E.send.call(D,B,A)};C.readAsBinaryString(G)}function v(){if(!w.XMLHttpRequest||"IE"===p.browser&&p.verComp(p.version,8,"<"))a:{for(var B=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],A=0;A<B.length;A++)try{var D=new ActiveXObject(B[A]);break a}catch(G){}D=void 0}else D=new w.XMLHttpRequest;
                    return D}function u(B){var A="----moxieboundary"+(new Date).getTime(),D="";if(!this.getRuntime().can("send_binary_string"))throw new m.RuntimeError(m.RuntimeError.NOT_SUPPORTED_ERR);return t.setRequestHeader("Content-Type","multipart/form-data; boundary="+A),B.each(function(G,C){D+=G instanceof e?"--"+A+'\r\nContent-Disposition: form-data; name="'+C+'"; filename="'+unescape(encodeURIComponent(G.name||"blob"))+'"\r\nContent-Type: '+(G.type||"application/octet-stream")+"\r\n\r\n"+G.getSource()+"\r\n":
                    "--"+A+'\r\nContent-Disposition: form-data; name="'+C+'"\r\n\r\n'+unescape(encodeURIComponent(G))+"\r\n"}),D+="--"+A+"--\r\n"}var t,x,E=this;n.extend(this,{send:function(B,A){var D=this,G="Mozilla"===p.browser&&p.verComp(p.version,4,">=")&&p.verComp(p.version,7,"<"),C="Android Browser"===p.browser,O=!1;if(x=B.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),t=v(),t.open(B.method,B.url,B.async,B.user,B.password),A instanceof e)A.isDetached()&&(O=!0),A=A.getSource();else if(A instanceof h){if(A.hasBlob())if(A.getBlob().isDetached())A=
                        u.call(D,A),O=!0;else if((G||C)&&"blob"===n.typeOf(A.getBlob().getSource())&&w.FileReader)return r.call(D,B,A),void 0;if(A instanceof h){var U=new w.FormData;A.each(function(J,I){J instanceof e?U.append(I,J.getSource()):U.append(I,J)});A=U}}t.upload?(B.withCredentials&&(t.withCredentials=!0),t.addEventListener("load",function(J){D.trigger(J)}),t.addEventListener("error",function(J){D.trigger(J)}),t.addEventListener("progress",function(J){D.trigger(J)}),t.upload.addEventListener("progress",function(J){D.trigger({type:"UploadProgress",
                        loaded:J.loaded,total:J.total})})):t.onreadystatechange=function(){switch(t.readyState){case 3:var J,I;try{l.hasSameOrigin(B.url)&&(J=t.getResponseHeader("Content-Length")||0),t.responseText&&(I=t.responseText.length)}catch(la){J=I=0}D.trigger({type:"progress",lengthComputable:!!J,total:parseInt(J,10),loaded:I});break;case 4:t.onreadystatechange=function(){};try{if(200<=t.status&&400>t.status){D.trigger("load");break}}catch(la){}D.trigger("error")}};n.isEmptyObj(B.headers)||n.each(B.headers,function(J,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 I){t.setRequestHeader(I,J)});""!==B.responseType&&"responseType"in t&&(t.responseType="json"!==B.responseType||p.can("return_response_type","json")?B.responseType:"text");O?t.sendAsBinary?t.sendAsBinary(A):function(){for(var J=new Uint8Array(A.length),I=0;I<A.length;I++)J[I]=255&A.charCodeAt(I);t.send(J.buffer)}():t.send(A);D.trigger("loadstart")},getStatus:function(){try{if(t)return t.status}catch(B){}return 0},getResponse:function(B){var A=this.getRuntime();try{switch(B){case "blob":var D=new d(A.uid,
                        t.response),G=t.getResponseHeader("Content-Disposition");if(G){var C=G.match(/filename=(['"'])([^\1]+)\1/);C&&(x=C[2])}return D.name=x,D.type||(D.type=g.getFileMime(x)),D;case "json":return p.can("return_response_type","json")?t.response:200===t.status&&w.JSON?JSON.parse(t.responseText):null;case "document":var O=t.responseXML,U=t.responseText;return"IE"===p.browser&&U&&O&&!O.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(t.getResponseHeader("Content-Type"))&&(O=new w.ActiveXObject("Microsoft.XMLDOM"),
                        O.async=!1,O.validateOnParse=!1,O.loadXML(U)),O&&("IE"===p.browser&&0!==O.parseError||!O.documentElement||"parsererror"===O.documentElement.tagName)?null:O;default:return""!==t.responseText?t.responseText:null}}catch(J){return null}},getAllResponseHeaders:function(){try{return t.getAllResponseHeaders()}catch(B){}return""},abort:function(){t&&t.abort()},destroy:function(){E=x=null;this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],
                function(f){function n(d){d instanceof ArrayBuffer?g.apply(this,arguments):l.apply(this,arguments)}function g(d){var e=new DataView(d);f.extend(this,{readByteAt:function(h){return e.getUint8(h)},writeByteAt:function(h,m){e.setUint8(h,m)},SEGMENT:function(h,m,p){switch(arguments.length){case 2:return d.slice(h,h+m);case 1:return d.slice(h);case 3:if(null===p&&(p=new ArrayBuffer),p instanceof ArrayBuffer){var r=new Uint8Array(this.length()-m+p.byteLength);0<h&&r.set(new Uint8Array(d.slice(0,h)),0);
                        r.set(new Uint8Array(p),h);r.set(new Uint8Array(d.slice(h+m)),h+p.byteLength);this.clear();d=r.buffer;e=new DataView(d);break}default:return d}},length:function(){return d?d.byteLength:0},clear:function(){e=d=null}})}function l(d){function e(h,m,p){p=3===arguments.length?p:d.length-m-1;d=d.substr(0,m)+h+d.substr(p+m)}f.extend(this,{readByteAt:function(h){return d.charCodeAt(h)},writeByteAt:function(h,m){e(String.fromCharCode(m),h,1)},SEGMENT:function(h,m,p){switch(arguments.length){case 1:return d.substr(h);
                        case 2:return d.substr(h,m);case 3:e(null!==p?p:"",h,m);break;default:return d}},length:function(){return d?d.length:0},clear:function(){d=null}})}return f.extend(n.prototype,{littleEndian:!1,read:function(d,e){var h,m;if(d+e>this.length())throw Error("You are trying to read outside the source boundaries.");var p=this.littleEndian?0:-8*(e-1);for(h=m=0;e>m;m++)h|=this.readByteAt(d+m)<<Math.abs(p+8*m);return h},write:function(d,e,h){var m;if(d>this.length())throw Error("You are trying to write outside the source boundaries.");
                        var p=this.littleEndian?0:-8*(h-1);for(m=0;h>m;m++)this.writeByteAt(d+m,255&e>>Math.abs(p+8*m))},BYTE:function(d){return this.read(d,1)},SHORT:function(d){return this.read(d,2)},LONG:function(d){return this.read(d,4)},SLONG:function(d){d=this.read(d,4);return 2147483647<d?d-4294967296:d},CHAR:function(d){return String.fromCharCode(this.read(d,1))},STRING:function(d,e){return this.asArray("CHAR",d,e).join("")},asArray:function(d,e,h){for(var m=[],p=0;h>p;p++)m[p]=this[d](e+p);return m}}),n});k("moxie/runtime/html5/image/JPEGHeaders",
                ["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(f,n){return function d(l){var e,h,m,p=[],r=0;if(e=new f(l),65496!==e.SHORT(0))throw e.clear(),new n.ImageError(n.ImageError.WRONG_FORMAT);for(h=2;h<=e.length();)if(m=e.SHORT(h),65488<=m&&65495>=m)h+=2;else{if(65498===m||65497===m)break;r=e.SHORT(h+2)+2;65505<=m&&65519>=m&&p.push({hex:m,name:"APP"+(15&m),start:h,length:r,segment:e.SEGMENT(h,r)});h+=r}return e.clear(),{headers:p,restore:function(v){var u;var t=new f(v);h=65504==
                    t.SHORT(2)?4+t.SHORT(4):2;var x=0;for(u=p.length;u>x;x++)t.SEGMENT(h,0,p[x].segment),h+=p[x].length;return v=t.SEGMENT(),t.clear(),v},strip:function(v){var u;var t=new d(v);var x=t.headers;t.purge();t=new f(v);for(u=x.length;u--;)t.SEGMENT(x[u].start,x[u].length,"");return v=t.SEGMENT(),t.clear(),v},get:function(v){for(var u=[],t=0,x=p.length;x>t;t++)p[t].name===v.toUpperCase()&&u.push(p[t].segment);return u},set:function(v,u){var t,x,E=[];"string"==typeof u?E.push(u):E=u;u=t=0;for(x=p.length;x>u&&
                    (p[u].name===v.toUpperCase()&&(p[u].segment=E[t],p[u].length=E[t].length,t++),!(t>=E.length));u++);},purge:function(){this.headers=p=[]}}}});k("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(f,n,g){function l(d){function e(t,x){var E,B,A,D,G,C,O,U,J={},I={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},la={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,
                SRATIONAL:8};var ja=this.SHORT(t);for(E=0;ja>E;E++)if(U=[],C=t+2+12*E,B=x[this.SHORT(C)],B!==b){if(A=I[this.SHORT(C+=2)],D=this.LONG(C+=2),G=la[A],!G)throw new g.ImageError(g.ImageError.INVALID_META_ERR);if(C+=4,4<G*D&&(C=this.LONG(C)+r.tiffHeader),C+G*D>=this.length())throw new g.ImageError(g.ImageError.INVALID_META_ERR);"ASCII"!==A?(U=this.asArray(A,C,D),O=1==D?U[0]:U,J[B]=p.hasOwnProperty(B)&&"object"!=typeof O?p[B][O]:O):J[B]=f.trim(this.STRING(C,D).replace(/\0$/,""))}return J}var h,m,p,r,v;if(n.call(this,
                d),m={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",
                    41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},p={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",
                    11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",
                    15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",
                    77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},
                SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},r={tiffHeader:10},v=r.tiffHeader,h={clear:this.clear},f.extend(this,{read:function(){try{return l.prototype.read.apply(this,arguments)}catch(t){throw new g.ImageError(g.ImageError.INVALID_META_ERR);
                }},write:function(){try{return l.prototype.write.apply(this,arguments)}catch(t){throw new g.ImageError(g.ImageError.INVALID_META_ERR);}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(t){return this.LONG(t)/this.LONG(t+4)},SRATIONAL:function(t){return this.SLONG(t)/this.SLONG(t+4)},ASCII:function(t){return this.CHAR(t)},TIFF:function(){return u||null},EXIF:function(){var t=null;if(r.exifIFD){try{t=e.call(this,r.exifIFD,m.exif)}catch(B){return null}if(t.ExifVersion&&
                    "array"===f.typeOf(t.ExifVersion)){for(var x=0,E="";x<t.ExifVersion.length;x++)E+=String.fromCharCode(t.ExifVersion[x]);t.ExifVersion=E}}return t},GPS:function(){var t=null;if(r.gpsIFD){try{t=e.call(this,r.gpsIFD,m.gps)}catch(x){return null}t.GPSVersionID&&"array"===f.typeOf(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join("."))}return t},thumb:function(){if(r.IFD1)try{var t=e.call(this,r.IFD1,m.thumb);if("JPEGInterchangeFormat"in t)return this.SEGMENT(r.tiffHeader+t.JPEGInterchangeFormat,t.JPEGInterchangeFormatLength)}catch(x){}return null},
                setExif:function(t,x){if("PixelXDimension"!==t&&"PixelYDimension"!==t)x=!1;else a:{var E,B=0;if("string"==typeof t){var A=m.exif;for(D in A)if(A[D]===t){t=D;break}}var D=r.exifIFD;A=this.SHORT(D);for(var G=0;A>G;G++)if(E=D+12*G+2,this.SHORT(E)==t){B=E+8;break}if(B){try{this.write(B,x,4)}catch(C){x=!1;break a}x=!0}else x=!1}return x},clear:function(){h.clear();d=m=p=u=r=h=null}}),65505!==this.SHORT(0)||"EXIF\x00"!==this.STRING(4,5).toUpperCase())throw new g.ImageError(g.ImageError.INVALID_META_ERR);
                if(this.littleEndian=18761==this.SHORT(v),42!==this.SHORT(v+=2))throw new g.ImageError(g.ImageError.INVALID_META_ERR);r.IFD0=r.tiffHeader+this.LONG(v+=2);var u=e.call(this,r.IFD0,m.tiff);"ExifIFDPointer"in u&&(r.exifIFD=r.tiffHeader+u.ExifIFDPointer,delete u.ExifIFDPointer);"GPSInfoIFDPointer"in u&&(r.gpsIFD=r.tiffHeader+u.GPSInfoIFDPointer,delete u.GPSInfoIFDPointer);f.isEmptyObj(u)&&(u=null);(v=this.LONG(r.IFD0+12*this.SHORT(r.IFD0)+2))&&(r.IFD1=r.tiffHeader+v)}return l.prototype=n.prototype,l});
            k("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(f,n,g,l,d){return function(e){function h(t){var x,E=0;for(t||(t=p);E<=t.length();){if(x=t.SHORT(E+=2),65472<=x&&65475>=x)return E+=5,{height:t.SHORT(E),width:t.SHORT(E+2)};var B=t.SHORT(E+=2);E+=B-2}return null}function m(){var t,x,E=v.thumb();return E&&(t=new l(E),x=h(t),t.clear(),x)?
                (x.data=E,x):null}var p;if(p=new l(e),65496!==p.SHORT(0))throw new n.ImageError(n.ImageError.WRONG_FORMAT);var r=new g(e);try{var v=new d(r.get("app1")[0])}catch(t){}var u=h.call(this);f.extend(this,{type:"image/jpeg",size:p.length(),width:u&&u.width||0,height:u&&u.height||0,setExif:function(t,x){return v?("object"===f.typeOf(t)?f.each(t,function(E,B){v.setExif(B,E)}):v.setExif(t,x),r.set("app1",v.SEGMENT()),void 0):!1},writeHeaders:function(){return arguments.length?r.restore(arguments[0]):r.restore(e)},
                stripHeaders:function(t){return r.strip(t)},purge:function(){v&&r&&p&&(v.clear(),r.purge(),p.clear(),u=r=v=p=null)}});v&&(this.meta={tiff:v.TIFF(),exif:v.EXIF(),gps:v.GPS(),thumb:m()})}});k("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(f,n,g){return function(l){function d(){e&&(e.clear(),l=h=e=null)}var e=new g(l);(function(){var m=0,p,r=[35152,20039,3338,6666];for(p=0;p<r.length;p++,m+=2)if(r[p]!=e.SHORT(m))throw new f.ImageError(f.ImageError.WRONG_FORMAT);
            })();var h=function(){var m,p=8,r,v,u,t;var x=(r=e.LONG(p),v=e.STRING(p+=4,4),u=p+=4,t=e.LONG(p+r),{length:r,type:v,start:u,CRC:t});return"IHDR"==x.type?(m=x.start,{width:e.LONG(m),height:e.LONG(m+4)}):null}.call(this);n.extend(this,{type:"image/png",size:e.length(),width:h.width,height:h.height,purge:function(){d.call(this)}});d.call(this)}});k("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],
                function(f,n,g,l){return function(d){var e=[g,l];var h=function(){for(var m=0;m<e.length;m++)try{return new e[m](d)}catch(p){}throw new n.ImageError(n.ImageError.WRONG_FORMAT);}();f.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(m){return m},stripHeaders:function(m){return m},purge:function(){d=null}});f.extend(this,h);this.purge=function(){h.purge();h=null}}});k("moxie/runtime/html5/image/ResizerCanvas",[],function(){function f(n,g,l){var d=n.width>n.height?
                "width":"height",e=Math.round(n[d]*g),h=!1;"nearest"!==l&&(.5>g||2<g)&&(g=.5>g?.5:2,h=!0);var m=n.width,p=n.height,r=Math.round(m*g);g=Math.round(p*g);var v=document.createElement("canvas");n=(v.width=r,v.height=g,v.getContext("2d").drawImage(n,0,0,m,p,0,0,r,g),v);return h?f(n,e/n[d],l):n}return{scale:f}});k("moxie/runtime/html5/image/Image","moxie/runtime/html5/Runtime moxie/core/utils/Basic moxie/core/Exceptions moxie/core/utils/Encode moxie/file/Blob moxie/file/File moxie/runtime/html5/image/ImageInfo moxie/runtime/html5/image/ResizerCanvas moxie/core/utils/Mime moxie/core/utils/Env".split(" "),
                function(f,n,g,l,d,e,h,m,p){return f.Image=function(){function r(){if(!D&&!B)throw new g.ImageError(g.DOMException.INVALID_STATE_ERR);return D||B}function v(){var I=r();return"canvas"==I.nodeName.toLowerCase()?I:(D=document.createElement("canvas"),D.width=I.width,D.height=I.height,D.getContext("2d").drawImage(I,0,0),D)}function u(I){return l.atob(I.substring(I.indexOf("base64,")+7))}function t(I){var la=this;B=new Image;B.onerror=function(){E.call(this);la.trigger("error",g.ImageError.WRONG_FORMAT)};
                    B.onload=function(){la.trigger("load")};B.src="data:"==I.substr(0,5)?I:"data:"+(C.type||"")+";base64,"+l.btoa(I)}function x(I,la){var ja,wa=this;return w.FileReader?(ja=new FileReader,ja.onload=function(){la.call(wa,this.result)},ja.onerror=function(){wa.trigger("error",g.ImageError.WRONG_FORMAT)},ja.readAsDataURL(I),void 0):la.call(this,I.getAsDataURL())}function E(){A&&(A.purge(),A=null);G=B=D=C=null;U=!1}var B,A,D,G,C,O=this,U=!1,J=!0;n.extend(this,{loadFromBlob:function(I){var la=this.getRuntime(),
                        ja=1<arguments.length?arguments[1]:!0;if(!la.can("access_binary"))throw new g.RuntimeError(g.RuntimeError.NOT_SUPPORTED_ERR);return C=I,I.isDetached()?(G=I.getSource(),t.call(this,G),void 0):(x.call(this,I.getSource(),function(wa){ja&&(G=u(wa));t.call(this,wa)}),void 0)},loadFromImage:function(I,la){this.meta=I.meta;C=new e(null,{name:I.name,size:I.size,type:I.type});t.call(this,la?G=I.getAsBinaryString():I.getAsDataURL())},getInfo:function(){var I,la=this.getRuntime();return!A&&G&&la.can("access_image_binary")&&
                    (A=new h(G)),I={width:r().width||0,height:r().height||0,type:C.type||p.getFileMime(C.name),size:G&&G.length||C.size||0,name:C.name||"",meta:null},J&&(I.meta=A&&A.meta||this.meta||{},!I.meta||!I.meta.thumb||I.meta.thumb.data instanceof d||(I.meta.thumb.data=new d(null,{type:"image/jpeg",data:I.meta.thumb.data}))),I},resize:function(I,la,ja){var wa=document.createElement("canvas");if(wa.width=I.width,wa.height=I.height,wa.getContext("2d").drawImage(r(),I.x,I.y,I.width,I.height,0,0,wa.width,wa.height),
                        D=m.scale(wa,la),J=ja.preserveHeaders,!J){I=D;la=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;ja=Math.PI/180;wa=document.createElement("canvas");var ra=wa.getContext("2d"),Ea=I.width,Ha=I.height;switch(-1<n.inArray(la,[5,6,7,8])?(wa.width=Ha,wa.height=Ea):(wa.width=Ea,wa.height=Ha),la){case 2:ra.translate(Ea,0);ra.scale(-1,1);break;case 3:ra.translate(Ea,Ha);ra.rotate(180*ja);break;case 4:ra.translate(0,Ha);ra.scale(1,-1);break;case 5:ra.rotate(90*ja);ra.scale(1,-1);break;case 6:ra.rotate(90*
                        ja);ra.translate(0,-Ha);break;case 7:ra.rotate(90*ja);ra.translate(Ea,-Ha);ra.scale(-1,1);break;case 8:ra.rotate(-90*ja),ra.translate(-Ea,0)}D=(ra.drawImage(I,0,0,Ea,Ha),wa)}this.width=D.width;this.height=D.height;U=!0;this.trigger("Resize")},getAsCanvas:function(){return D||(D=v()),D.id=this.uid+"_canvas",D},getAsBlob:function(I,la){return I!==this.type?(U=!0,new e(null,{name:C.name||"",type:I,data:O.getAsDataURL(I,la)})):new e(null,{name:C.name||"",type:I,data:O.getAsBinaryString(I,la)})},getAsDataURL:function(I,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              la){la=la||90;if(!U)return B.src;if(v(),"image/jpeg"!==I)return D.toDataURL("image/png");try{return D.toDataURL("image/jpeg",la/100)}catch(ja){return D.toDataURL("image/jpeg")}},getAsBinaryString:function(I,la){if(!U)return G||(G=u(O.getAsDataURL(I,la))),G;if("image/jpeg"!==I)G=u(O.getAsDataURL(I,la));else{la||(la=90);v();try{var ja=D.toDataURL("image/jpeg",la/100)}catch(wa){ja=D.toDataURL("image/jpeg")}G=u(ja);A&&(G=A.stripHeaders(G),J&&(A.meta&&A.meta.exif&&A.setExif({PixelXDimension:this.width,
                        PixelYDimension:this.height}),G=A.writeHeaders(G)),A.purge(),A=null)}return U=!1,G},destroy:function(){O=null;E.call(this);this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(f,n,g,l,d){function e(){try{var p=navigator.plugins["Shockwave Flash"];p=p.description}catch(r){try{p=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(v){p=
                "0.0"}}return p=p.match(/\d+/g),parseFloat(p[0]+"."+p[1])}function h(p){var r=g.get(p);r&&"OBJECT"==r.nodeName&&("IE"===n.browser?(r.style.display="none",function u(){if(4==r.readyState){var t=g.get(p);if(t){for(var x in t)"function"==typeof t[x]&&(t[x]=null);t.parentNode.removeChild(t)}}else setTimeout(u,10)}()):r.parentNode.removeChild(r))}var m={};return d.addConstructor("flash",function(p){var r,v=this;p=f.extend({swf_url:n.swf_url},p);d.call(this,p,"flash",{access_binary:function(u){return u&&
                    "browser"===v.mode},access_image_binary:function(u){return u&&"browser"===v.mode},display_media:d.capTest(!!q["moxie/image/Image"]),do_cors:d.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===v.mode},resize_image:d.capTrue,return_response_headers:!1,return_response_type:function(u){return"json"===u&&w.JSON?!0:!f.arrayDiff(u,["","text","document"])||"browser"===v.mode},return_status_code:function(u){return"browser"===v.mode||!f.arrayDiff(u,[200,404])},select_file:d.capTrue,
                select_multiple:d.capTrue,send_binary_string:function(u){return u&&"browser"===v.mode},send_browser_cookies:function(u){return u&&"browser"===v.mode},send_custom_headers:function(u){return u&&"browser"===v.mode},send_multipart:d.capTrue,slice_blob:function(u){return u&&"browser"===v.mode},stream_upload:function(u){return u&&"browser"===v.mode},summon_file_dialog:!1,upload_filesize:function(u){return 2097152>=f.parseSizeStr(u)||"client"===v.mode},use_http_method:function(u){return!f.arrayDiff(u,["GET",
                    "POST"])}},{access_binary:function(u){return u?"browser":"client"},access_image_binary:function(u){return u?"browser":"client"},report_upload_progress:function(u){return u?"browser":"client"},return_response_type:function(u){return f.arrayDiff(u,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(u){return f.arrayDiff(u,[200,404])?"browser":["client","browser"]},send_binary_string:function(u){return u?"browser":"client"},send_browser_cookies:function(u){return u?
                    "browser":"client"},send_custom_headers:function(u){return u?"browser":"client"},slice_blob:function(u){return u?"browser":"client"},stream_upload:function(u){return u?"client":"browser"},upload_filesize:function(u){return 2097152<=f.parseSizeStr(u)?"client":"browser"}},"client");11.3>e()&&(this.mode=!1);f.extend(this,{getShim:function(){return g.get(this.uid)},shimExec:function(u,t){var x=[].slice.call(arguments,2);return v.getShim().exec(this.uid,u,t,x)},init:function(){var u;var t=this.getShimContainer();
                    f.extend(t.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});var x='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+p.swf_url+'" ';"IE"===n.browser&&(x+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ');x+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+p.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+d.getGlobalEventTarget()+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';
                    "IE"===n.browser?(u=document.createElement("div"),t.appendChild(u),u.outerHTML=x,u=t=null):t.innerHTML=x;r=setTimeout(function(){v&&!v.initialized&&v.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))},5E3)},destroy:function(u){return function(){h(v.uid);u.call(v);clearTimeout(r);p=r=u=v=null}}(this.destroy)},m)}),m});k("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(f,n){return f.Blob={slice:function(g,l,d,e){var h=this.getRuntime();return 0>
                l?l=Math.max(g.size+l,0):0<l&&(l=Math.min(l,g.size)),0>d?d=Math.max(g.size+d,0):0<d&&(d=Math.min(d,g.size)),g=h.shimExec.call(this,"Blob","slice",l,d,e||""),g&&(g=new n(h.uid,g)),g}}});k("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(f,n,g,l){return f.FileInput={init:function(d){var e=this,h=this.getRuntime(),m=g.get(d.browse_button);m&&(m.setAttribute("tabindex",-1),m=null);this.bind("Change",function(){var p=
                    h.shimExec.call(e,"FileInput","getFiles");e.files=[];l.each(p,function(r){e.files.push(new n(h.uid,r))})},999);this.getRuntime().shimExec.call(this,"FileInput","init",{accept:d.accept,multiple:d.multiple});this.trigger("ready")}}});k("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(f,n){function g(l,d){switch(d){case "readAsText":return n.atob(l,"utf8");case "readAsBinaryString":return n.atob(l);case "readAsDataURL":return l}return null}return f.FileReader=
                {read:function(l,d){var e=this;return e.result="","readAsDataURL"===l&&(e.result="data:"+(d.type||"")+";base64,"),e.bind("Progress",function(h,m){m&&(e.result+=g(m,l))},999),e.getRuntime().shimExec.call(this,"FileReader","readAsBase64",d.uid)}}});k("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(f,n){function g(l,d){switch(d){case "readAsText":return n.atob(l,"utf8");case "readAsBinaryString":return n.atob(l);case "readAsDataURL":return l}return null}
                return f.FileReaderSync={read:function(l,d){var e;return(e=this.getRuntime().shimExec.call(this,"FileReaderSync","readAsBase64",d.uid))?("readAsDataURL"===l&&(e="data:"+(d.type||"")+";base64,"+e),g(e,l,d.type)):null}}});k("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(f,n){return f.Transporter={getAsBlob:function(g){var l=this.getRuntime();return(g=l.shimExec.call(this,"Transporter","getAsBlob",g))?new n(l.uid,g):null}}});k("moxie/runtime/flash/xhr/XMLHttpRequest",
                "moxie/runtime/flash/Runtime moxie/core/utils/Basic moxie/file/Blob moxie/file/File moxie/file/FileReaderSync moxie/runtime/flash/file/FileReaderSync moxie/xhr/FormData moxie/runtime/Transporter moxie/runtime/flash/runtime/Transporter".split(" "),function(f,n,g,l,d,e,h,m){return f.XMLHttpRequest={send:function(p,r){function v(){p.transport=E.mode;E.shimExec.call(x,"XMLHttpRequest","send",p,r)}function u(D,G){E.shimExec.call(x,"XMLHttpRequest","appendBlob",D,G.uid);r=null;v()}function t(D,G){var C=
                        new m;C.bind("TransportingComplete",function(){G(this.result)});C.transport(D.getSource(),D.type,{ruid:E.uid})}var x=this,E=x.getRuntime();if(n.isEmptyObj(p.headers)||n.each(p.headers,function(D,G){E.shimExec.call(x,"XMLHttpRequest","setRequestHeader",G,D.toString())}),r instanceof h){var B;if(r.each(function(D,G){D instanceof g?B=G:E.shimExec.call(x,"XMLHttpRequest","append",G,D)}),r.hasBlob()){var A=r.getBlob();A.isDetached()?t(A,function(D){A.destroy();u(B,D)}):u(B,A)}else r=null,v()}else r instanceof
                    g?r.isDetached()?t(r,function(D){r.destroy();r=D.uid;v()}):(r=r.uid,v()):v()},getResponse:function(p){var r,v,u=this.getRuntime();if(v=u.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(v=new l(u.uid,v),"blob"===p)return v;try{if(r=new d,~n.inArray(p,["","text"]))return r.readAsText(v);if("json"===p&&w.JSON)return JSON.parse(r.readAsText(v))}finally{v.destroy()}}return null},abort:function(){this.getRuntime().shimExec.call(this,"XMLHttpRequest","abort");this.dispatchEvent("readystatechange");
                        this.dispatchEvent("abort")}}});k("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(f,n,g,l,d){return f.Image={loadFromBlob:function(e){function h(v){p.shimExec.call(m,"Image","loadFromBlob",v.uid);m=p=null}var m=this,p=m.getRuntime();if(e.isDetached()){var r=new g;r.bind("TransportingComplete",function(){h(r.result.getSource())});r.transport(e.getSource(),e.type,{ruid:p.uid})}else h(e.getSource())},
                loadFromImage:function(e){return this.getRuntime().shimExec.call(this,"Image","loadFromImage",e.uid)},getInfo:function(){var e=this.getRuntime(),h=e.shimExec.call(this,"Image","getInfo");return h.meta&&h.meta.thumb&&h.meta.thumb.data&&!(e.meta.thumb.data instanceof l)&&(h.meta.thumb.data=new l(e.uid,h.meta.thumb.data)),h},getAsBlob:function(e,h){var m=this.getRuntime();return(e=m.shimExec.call(this,"Image","getAsBlob",e,h))?new l(m.uid,e):null},getAsDataURL:function(){var e,h=this.getRuntime().Image.getAsBlob.apply(this,
                    arguments);return h?(e=new d,e.readAsDataURL(h)):null}}});k("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(f,n,g,l,d){function e(m){var p,r,v=!1,u=null,t=0;try{try{u=new ActiveXObject("AgControl.AgControl"),u.IsVersionSupported(m)&&(v=!0)}catch(D){var x=navigator.plugins["Silverlight Plug-In"];if(x){var E=x.description;"1.0.30226.2"===E&&(E="2.0.30226.2");for(p=E.split(".");3<p.length;)p.pop();
                for(;4>p.length;)p.push(0);for(r=m.split(".");4<r.length;)r.pop();do{var B=parseInt(r[t],10);var A=parseInt(p[t],10);t++}while(t<r.length&&B===A);A>=B&&!isNaN(B)&&(v=!0)}}}catch(D){v=!1}return v}var h={};return d.addConstructor("silverlight",function(m){var p,r=this;m=f.extend({xap_url:n.xap_url},m);d.call(this,m,"silverlight",{access_binary:d.capTrue,access_image_binary:d.capTrue,display_media:d.capTest(!!q["moxie/image/Image"]),do_cors:d.capTrue,drag_and_drop:!1,report_upload_progress:d.capTrue,
                resize_image:d.capTrue,return_response_headers:function(v){return v&&"client"===r.mode},return_response_type:function(v){return"json"!==v?!0:!!w.JSON},return_status_code:function(v){return"client"===r.mode||!f.arrayDiff(v,[200,404])},select_file:d.capTrue,select_multiple:d.capTrue,send_binary_string:d.capTrue,send_browser_cookies:function(v){return v&&"browser"===r.mode},send_custom_headers:function(v){return v&&"client"===r.mode},send_multipart:d.capTrue,slice_blob:d.capTrue,stream_upload:!0,summon_file_dialog:!1,
                upload_filesize:d.capTrue,use_http_method:function(v){return"client"===r.mode||!f.arrayDiff(v,["GET","POST"])}},{return_response_headers:function(v){return v?"client":"browser"},return_status_code:function(v){return f.arrayDiff(v,[200,404])?"client":["client","browser"]},send_browser_cookies:function(v){return v?"browser":"client"},send_custom_headers:function(v){return v?"client":"browser"},use_http_method:function(v){return f.arrayDiff(v,["GET","POST"])?"client":["client","browser"]}});e("2.0.31005.0")&&
            "Opera"!==n.browser||(this.mode=!1);f.extend(this,{getShim:function(){return g.get(this.uid).content.Moxie},shimExec:function(v,u){var t=[].slice.call(arguments,2);return r.getShim().exec(this.uid,v,u,t)},init:function(){this.getShimContainer().innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+m.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+
                    this.uid+",target="+d.getGlobalEventTarget()+'"/></object>';p=setTimeout(function(){r&&!r.initialized&&r.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))},"Windows"!==n.OS?1E4:5E3)},destroy:function(v){return function(){v.call(r);clearTimeout(p);m=p=v=r=null}}(this.destroy)},h)}),h});k("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(f,n,g){return f.Blob=n.extend({},g)});k("moxie/runtime/silverlight/file/FileInput",
                ["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(f,n,g,l){function d(e){for(var h="",m=0;m<e.length;m++)h+=(""!==h?"|":"")+e[m].title+" | *."+e[m].extensions.replace(/,/g,";*.");return h}return f.FileInput={init:function(e){var h=this,m=this.getRuntime(),p=g.get(e.browse_button);p&&(p.setAttribute("tabindex",-1),p=null);this.bind("Change",function(){var r=m.shimExec.call(h,"FileInput","getFiles");h.files=[];l.each(r,function(v){h.files.push(new n(m.uid,
                        v))})},999);m.shimExec.call(this,"FileInput","init",d(e.accept),e.multiple);this.trigger("ready")},setOption:function(e,h){"accept"==e&&(h=d(h));this.getRuntime().shimExec.call(this,"FileInput","setOption",e,h)}}});k("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(f,n,g){return f.FileDrop={init:function(){var l,d=this.getRuntime();return l=d.getShimContainer(),g.addEvent(l,"dragover",function(e){e.preventDefault();
                    e.stopPropagation();e.dataTransfer.dropEffect="copy"},this.uid),g.addEvent(l,"dragenter",function(e){e.preventDefault();n.get(d.uid).dragEnter(e)&&e.stopPropagation()},this.uid),g.addEvent(l,"drop",function(e){e.preventDefault();n.get(d.uid).dragDrop(e)&&e.stopPropagation()},this.uid),d.shimExec.call(this,"FileDrop","init")}}});k("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(f,n,g){return f.FileReader=
                n.extend({},g)});k("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(f,n,g){return f.FileReaderSync=n.extend({},g)});k("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(f,n,g){return f.Transporter=n.extend({},g)});k("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime",
                "moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(f,n,g){return f.XMLHttpRequest=n.extend({},g)});k("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(f,n,g,l){return f.Image=n.extend({},l,{getInfo:function(){var d=this.getRuntime(),e=["tiff","exif","gps","thumb"],h=
                    {meta:{}},m=d.shimExec.call(this,"Image","getInfo");return m.meta&&(n.each(e,function(p){var r,v,u=m.meta[p];if(u&&u.keys){h.meta[p]={};var t=0;for(r=u.keys.length;r>t;t++){var x=u.keys[t];(v=u[x])&&(/^(\d|[1-9]\d+)$/.test(v)?v=parseInt(v,10):/^\d*\.\d+$/.test(v)&&(v=parseFloat(v)),h.meta[p][x]=v)}}}),h.meta&&h.meta.thumb&&h.meta.thumb.data&&!(d.meta.thumb.data instanceof g)&&(h.meta.thumb.data=new g(d.uid,h.meta.thumb.data))),h.width=parseInt(m.width,10),h.height=parseInt(m.height,10),h.size=parseInt(m.size,
                    10),h.type=m.type,h.name=m.name,h},resize:function(d,e,h){this.getRuntime().shimExec.call(this,"Image","resize",d.x,d.y,d.width,d.height,e,h.preserveHeaders,h.resample)}})});k("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(f,n,g,l){var d={};return g.addConstructor("html4",function(e){var h=this,m=g.capTest,p=g.capTrue;g.call(this,e,"html4",{access_binary:m(w.FileReader||w.File&&File.getAsDataURL),access_image_binary:!1,
                display_media:m((l.can("create_canvas")||l.can("use_data_uri_over32kb"))&&!!q["moxie/image/Image"]),do_cors:!1,drag_and_drop:!1,filter_by_extension:m(!("Chrome"===l.browser&&l.verComp(l.version,28,"<")||"IE"===l.browser&&l.verComp(l.version,10,"<")||"Safari"===l.browser&&l.verComp(l.version,7,"<")||"Firefox"===l.browser&&l.verComp(l.version,37,"<"))),resize_image:function(){return d.Image&&h.can("access_binary")&&l.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(r){return"json"===
                r&&w.JSON?!0:!!~f.inArray(r,["text","document",""])},return_status_code:function(r){return!f.arrayDiff(r,[200,404])},select_file:function(){return l.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return h.can("select_file")},summon_file_dialog:function(){return h.can("select_file")&&!("Firefox"===l.browser&&l.verComp(l.version,4,"<")||"Opera"===l.browser&&l.verComp(l.version,12,"<")||"IE"===l.browser&&
                    l.verComp(l.version,10,"<"))},upload_filesize:p,use_http_method:function(r){return!f.arrayDiff(r,["GET","POST"])}});f.extend(this,{init:function(){this.trigger("Init")},destroy:function(r){return function(){r.call(h);r=h=null}}(this.destroy)});f.extend(this.getShim(),d)}),d});k("moxie/runtime/html4/file/FileInput","moxie/runtime/html4/Runtime moxie/file/File moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Events moxie/core/utils/Mime moxie/core/utils/Env".split(" "),function(f,n,g,l,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 d,e,h){return f.FileInput=function(){function m(){var t,x,E=this,B=E.getRuntime();var A=g.guid("uid_");var D=B.getShimContainer();p&&(x=l.get(p+"_form"),x&&(g.extend(x.style,{top:"100%"}),x.firstChild.setAttribute("tabindex",-1)));var G=document.createElement("form");G.setAttribute("id",A+"_form");G.setAttribute("method","post");G.setAttribute("enctype","multipart/form-data");G.setAttribute("encoding","multipart/form-data");g.extend(G.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",
                height:"100%"});var C=document.createElement("input");C.setAttribute("id",A);C.setAttribute("type","file");C.setAttribute("accept",u.join(","));B.can("summon_file_dialog")&&C.setAttribute("tabindex",-1);g.extend(C.style,{fontSize:"999px",opacity:0});G.appendChild(C);D.appendChild(G);g.extend(C.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});"IE"===h.browser&&h.verComp(h.version,10,"<")&&g.extend(C.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"});C.onchange=
                function(){var O;this.value&&(O=this.files?this.files[0]:{name:this.value},O=new n(B.uid,O),this.onchange=function(){},m.call(E),E.files=[O],C.setAttribute("id",O.uid),G.setAttribute("id",O.uid+"_form"),E.trigger("change"),C=G=null)};B.can("summon_file_dialog")&&(t=l.get(r.browse_button),d.removeEvent(t,"click",E.uid),d.addEvent(t,"click",function(O){C&&!C.disabled&&C.click();O.preventDefault()},E.uid));p=A;D=x=t=null}var p,r,v,u=[];g.extend(this,{init:function(t){var x=this,E=x.getRuntime();r=t;
                    u=e.extList2mimes(t.accept,E.can("filter_by_extension"));var B=E.getShimContainer();(function(){var A;var D=l.get(t.browse_button);v=l.getStyle(D,"z-index")||"auto";E.can("summon_file_dialog")?("static"===l.getStyle(D,"position")&&(D.style.position="relative"),x.bind("Refresh",function(){A=parseInt(v,10)||1;l.get(r.browse_button).style.zIndex=A;this.getRuntime().getShimContainer().style.zIndex=A-1})):D.setAttribute("tabindex",-1);D=E.can("summon_file_dialog")?D:B;d.addEvent(D,"mouseover",function(){x.trigger("mouseenter")},
                        x.uid);d.addEvent(D,"mouseout",function(){x.trigger("mouseleave")},x.uid);d.addEvent(D,"mousedown",function(){x.trigger("mousedown")},x.uid);d.addEvent(l.get(t.container),"mouseup",function(){x.trigger("mouseup")},x.uid);D=null})();m.call(this);B=null;x.trigger({type:"ready",async:!0})},setOption:function(t,x){var E=this.getRuntime();"accept"==t&&(u=x.mimes||e.extList2mimes(x,E.can("filter_by_extension")));(t=l.get(p))&&t.setAttribute("accept",u.join(","))},disable:function(t){var x;(x=l.get(p))&&
                (x.disabled=!!t)},destroy:function(){var t=this.getRuntime(),x=t.getShim();t=t.getShimContainer();var E=r&&l.get(r.container),B=r&&l.get(r.browse_button);E&&d.removeAllEvents(E,this.uid);B&&(d.removeAllEvents(B,this.uid),B.style.zIndex=v);t&&(d.removeAllEvents(t,this.uid),t.innerHTML="");x.removeInstance(this.uid);p=u=r=null}})}});k("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(f,n){return f.FileReader=n});k("moxie/runtime/html4/xhr/XMLHttpRequest",
                "moxie/runtime/html4/Runtime moxie/core/utils/Basic moxie/core/utils/Dom moxie/core/utils/Url moxie/core/Exceptions moxie/core/utils/Events moxie/file/Blob moxie/xhr/FormData".split(" "),function(f,n,g,l,d,e,h,m){return f.XMLHttpRequest=function(){function p(t){var x,E,B,A=this,D=!1;if(u){if(x=u.id.replace(/_iframe$/,""),E=g.get(x+"_form")){x=E.getElementsByTagName("input");for(B=x.length;B--;)switch(x[B].getAttribute("type")){case "hidden":x[B].parentNode.removeChild(x[B]);break;case "file":D=!0}x=
                    [];D||E.parentNode.removeChild(E);E=null}setTimeout(function(){e.removeEvent(u,"load",A.uid);u.parentNode&&u.parentNode.removeChild(u);var G=A.getRuntime().getShimContainer();G.children.length||G.parentNode.removeChild(G);u=null;t()},1)}}var r,v,u;n.extend(this,{send:function(t,x){var E,B,A,D,G=this,C=G.getRuntime();if(r=v=null,x instanceof m&&x.hasBlob()){if(D=x.getBlob(),E=D.uid,A=g.get(E),B=g.get(E+"_form"),!B)throw new d.DOMException(d.DOMException.NOT_FOUND_ERR);}else E=n.guid("uid_"),B=document.createElement("form"),
                        B.setAttribute("id",E+"_form"),B.setAttribute("method",t.method),B.setAttribute("enctype","multipart/form-data"),B.setAttribute("encoding","multipart/form-data"),C.getShimContainer().appendChild(B);B.setAttribute("target",E+"_iframe");x instanceof m&&x.each(function(O,U){if(O instanceof h)A&&A.setAttribute("name",U);else{var J=document.createElement("input");n.extend(J,{type:"hidden",name:U,value:O});A?B.insertBefore(J,A):B.appendChild(J)}});B.setAttribute("action",t.url);(function(){var O=C.getShimContainer()||
                        document.body,U=document.createElement("div");U.innerHTML='<iframe id="'+E+'_iframe" name="'+E+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';u=U.firstChild;O.appendChild(u);e.addEvent(u,"load",function(){try{var J=u.contentWindow.document||u.contentDocument||w.frames[u.id].document;/^4(0[0-9]|1[0-7]|2[2346])\s/.test(J.title)?r=J.title.replace(/^(\d+).*$/,"$1"):(r=200,v=n.trim(J.body.innerHTML),G.trigger({type:"progress",loaded:v.length,total:v.length}),D&&G.trigger({type:"uploadprogress",
                        loaded:D.size||1025,total:D.size||1025}))}catch(I){if(!l.hasSameOrigin(t.url))return p.call(G,function(){G.trigger("error")}),void 0;r=404}p.call(G,function(){G.trigger("load")})},G.uid)})();B.submit();G.trigger("loadstart")},getStatus:function(){return r},getResponse:function(t){if("json"===t&&"string"===n.typeOf(v)&&w.JSON)try{return JSON.parse(v.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(x){return null}return v},abort:function(){var t=this;u&&u.contentWindow&&(u.contentWindow.stop?
                        u.contentWindow.stop():u.contentWindow.document.execCommand?u.contentWindow.document.execCommand("Stop"):u.src="about:blank");p.call(this,function(){t.dispatchEvent("abort")})},destroy:function(){this.getRuntime().getShim().removeInstance(this.uid)}})}});k("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(f,n){return f.Image=n});(function(f){for(var n=0;n<f.length;n++){for(var g=a,l=f[n],d=l.split(/[.\/]/),e=0;e<d.length-1;++e)g[d[e]]===b&&
            (g[d[e]]={}),g=g[d[e]];g[d[d.length-1]]=q[l]}})("moxie/core/utils/Basic moxie/core/utils/Encode moxie/core/utils/Env moxie/core/Exceptions moxie/core/utils/Dom moxie/core/EventTarget moxie/runtime/Runtime moxie/runtime/RuntimeClient moxie/file/Blob moxie/core/I18n moxie/core/utils/Mime moxie/file/FileInput moxie/file/File moxie/file/FileDrop moxie/file/FileReader moxie/core/utils/Url moxie/runtime/RuntimeTarget moxie/xhr/FormData moxie/xhr/XMLHttpRequest moxie/image/Image moxie/core/utils/Events moxie/runtime/html5/image/ResizerCanvas".split(" "))}(this)});
        !function(a,b){var c=function(){var k={};return b.apply(k,arguments),k.plupload};"function"==typeof define&&define.amd?define("plupload",["./moxie"],c):"object"==typeof module&&module.exports?module.exports=c(require("./moxie")):a.plupload=c(a.moxie)}(this||w,function(a){!function(b,c,k){function q(e){function h(r,v,u){var t={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",
            drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};t[r]?p[t[r]]=v:u||(p[r]=v)}var m=e.required_features,p={};return"string"==typeof m?d.each(m.split(/\s*,\s*/),function(r){h(r,!0)}):"object"==typeof m?d.each(m,function(r,v){h(v,r)}):!0===m&&(e.chunk_size&&0<e.chunk_size&&(p.slice_blob=!0),d.isEmptyObj(e.resize)&&!1!==e.multipart||(p.send_binary_string=!0),e.http_method&&(p.use_http_method=
            e.http_method),d.each(e,function(r,v){h(v,!!r,!0)})),p}var f=w.setTimeout,n={},g=c.core.utils,l=c.runtime.Runtime,d={VERSION:"2.3.6",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,moxie:c,mimeTypes:g.Mime.mimes,ua:g.Env,typeOf:g.Basic.typeOf,extend:g.Basic.extend,
            guid:g.Basic.guid,getAll:function(e){var h,m=[];"array"!==d.typeOf(e)&&(e=[e]);for(var p=e.length;p--;)(h=d.get(e[p]))&&m.push(h);return m.length?m:null},get:g.Dom.get,each:g.Basic.each,getPos:g.Dom.getPos,getSize:g.Dom.getSize,xmlEncode:function(e){var h={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},m=/[<>&"']/g;return e?(""+e).replace(m,function(p){return h[p]?"&"+h[p]+";":p}):e},toArray:g.Basic.toArray,inArray:g.Basic.inArray,inSeries:g.Basic.inSeries,addI18n:c.core.I18n.addI18n,translate:c.core.I18n.translate,
            sprintf:g.Basic.sprintf,isEmptyObj:g.Basic.isEmptyObj,hasClass:g.Dom.hasClass,addClass:g.Dom.addClass,removeClass:g.Dom.removeClass,getStyle:g.Dom.getStyle,addEvent:g.Events.addEvent,removeEvent:g.Events.removeEvent,removeAllEvents:g.Events.removeAllEvents,cleanName:function(e){var h;var m=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,
                "U",/[\371-\374]/g,"u"];for(h=0;h<m.length;h+=2)e=e.replace(m[h],m[h+1]);return e=e.replace(/\s+/g,"_"),e.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,h){var m="";return d.each(h,function(p,r){m+=(m?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(p)}),m&&(e+=(0<e.indexOf("?")?"&":"?")+m),e},formatSize:function(e){function h(p,r){return Math.round(p*Math.pow(10,r))/Math.pow(10,r)}if(e===k||/\D/.test(e))return d.translate("N/A");var m=Math.pow(1024,4);return e>m?h(e/m,1)+" "+d.translate("tb"):
                e>(m/=1024)?h(e/m,1)+" "+d.translate("gb"):e>(m/=1024)?h(e/m,1)+" "+d.translate("mb"):1024<e?Math.round(e/1024)+" "+d.translate("kb"):e+" "+d.translate("b")},parseSize:g.Basic.parseSizeStr,predictRuntime:function(e,h){var m,p;return m=new d.Uploader(e),p=l.thatCan(m.getOption().required_features,h||e.runtimes),m.destroy(),p},addFileFilter:function(e,h){n[e]=h}};d.addFileFilter("mime_types",function(e,h,m){e.length&&!e.regexp.test(h.name)?(this.trigger("Error",{code:d.FILE_EXTENSION_ERROR,message:d.translate("File extension error."),
            file:h}),m(!1)):m(!0)});d.addFileFilter("max_file_size",function(e,h,m){e=d.parseSize(e);void 0!==h.size&&e&&h.size>e?(this.trigger("Error",{code:d.FILE_SIZE_ERROR,message:d.translate("File size error."),file:h}),m(!1)):m(!0)});d.addFileFilter("prevent_duplicates",function(e,h,m){if(e)for(e=this.files.length;e--;)if(h.name===this.files[e].name&&h.size===this.files[e].size)return this.trigger("Error",{code:d.FILE_DUPLICATE_ERROR,message:d.translate("Duplicate file error."),file:h}),m(!1),void 0;m(!0)});
            d.addFileFilter("prevent_empty",function(e,h,m){e&&!h.size&&h.size!==k?(this.trigger("Error",{code:d.FILE_SIZE_ERROR,message:d.translate("File size error."),file:h}),m(!1)):m(!0)});d.Uploader=function(e){function h(){var K,P,ea=0;if(this.state==d.STARTED){for(P=0;P<ja.length;P++)K||ja[P].status!=d.QUEUED?ea++:(K=ja[P],this.trigger("BeforeUpload",K)&&(K.status=d.UPLOADING,this.trigger("UploadFile",K)));ea==ja.length&&(this.state!==d.STOPPED&&(this.state=d.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",
                ja))}}function m(K){K.percent=0<K.size?Math.ceil(K.loaded/K.size*100):100;p()}function p(){var K,P,ea=0;Fa.reset();for(K=0;K<ja.length;K++){var ia=ja[K];ia.size!==k?(Fa.size+=ia.origSize,P=ia.loaded*ia.origSize/ia.size,(!ia.completeTimestamp||ia.completeTimestamp>J)&&(ea+=P),Fa.loaded+=P):Fa.size=k;ia.status==d.DONE?Fa.uploaded++:ia.status==d.FAILED?Fa.failed++:Fa.queued++}Fa.size===k?Fa.percent=0<ja.length?Math.ceil(Fa.uploaded/ja.length*100):0:(Fa.bytesPerSec=Math.ceil(ea/((+new Date-J||1)/1E3)),
                Fa.percent=0<Fa.size?Math.ceil(Fa.loaded/Fa.size*100):0)}function r(){var K=ra[0]||Ea[0];return K?K.getRuntime().uid:!1}function v(){this.bind("FilesAdded FilesRemoved",function(K){K.trigger("QueueChanged");K.refresh()});this.bind("CancelUpload",G);this.bind("BeforeUpload",E);this.bind("UploadFile",B);this.bind("UploadProgress",A);this.bind("StateChanged",D);this.bind("QueueChanged",p);this.bind("Error",O);this.bind("FileUploaded",C);this.bind("Destroy",U)}function u(K,P){var ea=this,ia=0,ma=[],Da=
                {runtime_order:K.runtimes,required_caps:K.required_features,preferred_caps:wa,swf_url:K.flash_swf_url,xap_url:K.silverlight_xap_url};d.each(K.runtimes.split(/\s*,\s*/),function(R){K[R]&&(Da[R]=K[R])});K.browse_button&&d.each(K.browse_button,function(R){ma.push(function(X){var na=new c.file.FileInput(d.extend({},Da,{accept:K.filters.mime_types,name:K.file_data_name,multiple:K.multi_selection,container:K.container,browse_button:R}));na.onready=function(){var fa=l.getInfo(this.ruid);d.extend(ea.features,
                {chunks:fa.can("slice_blob"),multipart:fa.can("send_multipart"),multi_selection:fa.can("select_multiple")});ia++;ra.push(this);X()};na.onchange=function(){ea.addFile(this.files)};na.bind("mouseenter mouseleave mousedown mouseup",function(fa){Ha||(K.browse_button_hover&&("mouseenter"===fa.type?d.addClass(R,K.browse_button_hover):"mouseleave"===fa.type&&d.removeClass(R,K.browse_button_hover)),K.browse_button_active&&("mousedown"===fa.type?d.addClass(R,K.browse_button_active):"mouseup"===fa.type&&d.removeClass(R,
                K.browse_button_active)))});na.bind("mousedown",function(){ea.trigger("Browse")});na.bind("error runtimeerror",function(){na=null;X()});na.init()})});K.drop_element&&d.each(K.drop_element,function(R){ma.push(function(X){var na=new c.file.FileDrop(d.extend({},Da,{drop_zone:R}));na.onready=function(){var fa=l.getInfo(this.ruid);d.extend(ea.features,{chunks:fa.can("slice_blob"),multipart:fa.can("send_multipart"),dragdrop:fa.can("drag_and_drop")});ia++;Ea.push(this);X()};na.ondrop=function(){ea.addFile(this.files)};
                na.bind("error runtimeerror",function(){na=null;X()});na.init()})});d.inSeries(ma,function(){"function"==typeof P&&P(ia)})}function t(K,P,ea,ia){var ma=new c.image.Image;try{ma.onload=function(){P.width>this.width&&P.height>this.height&&P.quality===k&&P.preserve_headers&&!P.crop?(this.destroy(),ia(K)):ma.downsize(P.width,P.height,P.crop,P.preserve_headers)},ma.onresize=function(){var Da=this.getAsBlob(K.type,P.quality);this.destroy();ia(Da)},ma.bind("error runtimeerror",function(){this.destroy();
                ia(K)}),ma.load(K,ea)}catch(Da){ia(K)}}function x(K,P,ea){function ia(R,X,na){var fa=xa[R];switch(R){case "max_file_size":"max_file_size"===R&&(xa.max_file_size=xa.filters.max_file_size=X);break;case "chunk_size":(X=d.parseSize(X))&&(xa[R]=X,xa.send_file_name=!0);break;case "multipart":(xa[R]=X)||(xa.send_file_name=!0);break;case "http_method":xa[R]="PUT"===X.toUpperCase()?"PUT":"POST";break;case "unique_names":(xa[R]=X)&&(xa.send_file_name=!0);break;case "filters":"array"===d.typeOf(X)&&(X={mime_types:X});
                na?d.extend(xa.filters,X):xa.filters=X;X.mime_types&&("string"===d.typeOf(X.mime_types)&&(X.mime_types=c.core.utils.Mime.mimes2extList(X.mime_types)),X.mime_types.regexp=function(La){var oa=[];return d.each(La,function(Pa){d.each(Pa.extensions.split(/,/),function(Ra){/^\s*\*\s*$/.test(Ra)?oa.push("\\.*"):oa.push("\\."+Ra.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+oa.join("|")+")$","i")}(X.mime_types),xa.filters.mime_types=X.mime_types);break;
                case "resize":xa.resize=X?d.extend({preserve_headers:!0,crop:!1},X):!1;break;case "prevent_duplicates":xa.prevent_duplicates=xa.filters.prevent_duplicates=!!X;break;case "container":case "browse_button":case "drop_element":X="container"===R?d.get(X):d.getAll(X);case "runtimes":case "multi_selection":case "flash_swf_url":case "silverlight_xap_url":xa[R]=X;na||(Da=!0);break;default:xa[R]=X}na||ma.trigger("OptionChanged",R,X,fa)}var ma=this,Da=!1;"object"==typeof K?d.each(K,function(R,X){ia(X,R,ea)}):
                ia(K,P,ea);ea?(xa.required_features=q(d.extend({},xa)),wa=q(d.extend({},xa,{required_features:!0}))):Da&&(ma.trigger("Destroy"),u.call(ma,xa,function(R){R?(ma.runtime=l.getInfo(r()).type,ma.trigger("Init",{runtime:ma.runtime}),ma.trigger("PostInit")):ma.trigger("Error",{code:d.INIT_ERROR,message:d.translate("Init error.")})}))}function E(K,P){if(K.settings.unique_names){K=P.name.match(/\.([^.]+)$/);var ea="part";K&&(ea=K[1]);P.target_name=P.id+"."+ea}}function B(K,P){function ea(){0<X--?f(ia,1E3):
                (P.loaded=fa,K.trigger("Error",{code:d.HTTP_ERROR,message:d.translate("HTTP Error."),file:P,response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()}))}function ia(){var Pa,Ra,Ua={};P.status===d.UPLOADING&&K.state!==d.STOPPED&&(K.settings.send_file_name&&(Ua.name=P.target_name||P.name),R&&na.chunks&&oa.size>R?(Ra=Math.min(R,oa.size-fa),Pa=oa.slice(fa,fa+Ra)):(Ra=oa.size,Pa=oa),R&&na.chunks&&(K.settings.send_chunk_number?(Ua.chunk=Math.ceil(fa/R),Ua.chunks=Math.ceil(oa.size/
                R)):(Ua.offset=fa,Ua.total=oa.size)),K.trigger("BeforeChunkUpload",P,Ua,Pa,fa)&&ma(Ua,Pa,Ra))}function ma(Pa,Ra,Ua){var Bb;I=new c.xhr.XMLHttpRequest;I.upload&&(I.upload.onprogress=function(mb){P.loaded=Math.min(P.size,fa+mb.loaded);K.trigger("UploadProgress",P)});I.onload=function(){return 200>I.status||400<=I.status?(ea(),void 0):(X=K.settings.max_retries,Ua<oa.size?(Ra.destroy(),fa+=Ua,P.loaded=Math.min(fa,oa.size),K.trigger("ChunkUploaded",P,{offset:P.loaded,total:oa.size,response:I.responseText,
                status:I.status,responseHeaders:I.getAllResponseHeaders()}),"Android Browser"===d.ua.browser&&K.trigger("UploadProgress",P)):P.loaded=P.size,Ra=Bb=null,!fa||fa>=oa.size?(P.size!=P.origSize&&(oa.destroy(),oa=null),K.trigger("UploadProgress",P),P.status=d.DONE,P.completeTimestamp=+new Date,K.trigger("FileUploaded",P,{response:I.responseText,status:I.status,responseHeaders:I.getAllResponseHeaders()})):f(ia,1),void 0)};I.onerror=function(){ea()};I.onloadend=function(){this.destroy()};K.settings.multipart&&
            na.multipart?(I.open(K.settings.http_method,Da,!0),d.each(K.settings.headers,function(mb,Cb){I.setRequestHeader(Cb,mb)}),Bb=new c.xhr.FormData,d.each(d.extend(Pa,K.settings.multipart_params),function(mb,Cb){Bb.append(Cb,mb)}),Bb.append(K.settings.file_data_name,Ra),I.send(Bb,La)):(Da=d.buildUrl(K.settings.url,d.extend(Pa,K.settings.multipart_params)),I.open(K.settings.http_method,Da,!0),d.each(K.settings.headers,function(mb,Cb){I.setRequestHeader(Cb,mb)}),I.hasRequestHeader("Content-Type")||I.setRequestHeader("Content-Type",
                "application/octet-stream"),I.send(Ra,La))}var Da=K.settings.url,R=K.settings.chunk_size,X=K.settings.max_retries,na=K.features,fa=0,La={runtime_order:K.settings.runtimes,required_caps:K.settings.required_features,preferred_caps:wa,swf_url:K.settings.flash_swf_url,xap_url:K.settings.silverlight_xap_url};P.loaded&&(fa=P.loaded=R?R*Math.floor(P.loaded/R):0);var oa=P.getSource();d.isEmptyObj(K.settings.resize)||-1===d.inArray(oa.type,["image/jpeg","image/png"])?ia():t(oa,K.settings.resize,La,function(Pa){oa=
                Pa;P.size=Pa.size;ia()})}function A(K,P){m(P)}function D(K){if(K.state==d.STARTED)J=+new Date;else if(K.state==d.STOPPED)for(var P=K.files.length-1;0<=P;P--)K.files[P].status==d.UPLOADING&&(K.files[P].status=d.QUEUED,p())}function G(){I&&I.abort()}function C(K){p();f(function(){h.call(K)},1)}function O(K,P){P.code===d.INIT_ERROR?K.destroy():P.code===d.HTTP_ERROR&&(P.file.status=d.FAILED,P.file.completeTimestamp=+new Date,m(P.file),K.state==d.STARTED&&(K.trigger("CancelUpload"),f(function(){h.call(K)},
                1)))}function U(K){K.stop();d.each(ja,function(P){P.destroy()});ja=[];ra.length&&(d.each(ra,function(P){P.destroy()}),ra=[]);Ea.length&&(d.each(Ea,function(P){P.destroy()}),Ea=[]);wa={};Ha=!1;J=I=null;Fa.reset()}var J,I,la=d.guid(),ja=[],wa={},ra=[],Ea=[],Ha=!1;var xa={chunk_size:0,file_data_name:"file",filters:{mime_types:[],max_file_size:0,prevent_duplicates:!1,prevent_empty:!0},flash_swf_url:"js/Moxie.swf",http_method:"POST",max_retries:0,multipart:!0,multi_selection:!0,resize:!1,runtimes:l.order,
                send_file_name:!0,send_chunk_number:!0,silverlight_xap_url:"js/Moxie.xap"};x.call(this,e,null,!0);var Fa=new d.QueueProgress;d.extend(this,{id:la,uid:la,state:d.STOPPED,features:{},runtime:null,files:ja,settings:xa,total:Fa,init:function(){var K,P,ea=this;return K=ea.getOption("preinit"),"function"==typeof K?K(ea):d.each(K,function(ia,ma){ea.bind(ma,ia)}),v.call(ea),d.each(["container","browse_button","drop_element"],function(ia){return null===ea.getOption(ia)?(P={code:d.INIT_ERROR,message:d.sprintf(d.translate("%s specified, but cannot be found."),
                        ia)},!1):void 0}),P?ea.trigger("Error",P):xa.browse_button||xa.drop_element?(u.call(ea,xa,function(ia){var ma=ea.getOption("init");"function"==typeof ma?ma(ea):d.each(ma,function(Da,R){ea.bind(R,Da)});ia?(ea.runtime=l.getInfo(r()).type,ea.trigger("Init",{runtime:ea.runtime}),ea.trigger("PostInit")):ea.trigger("Error",{code:d.INIT_ERROR,message:d.translate("Init error.")})}),void 0):ea.trigger("Error",{code:d.INIT_ERROR,message:d.translate("You must specify either browse_button or drop_element.")})},
                setOption:function(K,P){x.call(this,K,P,!this.runtime)},getOption:function(K){return K?xa[K]:xa},refresh:function(){ra.length&&d.each(ra,function(K){K.trigger("Refresh")});this.trigger("Refresh")},start:function(){this.state!=d.STARTED&&(this.state=d.STARTED,this.trigger("StateChanged"),h.call(this))},stop:function(){this.state!=d.STOPPED&&(this.state=d.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(K){Ha=K!==k?K:!0;ra.length&&d.each(ra,function(P){P.disable(Ha)});
                    this.trigger("DisableBrowse",Ha)},getFile:function(K){var P;for(P=ja.length-1;0<=P;P--)if(ja[P].id===K)return ja[P]},addFile:function(K,P){function ea(na,fa){var La=[];d.each(ma.settings.filters,function(oa,Pa){n[Pa]&&La.push(function(Ra){n[Pa].call(ma,oa,na,function(Ua){Ra(!Ua)})})});d.inSeries(La,fa)}function ia(na){var fa=d.typeOf(na);if(na instanceof c.file.File){if(!na.ruid&&!na.isDetached()){if(!X)return!1;na.ruid=X;na.connectRuntime(X)}ia(new d.File(na))}else na instanceof c.file.Blob?(ia(na.getSource()),
                    na.destroy()):na instanceof d.File?(P&&(na.name=P),Da.push(function(La){ea(na,function(oa){oa||(ja.push(na),R.push(na),ma.trigger("FileFiltered",na));f(La,1)})})):-1!==d.inArray(fa,["file","blob"])?ia(new c.file.File(null,na)):"node"===fa&&"filelist"===d.typeOf(na.files)?d.each(na.files,ia):"array"===fa&&(P=null,d.each(na,ia))}var ma=this,Da=[],R=[];var X=r();ia(K);Da.length&&d.inSeries(Da,function(){R.length&&ma.trigger("FilesAdded",R)})},removeFile:function(K){K="string"==typeof K?K:K.id;for(var P=
                    ja.length-1;0<=P;P--)if(ja[P].id===K)return this.splice(P,1)[0]},splice:function(K,P){K=ja.splice(K===k?0:K,P===k?ja.length:P);var ea=!1;return this.state==d.STARTED&&(d.each(K,function(ia){return ia.status===d.UPLOADING?(ea=!0,!1):void 0}),ea&&this.stop()),this.trigger("FilesRemoved",K),d.each(K,function(ia){ia.destroy()}),ea&&this.start(),K},dispatchEvent:function(K){var P;if(K=K.toLowerCase(),P=this.hasEventListener(K)){P.sort(function(ma,Da){return Da.priority-ma.priority});var ea=[].slice.call(arguments);
                    ea.shift();ea.unshift(this);for(var ia=0;ia<P.length;ia++)if(!1===P[ia].fn.apply(P[ia].scope,ea))return!1}return!0},bind:function(K,P,ea,ia){d.Uploader.prototype.bind.call(this,K,P,ia,ea)},destroy:function(){this.trigger("Destroy");xa=Fa=null;this.unbindAll()}})};d.Uploader.prototype=c.core.EventTarget.instance;d.File=function(){var e={};return function(h){d.extend(this,{id:d.guid(),name:h.name||h.fileName,type:h.type||"",relativePath:h.relativePath||"",size:h.fileSize||h.size,origSize:h.fileSize||
                    h.size,loaded:0,percent:0,status:d.QUEUED,lastModifiedDate:h.lastModifiedDate||(new Date).toLocaleString(),completeTimestamp:0,getNative:function(){var m=this.getSource().getSource();return-1!==d.inArray(d.typeOf(m),["blob","file"])?m:null},getSource:function(){return e[this.id]?e[this.id]:null},destroy:function(){var m=this.getSource();m&&(m.destroy(),delete e[this.id])}});e[this.id]=h}}();d.QueueProgress=function(){var e=this;e.size=0;e.loaded=0;e.uploaded=0;e.failed=0;e.queued=0;e.percent=0;e.bytesPerSec=
                0;e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}};b.plupload=d}(this,a)});plupload.addI18n({"Stop Upload":"\u505c\u6b62\u4e0a\u4f20","Upload URL might be wrong or doesn't exist.":"\u4e0a\u4f20\u7684URL\u53ef\u80fd\u662f\u9519\u8bef\u7684\u6216\u4e0d\u5b58\u5728\u3002",tb:"tb",Size:"\u5927\u5c0f",Close:"\u5173\u95ed","You must specify either browse_button or drop_element.":"\u60a8\u5fc5\u987b\u6307\u5b9a browse_button \u6216\u8005 drop_element\u3002","Init error.":"\u521d\u59cb\u5316\u9519\u8bef\u3002",
            "Add files to the upload queue and click the start button.":"\u5c06\u6587\u4ef6\u6dfb\u52a0\u5230\u4e0a\u4f20\u961f\u5217\uff0c\u7136\u540e\u70b9\u51fb\u201d\u5f00\u59cb\u4e0a\u4f20\u201c\u6309\u94ae\u3002",List:"\u5217\u8868",Filename:"\u6587\u4ef6\u540d","%s specified, but cannot be found.":"%s \u5df2\u6307\u5b9a\uff0c\u4f46\u662f\u6ca1\u6709\u627e\u5230\u3002","Image format either wrong or not supported.":"\u56fe\u7247\u683c\u5f0f\u9519\u8bef\u6216\u8005\u4e0d\u652f\u6301\u3002",Status:"\u72b6\u6001",
            "HTTP Error.":"HTTP \u9519\u8bef\u3002","Start Upload":"\u5f00\u59cb\u4e0a\u4f20","Error: File too large:":"\u9519\u8bef: \u6587\u4ef6\u592a\u5927:",kb:"kb","Duplicate file error.":"\u91cd\u590d\u6587\u4ef6\u9519\u8bef\u3002","File size error.":"\u6587\u4ef6\u5927\u5c0f\u9519\u8bef\u3002","N/A":"N/A",gb:"gb","Error: Invalid file extension:":"\u9519\u8bef\uff1a\u65e0\u6548\u7684\u6587\u4ef6\u6269\u5c55\u540d:","Select files":"\u9009\u62e9\u6587\u4ef6","%s already present in the queue.":"%s \u5df2\u7ecf\u5728\u5f53\u524d\u961f\u5217\u91cc\u3002",
            "Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.":"\u8d85\u9650\u3002<b>%s</b> \u652f\u6301\u6700\u5927 %wx%hpx \u7684\u56fe\u7247\u3002","File: %s":"\u6587\u4ef6: %s",b:"b","Uploaded %d/%d files":"\u5df2\u4e0a\u4f20 %d/%d \u4e2a\u6587\u4ef6","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"\u6bcf\u6b21\u53ea\u63a5\u53d7\u540c\u65f6\u4e0a\u4f20 %d \u4e2a\u6587\u4ef6\uff0c\u591a\u4f59\u7684\u6587\u4ef6\u5c06\u4f1a\u88ab\u5220\u9664\u3002",
            "%d files queued":"%d \u4e2a\u6587\u4ef6\u52a0\u5165\u5230\u961f\u5217","File: %s, size: %d, max file size: %d":"\u6587\u4ef6: %s, \u5927\u5c0f: %d, \u6700\u5927\u6587\u4ef6\u5927\u5c0f: %d",Thumbnails:"\u7f29\u7565\u56fe","Drag files here.":"\u628a\u6587\u4ef6\u62d6\u5230\u8fd9\u91cc\u3002","Runtime ran out of available memory.":"\u8fd0\u884c\u65f6\u5df2\u6d88\u8017\u6240\u6709\u53ef\u7528\u5185\u5b58\u3002","File count error.":"\u6587\u4ef6\u6570\u91cf\u9519\u8bef\u3002","File extension error.":"\u6587\u4ef6\u6269\u5c55\u540d\u9519\u8bef\u3002",
            mb:"mb","Add Files":"\u589e\u52a0\u6587\u4ef6"});ka(Xb,{alert:function(a){var b=y.dialog({width:300,height:150,title:"\u63d0\u793a",themeType:"simple",body:'<div style="padding:20px;">'+a+"</div>",z:19890323,closeBtn:{name:"\u5173\u95ed",click:function(c){b.remove()}},noBtn:{name:"\u53d6\u6d88",click:function(c){b.remove()}}});return b},init:function(a){var b=this,c=a.button,k=a.fieldName||"file",q=a.url||"",f=a.fileUploadLimit||1,n=a.autoUpload||!0;a.afterError=a.afterError||function(l){b.alert(l)};
                var g=y.createDialog({title:"\u4e0a\u4f20\u6587\u4ef6",width:450});b.uploader=new plupload.Uploader({browse_button:c,url:q,file_data_name:k,flash_swf_url:b.pluginsPath+"upload/Moxie.swf",silverlight_xap_url:b.pluginsPath+"upload/Moxie.xap",multi_selection:!1,filters:{prevent_duplicates:!0,max_file_size:a.fileSizeLimit,mime_types:[{title:"\u56fe\u7247\u6587\u4ef6",extensions:"jpg,jpeg,png,bmp"}]},init:{FilesAdded:function(l,d){plupload.each(d,function(e){e.size=plupload.formatSize(e.size)});if(b.uploader.files.length>
                            f){for(l=b.uploader.files.length-f;0<l;l--)b.uploader.files.pop();b.alert("\u53ea\u80fd\u4e0a\u4f20"+f+"\u4e2a\u6587\u4ef6\uff0c\u5df2\u81ea\u52a8\u5220\u9664\u591a\u4f59\u6587\u4ef6\uff01")}else n&&(b.uploader.start(),g.showLoading(b.lang("uploadLoading")))},UploadProgress:function(l,d){console.log("progress: ",d)},FileUploaded:function(l,d,e){console.log("file: ",d);console.log("Info: ",e);g.hideLoading();b.uploader.removeFile(d);l={};try{l=y.json(e.response)}catch(h){a.afterError.call(this,e.response)}0!==
                        l.error?a.afterError.call(this,l.message):a.afterUpload.call(b,l)},Error:function(l,d){a.afterError.call(this,d)}}});b.uploader.init()}});y.UploadButtonClass=Xb;y.uploadbutton=function(a){return new Xb(a)};ka(xb,fb,{init:function(a){var b=W(a.shadowMode,!0);a.z=a.z||811213;a.shadowMode=!1;a.autoScroll=W(a.autoScroll,!0);xb.parent.init.call(this,a);var c=a.title,k=y(a.body,this.doc),q=a.previewBtn,f=a.yesBtn,n=a.noBtn,g=a.closeBtn,l=W(a.showMask,!0);this.div.addClass("ke-dialog").bind("click,mousedown",
                function(h){h.stopPropagation()});var d=y('<div class="ke-dialog-content"></div>').appendTo(this.div);Ca&&7>Oa?this.iframeMask=y('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(this.div):b&&y('<div class="ke-dialog-shadow"></div>').appendTo(this.div);b=y('<div class="ke-dialog-header"></div>');d.append(b);b.html(c);this.closeIcon=y('<span class="ke-dialog-icon-close" title="'+g.name+'"></span>').click(g.click);b.append(this.closeIcon);this.draggable({clickEl:b,beforeDrag:a.beforeDrag});
                a=y('<div class="ke-dialog-body"></div>');d.append(a);a.append(k);var e=y('<div class="ke-dialog-footer"></div>');(q||f||n)&&d.append(e);H([{btn:q,name:"preview"},{btn:f,name:"yes"},{btn:n,name:"no"}],function(){if(this.btn){var h=this.btn;h=h||{};var m=h.name||"",p=y('<span class="ke-button-common ke-button-outer" title="'+m+'"></span>');m=y('<input class="ke-button-common ke-button" type="button" value="'+m+'" />');h.click&&m.click(h.click);p.append(m);p.addClass("ke-dialog-"+this.name);e.append(p)}});
                this.height&&a.height(M(this.height)-b.height()-e.height());this.div.width(this.div.width());this.div.height(this.div.height());this.mask=null;l&&(k=Wa(this.doc),this.mask=Ub({x:0,y:0,z:this.z-1,cls:"ke-dialog-mask",width:Math.max(k.scrollWidth,k.clientWidth),height:Math.max(k.scrollHeight,k.clientHeight)}));this.autoPos(this.div.width(),this.div.height());this.footerDiv=e;this.bodyDiv=a;this.headerDiv=b;this.isLoading=!1},setMaskIndex:function(a){this.mask.div.css("z-index",a)},showLoading:function(a){a=
                W(a,"");var b=this.bodyDiv;this.loading=y('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(b.height()/3)+'px;">'+a+"</div></div>").width(b.width()).height(b.height()).css("top",this.headerDiv.height()+"px");b.css("visibility","hidden").after(this.loading);this.isLoading=!0;return this},hideLoading:function(){this.loading&&this.loading.remove();this.bodyDiv.css("visibility","visible");this.isLoading=!1;return this},remove:function(){this.options.beforeRemove&&
            this.options.beforeRemove.call(this);this.mask&&this.mask.remove();this.iframeMask&&this.iframeMask.remove();this.closeIcon.unbind();y("input",this.div).unbind();y("button",this.div).unbind();this.footerDiv.unbind();this.bodyDiv.unbind();this.headerDiv.unbind();y("iframe",this.div).each(function(){y(this).remove()});xb.parent.remove.call(this);return this}});y.DialogClass=xb;y.dialog=rc;y.tabs=function(a){var b=Ub(a),c=b.remove,k=a.afterSelect;a=b.div;var q=[];a.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",
            function(n){n.preventDefault()});var f=y('<ul class="ke-tabs-ul ke-clearfix"></ul>');a.append(f);b.add=function(n){var g=y('<li class="ke-tabs-li">'+n.title+"</li>");g.data("tab",n);q.push(g);f.append(g)};b.selectedIndex=0;b.select=function(n){b.selectedIndex=n;H(q,function(g,l){l.unbind();g===n?(l.addClass("ke-tabs-li-selected"),y(l.data("tab").panel).show("")):(l.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){y(this).addClass("ke-tabs-li-on")}).mouseout(function(){y(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(g)}),
            y(l.data("tab").panel).hide())});k&&k.call(b,n)};b.remove=function(){H(q,function(){this.remove()});f.remove();c.call(b)};return b};y.loadScript=Yb;y.loadStyle=Zb;y.ajax=function(a,b,c,k,q){c=c||"GET";q=q||"json";var f=w.XMLHttpRequest?new w.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open(c,a,!0);f.onreadystatechange=function(){if(4==f.readyState&&200==f.status&&b){var g=Y(f.responseText);"json"==q&&(g=ca(g));b(g)}};if("POST"==c){var n=[];H(k,function(g,l){n.push(encodeURIComponent(g)+
            "="+encodeURIComponent(l))});try{f.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(g){}f.send(n.join("&"))}else f.send(null)};var $a={},ab={};yb.prototype={lang:function(a){return vc(a,this.langType)},loadPlugin:function(a,b){var c=this,k=this._pluginStatus;k||(k=this._pluginStatus={});if($a[a]){if(!V($a[a]))return setTimeout(function(){c.loadPlugin(a,b)},100),c;k[a]||($a[a].call(c,KindEditor),k[a]="inited");b&&b.call(c);return c}$a[a]="loading";Yb(c.pluginsPath+a+"/"+a+
                ".js?ver="+encodeURIComponent(y.DEBUG?Gb:"5.0.2 (2020-12-08)"),function(){setTimeout(function(){$a[a]&&c.loadPlugin(a,b)},0)});return c},handler:function(a,b){var c=this;c._handlers[a]||(c._handlers[a]=[]);if(V(b))return c._handlers[a].push(b),c;H(c._handlers[a],function(){b=this.call(c,b)});return b},clickToolbar:function(a,b){var c=this,k="clickToolbar"+a;if(b===z){if(c._handlers[k])return c.handler(k);c.loadPlugin(a,function(){c.handler(k)});return c}return c.handler(k,b)},updateState:function(){var a=
                this;H("justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist subscript superscript bold italic underline strikethrough".split(" "),function(b,c){a.cmd.state(c)?a.toolbar.select(c):a.toolbar.unselect(c)});return a},addContextmenu:function(a){this._contextmenus.push(a);return this},afterCreate:function(a){return this.handler("afterCreate",a)},beforeRemove:function(a){return this.handler("beforeRemove",a)},beforeGetHtml:function(a){return this.handler("beforeGetHtml",
                a)},beforeSetHtml:function(a){return this.handler("beforeSetHtml",a)},afterSetHtml:function(a){return this.handler("afterSetHtml",a)},create:function(){function a(){0===l.height()?setTimeout(a,100):b.resize(k,q,!1)}var b=this,c=b.fullscreenMode;if(b.isCreated||b.srcElement.data("kindeditor"))return b;b.srcElement.data("kindeditor","true");c?Wa().style.overflow="hidden":Wa().style.overflow="";var k=c?Wa().clientWidth+"px":b.width,q=c?Wa().clientHeight+"px":b.height;if(Ca&&8>Oa||cb)q=L(M(q)+2);var f=
                b.container=y(b.layout);c?y(document.body).append(f):b.srcElement.before(f);var n=y(".toolbar",f),g=y(".edit",f),l=b.statusbar=y(".statusbar",f);f.removeClass("container").addClass("ke-container ke-container-"+b.themeType).css("width",k);c?(f.css({position:"absolute",left:0,top:0,"z-index":811211}),lb||(b._scrollPos=pb()),w.scrollTo(0,0),y(document.body).css({height:"1px",overflow:"hidden"}),y(document.body.parentNode).css("overflow","hidden"),b._fullscreenExecuted=!0):(b._fullscreenExecuted&&(y(document.body).css({height:"",
                overflow:""}),y(document.body.parentNode).css("overflow","")),b._scrollPos&&w.scrollTo(b._scrollPos.x,b._scrollPos.y));var d=[];y.each(b.items,function(m,p){"|"==p?d.push('<span class="ke-inline-block ke-separator"></span>'):"/"==p?d.push('<div class="ke-hr"></div>'):(d.push('<span class="ke-outline" data-name="'+p+'" title="'+b.lang(p)+'" unselectable="on">'),d.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+p+'" unselectable="on"></span></span>'))});n=b.toolbar=pc({src:n,html:d.join(""),
                noDisableItems:b.noDisableItems,click:function(m,p){m.stop();if(b.menu&&(m=b.menu.name,b.hideMenu(),m===p))return;b.clickToolbar(p)}});var e=M(q)-n.div.height(),h=b.edit=nc({height:0<e&&M(q)>b.minHeight?e:b.minHeight,src:g,srcElement:b.srcElement,designMode:b.designMode,themesPath:b.themesPath,bodyClass:b.bodyClass,cssPath:b.cssPath,cssData:b.cssData,beforeGetHtml:function(m){m=b.beforeGetHtml(m);m=gb(Fb(m));return Ja(m,b.filterMode?b.htmlTags:null,b.urlType,b.wellFormatMode,b.indentChar)},beforeSetHtml:function(m){m=
                    Ja(m,b.filterMode?b.htmlTags:null,"",!1);return b.beforeSetHtml(m)},afterSetHtml:function(){b.edit=h=this;b.afterSetHtml()},afterCreate:function(){b.edit=h=this;b.cmd=h.cmd;b._docMousedownFn=function(p){b.menu&&b.hideMenu()};y(h.doc,document).mousedown(b._docMousedownFn);Qc.call(b);Rc.call(b);Sc.call(b);Tc.call(b);h.afterChange(function(p){h.designMode&&(b.updateState(),b.addBookmark(),b.options.afterChange&&b.options.afterChange.call(b))});h.textarea.keyup(function(p){p.ctrlKey||p.altKey||!Cc[p.which]||
                b.options.afterChange&&b.options.afterChange.call(b)});b.readonlyMode&&b.readonly();b.isCreated=!0;""===b.initContent&&(b.initContent=b.html());if(0<b._undoStack.length){var m=b._undoStack.pop();m.start&&(b.html(m.html),h.cmd.range.moveToBookmark(m),b.select())}b.afterCreate();b.options.afterCreate&&b.options.afterCreate.call(b)}});l.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>');
                b._fullscreenResizeHandler&&(y(w).unbind("resize",b._fullscreenResizeHandler),b._fullscreenResizeHandler=null);a();c?(b._fullscreenResizeHandler=function(m){b.isCreated&&b.resize(Wa().clientWidth,Wa().clientHeight,!1)},y(w).bind("resize",b._fullscreenResizeHandler),n.select("fullscreen"),l.first().css("visibility","hidden"),l.last().css("visibility","hidden")):(lb&&y(w).bind("scroll",function(m){b._scrollPos=pb()}),0<b.resizeType?Sb({moveEl:f,clickEl:l,moveFn:function(m,p,r,v,u,t){b.resize(null,v+
                        t)}}):l.first().css("visibility","hidden"),2===b.resizeType?Sb({moveEl:f,clickEl:l.last(),moveFn:function(m,p,r,v,u,t){b.resize(r+u,v+t)}}):l.last().css("visibility","hidden"));return b},remove:function(){var a=this;if(!a.isCreated)return a;a.beforeRemove();a.srcElement.data("kindeditor","");a.menu&&a.hideMenu();H(a.dialogs,function(){a.hideDialog()});y(document).unbind("mousedown",a._docMousedownFn);a.toolbar.remove();a.edit.remove();a.statusbar.last().unbind();a.statusbar.unbind();a.container.remove();
                a.container=a.toolbar=a.edit=a.menu=null;a.dialogs=[];a.isCreated=!1;return a},resize:function(a,b,c){c=W(c,!0);a&&(/%/.test(a)||(a=M(a),a=a<this.minWidth?this.minWidth:a),this.container.css("width",L(a)),c&&(this.width=L(a)));b&&(b=M(b),a=M(b)-this.toolbar.div.height()-this.statusbar.height(),a=a<this.minHeight?this.minHeight:a,this.edit.setHeight(a),c&&(this.height=L(b)));return this},select:function(){this.isCreated&&this.cmd.select();return this},html:function(a){if(a===z)return this.isCreated?
                this.edit.html():tb(this.srcElement);this.isCreated?this.edit.html(a):tb(this.srcElement,a);this.isCreated&&this.cmd.selection();return this},fullHtml:function(){return this.isCreated?this.edit.html(z,!0):""},text:function(a){return a===z?Y(this.html().replace(/<(?!img|embed).*?>/ig,"").replace(/&nbsp;/ig," ")):this.html(T(a))},isEmpty:function(){return""===Y(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return Y(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==Y(this.html().replace(/\r\n|\n|\r|t/g,
                ""))},selectedHtml:function(){var a=this.isCreated?this.cmd.range.html():"";return a=gb(Fb(a))},count:function(a){a=(a||"html").toLowerCase();return"html"===a?this.html().length:"text"===a?this.text().replace(/<(?:img|embed).*?>/ig,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(a){a=a.toLowerCase();var b=this.cmd,c=0>F(a,["selectall","copy","paste","print"]);c&&this.addBookmark(!1);b[a].apply(b,pa(arguments,1));c&&(this.updateState(),this.addBookmark(!1),this.options.afterChange&&this.options.afterChange.call(this));
                return this},insertHtml:function(a,b){if(!this.isCreated)return this;a=this.beforeSetHtml(a);this.exec("inserthtml",a,b);return this},appendHtml:function(a){this.html(this.html()+a);this.isCreated&&(a=this.cmd,a.range.selectNodeContents(a.doc.body).collapse(!1),a.select());return this},sync:function(){tb(this.srcElement,this.html());return this},focus:function(){this.isCreated?this.edit.focus():this.srcElement[0].focus();return this},blur:function(){this.isCreated?this.edit.blur():this.srcElement[0].blur();
                return this},addBookmark:function(a){a=W(a,!0);var b=this.edit,c=b.doc.body,k=Fb(c.innerHTML);if(a&&0<this._undoStack.length&&Math.abs(k.length-gb(this._undoStack[this._undoStack.length-1].html).length)<this.minChangeSize)return this;b.designMode&&!this._firstAddBookmark?(b=this.cmd.range,a=b.createBookmark(!0),a.html=Fb(c.innerHTML),b.moveToBookmark(a)):a={html:k};this._firstAddBookmark=!1;wc(this._undoStack,a);return this},undo:function(){return xc.call(this,this._undoStack,this._redoStack)},redo:function(){return xc.call(this,
                this._redoStack,this._undoStack)},fullscreen:function(a){this.fullscreenMode=a===z?!this.fullscreenMode:a;this.addBookmark(!1);return this.remove().create()},readonly:function(a){a=W(a,!0);var b=this,c=b.edit,k=c.doc;b.designMode?b.toolbar.disableAll(a,[]):H(b.noDisableItems,function(){b.toolbar[a?"disable":"enable"](this)});Ca?k.body.contentEditable=!a:k.designMode=a?"off":"on";c.textarea[0].disabled=a},createMenu:function(a){var b=this.toolbar.get(a.name),c=b.pos();a.x=c.x;a.y=c.y+b.height();a.z=
                this.options.zIndex;a.shadowMode=W(a.shadowMode,this.shadowMode);a.selectedColor!==z?(a.cls="ke-colorpicker-"+this.themeType,a.noColor=this.lang("noColor"),this.menu=qc(a)):(a.cls="ke-menu-"+this.themeType,a.centerLineMode=!1,this.menu=Wb(a));return this.menu},hideMenu:function(){this.menu.remove();this.menu=null;return this},hideContextmenu:function(){this.contextmenu.remove();this.contextmenu=null;return this},createDialog:function(a){var b=this;a.z=b.options.zIndex;a.shadowMode=W(a.shadowMode,
                b.shadowMode);a.closeBtn=W(a.closeBtn,{name:b.lang("close"),click:function(k){b.hideDialog();Ca&&b.cmd&&b.cmd.select()}});a.noBtn=W(a.noBtn,{name:b.lang(a.yesBtn?"no":"close"),click:function(k){b.hideDialog();Ca&&b.cmd&&b.cmd.select()}});"page"!=b.dialogAlignType&&(a.alignEl=b.container);a.cls="ke-dialog-"+b.themeType;if(0<b.dialogs.length){var c=b.dialogs[b.dialogs.length-1];b.dialogs[0].setMaskIndex(c.z+2);a.z=c.z+3;a.showMask=!1}a=rc(a);b.dialogs.push(a);return a},hideDialog:function(){0<this.dialogs.length&&
            this.dialogs.pop().remove();0<this.dialogs.length&&this.dialogs[0].setMaskIndex(this.dialogs[this.dialogs.length-1].z-1);return this},errorDialog:function(a){var b=this.createDialog({width:750,title:this.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'});b=y("iframe",b.div);var c=y.iframeDoc(b);c.open();c.write(a);c.close();y(c.body).css("background-color","#FFF");b[0].contentWindow.focus();return this}};var zb=[];
        y.remove=function(a){Ab(a,function(b){this.remove();zb.splice(b,1)})};y.sync=function(a){Ab(a,function(){this.sync()})};y.html=function(a,b){Ab(a,function(){this.html(b)})};y.insertHtml=function(a,b){Ab(a,function(){this.insertHtml(b)})};y.appendHtml=function(a,b){Ab(a,function(){this.appendHtml(b)})};Ca&&7>Oa&&db(document,"BackgroundImageCache",!0);y.EditorClass=yb;y.editor=function(a){return new yb(a)};y.create=yc;y.instances=zb;y.plugin=tc;y.lang=vc;tc("core",function(a){var b=this,c={undo:"Z",
            redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};b.afterSetHtml(function(){b.options.afterChange&&b.options.afterChange.call(b)});b.afterCreate(function(){if("form"==b.syncType){for(var q=a(b.srcElement),f=!1;q=q.parent();)if("form"==q.name){f=!0;break}if(f){q.bind("submit",function(g){b.sync();a(w).bind("unload",function(){b.edit.textarea.remove()})});var n=a('[type="reset"]',q);n.click(function(){b.html(b.initContent);b.cmd.selection()});b.beforeRemove(function(){q.unbind();n.unbind()})}}});
            b.clickToolbar("source",function(){b.edit.designMode?(b.toolbar.disableAll(!0),b.edit.design(!1),b.toolbar.select("source")):(b.toolbar.disableAll(!1),b.edit.design(!0),b.toolbar.unselect("source"),lb?setTimeout(function(){b.cmd.selection()},0):b.cmd.selection());b.designMode=b.edit.designMode});b.afterCreate(function(){b.designMode||b.toolbar.disableAll(!0).select("source")});b.clickToolbar("fullscreen",function(){b.fullscreen()});if(b.fullscreenShortcut){var k=!1;b.afterCreate(function(){a(b.edit.doc,
                b.edit.textarea).keyup(function(q){27==q.which&&setTimeout(function(){b.fullscreen()},0)});if(k){if(Ca&&!b.designMode)return;b.focus()}k||(k=!0)})}H(["undo","redo"],function(q,f){c[f]&&b.afterCreate(function(){Ba(this.edit.doc,c[f],function(){b.clickToolbar(f)})});b.clickToolbar(f,function(){b[f]()})});b.clickToolbar("formatblock",function(){var q=b.lang("formatblock.formatBlock"),f={h1:28,h2:24,h3:18,H4:14,p:12},n=b.cmd.val("formatblock"),g=b.createMenu({name:"formatblock",width:"en"==b.langType?
                    200:150});H(q,function(l,d){var e="font-size:"+f[l]+"px;";"h"===l.charAt(0)&&(e+="font-weight:bold;");g.addItem({title:'<span style="'+e+'" unselectable="on">'+d+"</span>",height:f[l]+12,checked:n===l||n===d,click:function(){b.select().exec("formatblock","<"+l+">").hideMenu()}})})});b.clickToolbar("fontname",function(){var q=b.cmd.val("fontname"),f=b.createMenu({name:"fontname",width:150});H(b.lang("fontname.fontName"),function(n,g){f.addItem({title:'<span style="font-family: '+n+';" unselectable="on">'+
                    g+"</span>",checked:q===n.toLowerCase()||q===g.toLowerCase(),click:function(){b.exec("fontname",n).hideMenu()}})})});b.clickToolbar("fontsize",function(){var q=b.cmd.val("fontsize"),f=b.createMenu({name:"fontsize",width:150});H(b.fontSizeTable,function(n,g){f.addItem({title:'<span style="font-size:'+g+';" unselectable="on">'+g+"</span>",height:M(g)+12,checked:q===g,click:function(){b.exec("fontsize",g).hideMenu()}})})});H(["forecolor","hilitecolor"],function(q,f){b.clickToolbar(f,function(){b.createMenu({name:f,
                selectedColor:b.cmd.val(f)||"default",colors:b.colorTable,click:function(n){b.exec(f,n).hideMenu()}})})});H(["cut","copy","paste"],function(q,f){b.clickToolbar(f,function(){b.focus();try{b.exec(f,null)}catch(n){alert(b.lang(f+"Error"))}})});b.clickToolbar("about",function(){b.createDialog({name:"about",width:350,title:b.lang("about"),body:'<div style="margin:20px;"><div>KindEditor 5.0.2 (2020-12-08)</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>'})});
            b.plugin.getSelectedLink=function(){return b.cmd.commonAncestor("a")};b.plugin.getSelectedImage=function(){return Eb(b.edit.cmd.range,function(q){return!/^ke-\w+$/i.test(q[0].className)})};b.plugin.getSelectedFlash=function(){return Eb(b.edit.cmd.range,function(q){return"ke-flash"==q[0].className})};b.plugin.getSelectedMedia=function(){return Eb(b.edit.cmd.range,function(q){return"ke-media"==q[0].className||"ke-rm"==q[0].className})};b.plugin.getSelectedAnchor=function(){return Eb(b.edit.cmd.range,
                function(q){return"ke-anchor"==q[0].className})};H(["link","image","flash","media","anchor"],function(q,f){var n=f.charAt(0).toUpperCase()+f.substr(1);H(["edit","delete"],function(g,l){b.addContextmenu({title:b.lang(l+n),click:function(){b.loadPlugin(f,function(){b.plugin[f][l]();b.hideMenu()})},cond:b.plugin["getSelected"+n],width:150,iconClass:"edit"==l?"ke-icon-"+f:z})});b.addContextmenu({title:"-"})});b.plugin.getSelectedTable=function(){return b.cmd.commonAncestor("table")};b.plugin.getSelectedRow=
                function(){return b.cmd.commonAncestor("tr")};b.plugin.getSelectedCell=function(){return b.cmd.commonAncestor("td")};H("prop cellprop colinsertleft colinsertright rowinsertabove rowinsertbelow rowmerge colmerge rowsplit colsplit coldelete rowdelete insert delete".split(" "),function(q,f){q=0>F(f,["prop","delete"])?b.plugin.getSelectedCell:b.plugin.getSelectedTable;b.addContextmenu({title:b.lang("table"+f),click:function(){b.loadPlugin("table",function(){b.plugin.table[f]();b.hideMenu()})},cond:q,
                width:170,iconClass:"ke-icon-table"+f})});b.addContextmenu({title:"-"});H("selectall justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent subscript superscript hr print bold italic underline strikethrough removeformat unlink".split(" "),function(q,f){c[f]&&b.afterCreate(function(){Ba(this.edit.doc,c[f],function(){b.cmd.selection();b.clickToolbar(f)})});b.clickToolbar(f,function(){b.focus().exec(f,null)})});b.afterCreate(function(){function q(){n.range.moveToBookmark(g);
                n.select();kb&&(a("div.__kindeditor_paste__",l).each(function(){a(this).after("<br />").remove(!0)}),a("span.Apple-style-span",l).remove(!0),a("span.Apple-tab-span",l).remove(!0),a("span[style]",l).each(function(){"nowrap"==a(this).css("white-space")&&a(this).remove(!0)}),a("meta",l).remove());var e=l[0].innerHTML;l.remove();if(""!==e){kb&&(e=e.replace(/(<br>)\1/ig,"$1"));2===b.pasteType&&(e=e.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,""),/schemas-microsoft-com|worddocument|mso-\w+/i.test(e)?e=Ta(e,
                    b.filterMode?b.htmlTags:a.options.htmlTags):(e=Ja(e,b.filterMode?b.htmlTags:null),e=b.beforeSetHtml(e)));1===b.pasteType&&(e=e.replace(/&nbsp;/ig," "),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/<br[^>]*>/ig,"\n"),e=e.replace(/<\/p><p[^>]*>/ig,"\n"),e=e.replace(/<[^>]+>/g,""),e=e.replace(/ {2}/g," &nbsp;"),"p"==b.newlineTag?/\n/.test(e)&&(e=e.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")):e=e.replace(/\n/g,"<br />$&"));var h=/<img\s+src="file:\/\//g;/<img\s+src="data:image\/png;base64/.test(e)?
                    Pc(b,e):h.test(e)?alert("\u672c\u5730\u56fe\u7247\u5efa\u8bae\u4f7f\u7528\u56fe\u7247\u4e0a\u4f20"):b.insertHtml(e,!0)}}var f=b.edit.doc,n,g,l,d=!1;a(f.body).bind("paste",function(e){if(0===b.pasteType)e.stop();else if(!d){d=!0;a("div.__kindeditor_paste__",f).remove();n=b.cmd.selection();g=n.range.createBookmark();l=a('<div class="__kindeditor_paste__"></div>',f).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:a(g.start).pos().y+"px","white-space":"nowrap"});
                a(f.body).append(l);if(Ca){var h=n.range.get(!0);h.moveToElementText(l[0]);h.select();h.execCommand("paste");e.preventDefault()}else n.range.selectNodeContents(l[0]),n.select(),l[0].tabIndex=-1,l[0].focus();setTimeout(function(){q();d=!1},0)}})});b.beforeGetHtml(function(q){Ca&&8>=Oa&&(q=q.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(f,n){return unescape(n)}),q=q.replace(/(<input)((?:\s+[^>]*)?>)/ig,function(f,n,g){return/\s+type="[^"]+"/i.test(f)?f:n+' type="text"'+
                g}));return q.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/ig,function(f,n,g,l){return n+ba(g).replace(/\s+/g," ")+l}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/ig,function(f){f=ta(f);var n=ua(f.style||""),g=Sa(f["data-ke-tag"]),l=W(n.width,"");n=W(n.height,"");/px/i.test(l)&&(l=M(l));/px/i.test(n)&&(n=M(n));g.width=W(f.width,l);g.height=W(f.height,n);return Aa(g)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/ig,function(f){f=ta(f);return'<a name="'+unescape(f["data-ke-name"])+
                '"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(f,n,g){return"<script"+unescape(n)+">"+unescape(g)+"\x3c/script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(f,n,g){return"<noscript"+unescape(n)+">"+unescape(g)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/ig,function(f,n,g,l){f=f.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(d,e,h){return e+ba(g)+h});return f=f.replace(/\s+data-ke-src="[^"]*"/i,
                "")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/ig,function(f,n,g){return n+g})});b.beforeSetHtml(function(q){Ca&&8>=Oa&&(q=q.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/ig,function(f){var n=ta(f);return"none"==ua(n.style||"").display?'<div class="ke-display-none" data-ke-input-tag="'+escape(f)+'"></div>':f}));return q.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/ig,function(f){f=ta(f);f.src=W(f.src,"");f.width=W(f.width,0);f.height=W(f.height,0);return Ka(b.themesPath+
                "common/blank.gif",f)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/ig,function(f){var n=ta(f);return n.href!==z?f:'<img class="ke-anchor" src="'+b.themesPath+'common/anchor.gif" data-ke-name="'+escape(n.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/ig,function(f,n,g){return'<div class="ke-script" data-ke-script-attr="'+escape(n)+'">'+escape(g)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/ig,function(f,n,g){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(n)+
                '">'+escape(g)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/ig,function(f,n,g,l,d){return f.match(/\sdata-ke-src="[^"]*"/i)?f:f=n+g+'="'+l+'" data-ke-src="'+T(l)+'"'+d}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/ig,function(f,n,g){return n+"data-ke-"+g}).replace(/<table[^>]*\s+border="0"[^>]*>/ig,function(f){return 0<=f.indexOf("ke-zeroborder")?f:za(f,"ke-zeroborder")})})})}})(window);
KindEditor.lang({insertimages:"\u6279\u91cf\u56fe\u7247\u4e0a\u4f20","insertimages.uploadDesc":"\u5141\u8bb8\u7528\u6237\u540c\u65f6\u4e0a\u4f20<%=uploadLimit%>\u5f20\u56fe\u7247\uff0c\u5355\u5f20\u56fe\u7247\u5bb9\u91cf\u4e0d\u8d85\u8fc7<%=sizeLimit%>","insertimages.startUpload":"\u5f00\u59cb\u4e0a\u4f20","insertimages.clearAll":"\u5168\u90e8\u6e05\u7a7a","insertimages.insertAll":"\u5168\u90e8\u63d2\u5165","insertimages.queueLimitExceeded":"\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7\u9650\u5236\u3002",
    "insertimages.fileExceedsSizeLimit":"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236\u3002","insertimages.zeroByteFile":"\u65e0\u6cd5\u4e0a\u4f20\u7a7a\u6587\u4ef6\u3002","insertimages.invalidFiletype":"\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\u3002","insertimages.unknownError":"\u53d1\u751f\u5f02\u5e38\uff0c\u65e0\u6cd5\u4e0a\u4f20\u3002","insertimages.pending":"\u7b49\u5f85\u4e0a\u4f20","insertimages.uploadError":"\u4e0a\u4f20\u5931\u8d25",source:"HTML\u4ee3\u7801",preview:"\u9884\u89c8",undo:"\u540e\u9000(Ctrl+Z)",
    redo:"\u524d\u8fdb(Ctrl+Y)",cut:"\u526a\u5207(Ctrl+X)",copy:"\u590d\u5236(Ctrl+C)",paste:"\u7c98\u8d34(Ctrl+V)",plainpaste:"\u7c98\u8d34\u4e3a\u65e0\u683c\u5f0f\u6587\u672c",wordpaste:"\u4eceWord\u7c98\u8d34",selectall:"\u5168\u9009(Ctrl+A)",justifyleft:"\u5de6\u5bf9\u9f50",justifycenter:"\u5c45\u4e2d",justifyright:"\u53f3\u5bf9\u9f50",justifyfull:"\u4e24\u7aef\u5bf9\u9f50",insertorderedlist:"\u7f16\u53f7",insertunorderedlist:"\u9879\u76ee\u7b26\u53f7",indent:"\u589e\u52a0\u7f29\u8fdb",outdent:"\u51cf\u5c11\u7f29\u8fdb",
    subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",formatblock:"\u6bb5\u843d",fontname:"\u5b57\u4f53",fontsize:"\u6587\u5b57\u5927\u5c0f",forecolor:"\u6587\u5b57\u989c\u8272",hilitecolor:"\u6587\u5b57\u80cc\u666f",bold:"\u7c97\u4f53(Ctrl+B)",italic:"\u659c\u4f53(Ctrl+I)",underline:"\u4e0b\u5212\u7ebf(Ctrl+U)",strikethrough:"\u5220\u9664\u7ebf",removeformat:"\u5220\u9664\u683c\u5f0f",image:"\u56fe\u7247",multiimage:"\u6279\u91cf\u56fe\u7247\u4e0a\u4f20",flash:"Flash",media:"\u89c6\u97f3\u9891",table:"\u8868\u683c",
    tablecell:"\u5355\u5143\u683c",hr:"\u63d2\u5165\u6a2a\u7ebf",emoticons:"\u63d2\u5165\u8868\u60c5",link:"\u8d85\u7ea7\u94fe\u63a5",unlink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",fullscreen:"\u5168\u5c4f\u663e\u793a",about:"\u5173\u4e8e",print:"\u6253\u5370(Ctrl+P)",filemanager:"\u6587\u4ef6\u7a7a\u95f4",code:"\u63d2\u5165\u7a0b\u5e8f\u4ee3\u7801",map:"Google\u5730\u56fe",baidumap:"\u767e\u5ea6\u5730\u56fe",lineheight:"\u884c\u8ddd",clearhtml:"\u6e05\u7406HTML\u4ee3\u7801",pagebreak:"\u63d2\u5165\u5206\u9875\u7b26",
    quickformat:"\u4e00\u952e\u6392\u7248",insertfile:"\u63d2\u5165\u6587\u4ef6",template:"\u63d2\u5165\u6a21\u677f",anchor:"\u951a\u70b9",yes:"\u786e\u5b9a",no:"\u53d6\u6d88",close:"\u5173\u95ed",editImage:"\u56fe\u7247\u5c5e\u6027",deleteImage:"\u5220\u9664\u56fe\u7247",editFlash:"Flash\u5c5e\u6027",deleteFlash:"\u5220\u9664Flash",editMedia:"\u89c6\u97f3\u9891\u5c5e\u6027",deleteMedia:"\u5220\u9664\u89c6\u97f3\u9891",editLink:"\u8d85\u7ea7\u94fe\u63a5\u5c5e\u6027",deleteLink:"\u53d6\u6d88\u8d85\u7ea7\u94fe\u63a5",
    editAnchor:"\u951a\u70b9\u5c5e\u6027",deleteAnchor:"\u5220\u9664\u951a\u70b9",tableprop:"\u8868\u683c\u5c5e\u6027",tablecellprop:"\u5355\u5143\u683c\u5c5e\u6027",tableinsert:"\u63d2\u5165\u8868\u683c",tabledelete:"\u5220\u9664\u8868\u683c",tablecolinsertleft:"\u5de6\u4fa7\u63d2\u5165\u5217",tablecolinsertright:"\u53f3\u4fa7\u63d2\u5165\u5217",tablerowinsertabove:"\u4e0a\u65b9\u63d2\u5165\u884c",tablerowinsertbelow:"\u4e0b\u65b9\u63d2\u5165\u884c",tablerowmerge:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",
    tablecolmerge:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",tablerowsplit:"\u62c6\u5206\u884c",tablecolsplit:"\u62c6\u5206\u5217",tablecoldelete:"\u5220\u9664\u5217",tablerowdelete:"\u5220\u9664\u884c",noColor:"\u65e0\u989c\u8272",pleaseSelectFile:"\u8bf7\u9009\u62e9\u6587\u4ef6\u3002",invalidImg:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8jpg,gif,bmp,png\u683c\u5f0f\u3002",invalidMedia:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002\n\u53ea\u5141\u8bb8swf,flv,mp3,wav,wma,wmv,mid,avi,mpg,asf,rm,rmvb\u683c\u5f0f\u3002",
    invalidWidth:"\u5bbd\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidHeight:"\u9ad8\u5ea6\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidBorder:"\u8fb9\u6846\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidUrl:"\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740\u3002",invalidRows:"\u884c\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",invalidCols:"\u5217\u6570\u4e3a\u5fc5\u9009\u9879\uff0c\u53ea\u5141\u8bb8\u8f93\u5165\u5927\u4e8e0\u7684\u6570\u5b57\u3002",
    invalidPadding:"\u8fb9\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidSpacing:"\u95f4\u8ddd\u5fc5\u987b\u4e3a\u6570\u5b57\u3002",invalidJson:"\u670d\u52a1\u5668\u53d1\u751f\u6545\u969c\u3002",uploadSuccess:"\u4e0a\u4f20\u6210\u529f\u3002",cutError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u526a\u5207\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+X)\u6765\u5b8c\u6210\u3002",copyError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u590d\u5236\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+C)\u6765\u5b8c\u6210\u3002",
    pasteError:"\u60a8\u7684\u6d4f\u89c8\u5668\u5b89\u5168\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u4f7f\u7528\u7c98\u8d34\u64cd\u4f5c\uff0c\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u6765\u5b8c\u6210\u3002",ajaxLoading:"\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadLoading:"\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019 ...",uploadError:"\u4e0a\u4f20\u9519\u8bef","plainpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002",
    "wordpaste.comment":"\u8bf7\u4f7f\u7528\u5feb\u6377\u952e(Ctrl+V)\u628a\u5185\u5bb9\u7c98\u8d34\u5230\u4e0b\u9762\u7684\u65b9\u6846\u91cc\u3002","code.pleaseInput":"\u8bf7\u8f93\u5165\u7a0b\u5e8f\u4ee3\u7801\u3002","link.url":"URL","link.linkType":"\u6253\u5f00\u7c7b\u578b","link.newWindow":"\u65b0\u7a97\u53e3","link.selfWindow":"\u5f53\u524d\u7a97\u53e3","flash.url":"URL","flash.width":"\u5bbd\u5ea6","flash.height":"\u9ad8\u5ea6","flash.upload":"\u4e0a\u4f20","flash.viewServer":"\u6587\u4ef6\u7a7a\u95f4",
    "media.url":"URL","media.width":"\u5bbd\u5ea6","media.height":"\u9ad8\u5ea6","media.autostart":"\u81ea\u52a8\u64ad\u653e","media.upload":"\u4e0a\u4f20","media.viewServer":"\u6587\u4ef6\u7a7a\u95f4","image.remoteImage":"\u7f51\u7edc\u56fe\u7247","image.localImage":"\u672c\u5730\u4e0a\u4f20","image.remoteUrl":"\u56fe\u7247\u5730\u5740","image.localUrl":"\u4e0a\u4f20\u6587\u4ef6","image.size":"\u56fe\u7247\u5927\u5c0f","image.width":"\u5bbd","image.height":"\u9ad8","image.resetSize":"\u91cd\u7f6e\u5927\u5c0f",
    "image.align":"\u5bf9\u9f50\u65b9\u5f0f","image.defaultAlign":"\u9ed8\u8ba4\u65b9\u5f0f","image.leftAlign":"\u5de6\u5bf9\u9f50","image.rightAlign":"\u53f3\u5bf9\u9f50","image.imgTitle":"\u56fe\u7247\u8bf4\u660e","image.upload":"\u6d4f\u89c8...","image.viewServer":"\u56fe\u7247\u7a7a\u95f4","multiimage.uploadDesc":"\u5141\u8bb8\u7528\u6237\u540c\u65f6\u4e0a\u4f20<%=uploadLimit%>\u5f20\u56fe\u7247\uff0c\u5355\u5f20\u56fe\u7247\u5bb9\u91cf\u4e0d\u8d85\u8fc7<%=sizeLimit%>","multiimage.startUpload":"\u5f00\u59cb\u4e0a\u4f20",
    "multiimage.clearAll":"\u5168\u90e8\u6e05\u7a7a","multiimage.insertAll":"\u5168\u90e8\u63d2\u5165","multiimage.queueLimitExceeded":"\u6587\u4ef6\u6570\u91cf\u8d85\u8fc7\u9650\u5236\u3002","multiimage.fileExceedsSizeLimit":"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236\u3002","multiimage.zeroByteFile":"\u65e0\u6cd5\u4e0a\u4f20\u7a7a\u6587\u4ef6\u3002","multiimage.invalidFiletype":"\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\u3002","multiimage.unknownError":"\u53d1\u751f\u5f02\u5e38\uff0c\u65e0\u6cd5\u4e0a\u4f20\u3002",
    "multiimage.pending":"\u7b49\u5f85\u4e0a\u4f20","multiimage.uploadError":"\u4e0a\u4f20\u5931\u8d25","filemanager.emptyFolder":"\u7a7a\u6587\u4ef6\u5939","filemanager.moveup":"\u79fb\u5230\u4e0a\u4e00\u7ea7\u6587\u4ef6\u5939","filemanager.viewType":"\u663e\u793a\u65b9\u5f0f\uff1a","filemanager.viewImage":"\u7f29\u7565\u56fe","filemanager.listImage":"\u8be6\u7ec6\u4fe1\u606f","filemanager.orderType":"\u6392\u5e8f\u65b9\u5f0f\uff1a","filemanager.fileName":"\u540d\u79f0","filemanager.fileSize":"\u5927\u5c0f",
    "filemanager.fileType":"\u7c7b\u578b","insertfile.url":"URL","insertfile.title":"\u6587\u4ef6\u8bf4\u660e","insertfile.upload":"\u4e0a\u4f20","insertfile.viewServer":"\u6587\u4ef6\u7a7a\u95f4","table.cells":"\u5355\u5143\u683c\u6570","table.rows":"\u884c\u6570","table.cols":"\u5217\u6570","table.size":"\u5927\u5c0f","table.width":"\u5bbd\u5ea6","table.height":"\u9ad8\u5ea6","table.percent":"%","table.px":"px","table.space":"\u8fb9\u8ddd\u95f4\u8ddd","table.padding":"\u8fb9\u8ddd","table.spacing":"\u95f4\u8ddd",
    "table.align":"\u5bf9\u9f50\u65b9\u5f0f","table.textAlign":"\u6c34\u5e73\u5bf9\u9f50","table.verticalAlign":"\u5782\u76f4\u5bf9\u9f50","table.alignDefault":"\u9ed8\u8ba4","table.alignLeft":"\u5de6\u5bf9\u9f50","table.alignCenter":"\u5c45\u4e2d","table.alignRight":"\u53f3\u5bf9\u9f50","table.alignTop":"\u9876\u90e8","table.alignMiddle":"\u4e2d\u90e8","table.alignBottom":"\u5e95\u90e8","table.alignBaseline":"\u57fa\u7ebf","table.border":"\u8fb9\u6846","table.borderWidth":"\u8fb9\u6846","table.borderColor":"\u989c\u8272",
    "table.backgroundColor":"\u80cc\u666f\u989c\u8272","map.address":"\u5730\u5740: ","map.search":"\u641c\u7d22","baidumap.address":"\u5730\u5740: ","baidumap.search":"\u641c\u7d22","baidumap.insertDynamicMap":"\u63d2\u5165\u52a8\u6001\u5730\u56fe","anchor.name":"\u951a\u70b9\u540d\u79f0","formatblock.formatBlock":{h1:"\u6807\u9898 1",h2:"\u6807\u9898 2",h3:"\u6807\u9898 3",h4:"\u6807\u9898 4",p:"\u6b63 \u6587"},"fontname.fontName":{SimSun:"\u5b8b\u4f53",NSimSun:"\u65b0\u5b8b\u4f53",FangSong_GB2312:"\u4eff\u5b8b_GB2312",
        KaiTi_GB2312:"\u6977\u4f53_GB2312",SimHei:"\u9ed1\u4f53","Microsoft YaHei":"\u5fae\u8f6f\u96c5\u9ed1",Arial:"Arial","Arial Black":"Arial Black","Times New Roman":"Times New Roman","Courier New":"Courier New",Tahoma:"Tahoma",Verdana:"Verdana"},"lineheight.lineHeight":[{1:"\u5355\u500d\u884c\u8ddd"},{"1.5":"1.5\u500d\u884c\u8ddd"},{2:"2\u500d\u884c\u8ddd"},{"2.5":"2.5\u500d\u884c\u8ddd"},{3:"3\u500d\u884c\u8ddd"}],"template.selectTemplate":"\u53ef\u9009\u6a21\u677f","template.replaceContent":"\u66ff\u6362\u5f53\u524d\u5185\u5bb9",
    "template.fileList":{"1.html":"\u56fe\u7247\u548c\u6587\u5b57","2.html":"\u8868\u683c","3.html":"\u9879\u76ee\u7f16\u53f7"}},"zh-CN");KindEditor.options.langType="zh-CN";
KindEditor.plugin("anchor",function(w){var z=this,Q=z.lang("anchor.");z.plugin.anchor={edit:function(){var V=['<div style="padding:20px;"><div class="ke-dialog-row">','<label for="keName">'+Q.name+"</label>",'<input class="ke-input-text" type="text" id="keName" name="name" value="" style="width:100px;" /></div></div>'].join("");V=z.createDialog({name:"anchor",width:300,title:z.lang("anchor"),body:V,yesBtn:{name:z.lang("yes"),click:function(H){z.insertHtml('<a name="'+F.val()+'">').hideDialog().focus()}}}).div;
        var F=w('input[name="name"]',V);(V=z.plugin.getSelectedAnchor())&&F.val(unescape(V.attr("data-ke-name")));F[0].focus();F[0].select()},"delete":function(){z.plugin.getSelectedAnchor().remove()}};z.clickToolbar("anchor",z.plugin.anchor.edit)});
KindEditor.plugin("autoheight",function(w){function z(){if(!V.fullscreenMode){var H=V.edit,Y=H.doc.body;H.iframe.height(F);V.resize(null,Math.max((w.IE?Y.scrollHeight:Y.offsetHeight)+76,F))}}function Q(){F=w.removeUnit(V.height);V.edit.afterChange(z);if(!V.fullscreenMode){var H=V.edit,Y=H.doc.body;H.iframe[0].scroll="no";Y.style.overflowY="hidden"}z()}var V=this;if(V.autoHeightMode){var F;V.isCreated?Q():V.afterCreate(Q)}});
KindEditor.plugin("baidumap",function(w){var z=this,Q=z.lang("baidumap."),V=w.undef(z.mapWidth,558),F=w.undef(z.mapHeight,360);z.clickToolbar("baidumap",function(){function H(){ba=S[0].contentWindow;Z=w.iframeDoc(S)}var Y=['<div style="padding:10px 20px;"><div class="ke-header"><div class="ke-left">',Q.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+
Q.search+'" />','</span></div><div class="ke-right">','<input type="checkbox" id="keInsertDynamicMap" name="insertDynamicMap" value="1" /> <label for="keInsertDynamicMap">'+Q.insertDynamicMap+"</label>",'</div><div class="ke-clearfix"></div></div>','<div class="ke-map" style="width:'+V+"px;height:"+F+'px;"></div>',"</div>"].join("");Y=z.createDialog({name:"baidumap",width:V+42,title:z.lang("baidumap"),body:Y,yesBtn:{name:z.lang("yes"),click:function(da){da=ba.map;var pa=da.getCenter();pa=pa.lng+","+
            pa.lat;da=da.getZoom();da=[T[0].checked?z.pluginsPath+"baidumap/index.html":"http://api.map.baidu.com/staticimage","?center="+encodeURIComponent(pa),"&zoom="+encodeURIComponent(da),"&width="+V,"&height="+F,"&markers="+encodeURIComponent(pa),"&markerStyles="+encodeURIComponent("l,A")].join("");T[0].checked?z.insertHtml('<iframe src="'+da+'" frameborder="0" style="width:'+(V+2)+"px;height:"+(F+2)+'px;"></iframe>'):z.exec("insertimage",da);z.hideDialog().focus()}},beforeRemove:function(){M.remove();
        Z&&Z.write("");S.remove()}});var N=Y.div,L=w('[name="address"]',N),M=w('[name="searchBtn"]',N),T=w('[name="insertDynamicMap"]',Y.div),ba,Z,S=w('<iframe class="ke-textarea" frameborder="0" src="'+z.pluginsPath+'baidumap/map.html" style="width:'+V+"px;height:"+F+'px;"></iframe>');S.bind("load",function(){S.unbind("load");w.IE?H():setTimeout(H,0)});w(".ke-map",N).replaceWith(S);M.click(function(){ba.search(L.val())})})});
KindEditor.plugin("map",function(w){var z=this,Q=z.lang("map.");z.clickToolbar("map",function(){function V(){N=M[0].contentWindow;L=w.iframeDoc(M)}var F=['<div style="padding:10px 20px;"><div class="ke-dialog-row">',Q.address+' <input id="kindeditor_plugin_map_address" name="address" class="ke-input-text" value="" style="width:200px;" /> ','<span class="ke-button-common ke-button-outer">','<input type="button" name="searchBtn" class="ke-button-common ke-button" value="'+Q.search+'" />','</span></div><div class="ke-map" style="width:558px;height:360px;"></div></div>'].join("");
    F=z.createDialog({name:"map",width:600,title:z.lang("map"),body:F,yesBtn:{name:z.lang("yes"),click:function(T){var ba=N.map;T=ba.getCenter().lat()+","+ba.getCenter().lng();var Z=ba.getZoom();ba=ba.getMapTypeId();var S="http://maps.googleapis.com/maps/api/staticmap?center="+encodeURIComponent(T);S+="&zoom="+encodeURIComponent(Z);S=S+"&size=558x360&maptype="+encodeURIComponent(ba);S+="&markers="+encodeURIComponent(T);S+="&language="+z.langType;z.exec("insertimage",S+"&sensor=false").hideDialog().focus()}},
        beforeRemove:function(){Y.remove();L&&L.write("");M.remove()}}).div;var H=w('[name="address"]',F),Y=w('[name="searchBtn"]',F),N,L;['<!doctype html><html><head>\n<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />\n<style>\n\thtml { height: 100% }\n\tbody { height: 100%; margin: 0; padding: 0; background-color: #FFF }\n\t#map_canvas { height: 100% }\n</style>','<script src="http://maps.googleapis.com/maps/api/js?sensor=false&language='+z.langType+'">\x3c/script>','<script>\nvar map, geocoder;\nfunction initialize() {\n\tvar latlng = new google.maps.LatLng(31.230393, 121.473704);\n\tvar options = {\n\t\tzoom: 11,\n\t\tcenter: latlng,\n\t\tdisableDefaultUI: true,\n\t\tpanControl: true,\n\t\tzoomControl: true,\n\t\tmapTypeControl: true,\n\t\tscaleControl: true,\n\t\tstreetViewControl: false,\n\t\toverviewMapControl: true,\n\t\tmapTypeId: google.maps.MapTypeId.ROADMAP\n\t};\n\tmap = new google.maps.Map(document.getElementById("map_canvas"), options);\n\tgeocoder = new google.maps.Geocoder();\n\tgeocoder.geocode({latLng: latlng}, function(results, status) {\n\t\tif (status == google.maps.GeocoderStatus.OK) {\n\t\t\tif (results[3]) {\n\t\t\t\tparent.document.getElementById("kindeditor_plugin_map_address").value = results[3].formatted_address;\n\t\t\t}\n\t\t}\n\t});\n}\nfunction search(address) {\n\tif (!map) return;\n\tgeocoder.geocode({address : address}, function(results, status) {\n\t\tif (status == google.maps.GeocoderStatus.OK) {\n\t\t\tmap.setZoom(11);\n\t\t\tmap.setCenter(results[0].geometry.location);\n\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\tposition: results[0].geometry.location\n\t\t\t});\n\t\t} else {\n\t\t\talert("Invalid address: " + address);\n\t\t}\n\t});\n}\n\x3c/script>\n</head>\n<body onload="initialize();">\n<div id="map_canvas" style="width:100%; height:100%"></div>\n</body></html>'].join("\n");
    var M=w('<iframe class="ke-textarea" frameborder="0" src="'+z.pluginsPath+'map/map.html" style="width:558px;height:360px;"></iframe>');M.bind("load",function(){M.unbind("load");w.IE?V():setTimeout(V,0)});w(".ke-map",F).replaceWith(M);Y.click(function(){N.search(H.val())})})});
KindEditor.plugin("clearhtml",function(w){var z=this;z.clickToolbar("clearhtml",function(){z.focus();var Q=z.html();Q=Q.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/ig,"");Q=Q.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/ig,"");Q=w.formatHtml(Q,{a:["href","target"],embed:"src width height type loop autostart quality .width .height align allowscriptaccess".split(" "),img:"src width height border alt title .width .height".split(" "),table:["border"],"td,th":["rowspan","colspan"],"div,hr,br,tbody,tr,p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":[]});
    z.html(Q);z.cmd.selection(!0);z.addBookmark()})});
KindEditor.plugin("code",function(w){var z=this;z.clickToolbar("code",function(){var Q=z.lang("code."),V=z.createDialog({name:"code",width:450,title:z.lang("code"),body:'<div style="padding:10px 20px;"><div class="ke-dialog-row"><select class="ke-code-type"><option value="js">JavaScript</option><option value="html">HTML</option><option value="css">CSS</option><option value="php">PHP</option><option value="pl">Perl</option><option value="py">Python</option><option value="rb">Ruby</option><option value="java">Java</option><option value="vb">ASP/VB</option><option value="cpp">C/C++</option><option value="cs">C#</option><option value="xml">XML</option><option value="bsh">Shell</option><option value="">Other</option></select></div><textarea class="ke-textarea" style="width:408px;height:260px;"></textarea></div>',yesBtn:{name:z.lang("yes"),
        click:function(H){var Y=w(".ke-code-type",V.div).val();H=F.val();Y='<pre class="prettyprint'+(""===Y?"":" lang-"+Y)+'">\n'+w.escape(H)+"</pre> ";""===w.trim(H)?(alert(Q.pleaseInput),F[0].focus()):z.insertHtml(Y).hideDialog().focus()}}}),F=w("textarea",V.div);F[0].focus()})});
KindEditor.plugin("emoticons",function(w){var z=this,Q=z.emoticonsPath||z.pluginsPath+"emoticons/images/",V=void 0===z.allowPreviewEmoticons?!0:z.allowPreviewEmoticons,F=1;z.clickToolbar("emoticons",function(){function H(W,ka,ca){Z?W.mouseover(function(){4<ka?(Z.css("left",0),Z.css("right","")):(Z.css("left",""),Z.css("right",0));S.attr("src",Q+ca+".gif");w(this).addClass("ke-on")}):W.mouseover(function(){w(this).addClass("ke-on")});W.mouseout(function(){w(this).removeClass("ke-on")});W.click(function(sa){z.insertHtml('<img src="'+
    Q+ca+'.gif" border="0" alt="" />').hideMenu().focus();sa.stop()})}function Y(W,ka){var ca=document.createElement("table");ka.append(ca);Z&&(w(ca).mouseover(function(){Z.show("block")}),w(ca).mouseout(function(){Z.hide()}),ba.push(w(ca)));ca.className="ke-table";ca.cellPadding=0;ca.cellSpacing=0;ca.border=0;W=45*(W-1);for(ka=0;5>ka;ka++)for(var sa=ca.insertRow(ka),ya=0;9>ya;ya++){var aa=w(sa.insertCell(ya));aa.addClass("ke-cell");H(aa,ya,W);var Ga=w('<span class="ke-img"></span>').css("background-position",
    "-"+24*W+"px 0px").css("background-image","url("+Q+"static.gif)");aa.append(Ga);ba.push(aa);W++}return ca}function N(){w.each(ba,function(){this.unbind()})}function L(W,ka){W.click(function(ca){N();da.parentNode.removeChild(da);pa.remove();da=Y(ka,T);M(ka);F=ka;ca.stop()})}function M(W){pa=w('<div class="ke-page"></div>');T.append(pa);for(var ka=1;3>=ka;ka++){if(W!==ka){var ca=w('<a href="javascript:;">['+ka+"]</a>");L(ca,ka);pa.append(ca);ba.push(ca)}else pa.append(w("@["+ka+"]"));pa.append(w("@&nbsp;"))}}
    var T=w('<div class="ke-plugin-emoticons"></div>'),ba=[];z.createMenu({name:"emoticons",beforeRemove:function(){N()}}).div.append(T);if(V){var Z=w('<div class="ke-preview"></div>').css("right",0);var S=w('<img class="ke-preview-img" src="'+Q+0+'.gif" />');T.append(Z);Z.append(S)}var da=Y(F,T),pa;M(F)})});
KindEditor.plugin("filemanager",function(w){function z(Y,N){N.is_dir?Y.attr("title",N.filename):Y.attr("title",N.filename+" ("+Math.ceil(N.filesize/1024)+"KB, "+N.datetime+")")}var Q=this,V=w.undef(Q.fileManagerJson,Q.basePath+"php/file_manager_json.php"),F=Q.pluginsPath+"filemanager/images/",H=Q.lang("filemanager.");Q.plugin.filemanagerDialog=function(Y){function N(ha,va,qa){ha="path="+ha+"&order="+va+"&dir="+da;ka.showLoading(Q.lang("ajaxLoading"));w.ajax(w.addParam(V,ha+"&"+(new Date).getTime()),
    function(Ba){ka.hideLoading();qa(Ba)})}function L(ha,va,qa,Ba){var ua=w.formatUrl(va.current_url+qa.filename,"absolute"),ta=encodeURIComponent(va.current_dir_path+qa.filename+"/");qa.is_dir?ha.click(function(za){N(ta,aa.val(),Ba)}):ha.click(function(za){W.call(this,ua,qa.filename)});Ga.push(ha)}function M(ha,va){function qa(){"VIEW"==ya.val()?N(ha.current_dir_path,aa.val(),ba):N(ha.current_dir_path,aa.val(),T)}w.each(Ga,function(){this.unbind()});sa.unbind();ya.unbind();aa.unbind();ha.current_dir_path&&
sa.click(function(Ba){N(ha.moveup_dir_path,aa.val(),va)});ya.change(qa);aa.change(qa);ca.html("")}function T(ha){M(ha,T);var va=document.createElement("table");va.className="ke-table";va.cellPadding=0;va.cellSpacing=0;va.border=0;ca.append(va);for(var qa=ha.file_list,Ba=0,ua=qa.length;Ba<ua;Ba++){var ta=qa[Ba],za=w(va.insertRow(Ba));za.mouseover(function(Na){w(this).addClass("ke-on")}).mouseout(function(Na){w(this).removeClass("ke-on")});var Ia=w('<img src="'+(F+(ta.is_dir?"folder-16.gif":"file-16.gif"))+
    '" width="16" height="16" alt="'+ta.filename+'" align="absmiddle" />');Ia=w(za[0].insertCell(0)).addClass("ke-cell ke-name").append(Ia).append(document.createTextNode(" "+ta.filename));!ta.is_dir||ta.has_file?(za.css("cursor","pointer"),Ia.attr("title",ta.filename),L(Ia,ha,ta,T)):Ia.attr("title",H.emptyFolder);w(za[0].insertCell(1)).addClass("ke-cell ke-size").html(ta.is_dir?"-":Math.ceil(ta.filesize/1024)+"KB");w(za[0].insertCell(2)).addClass("ke-cell ke-datetime").html(ta.datetime)}}function ba(ha){M(ha,
    ba);for(var va=ha.file_list,qa=0,Ba=va.length;qa<Ba;qa++){var ua=va[qa],ta=w('<div class="ke-inline-block ke-item"></div>');ca.append(ta);var za=w('<div class="ke-inline-block ke-photo"></div>').mouseover(function(Na){w(this).addClass("ke-on")}).mouseout(function(Na){w(this).removeClass("ke-on")});ta.append(za);var Ia=ha.current_url+ua.filename;Ia=w('<img src="'+(ua.is_dir?F+"folder-64.gif":ua.is_photo?Ia:F+"file-64.gif")+'" width="80" height="80" alt="'+ua.filename+'" />');!ua.is_dir||ua.has_file?
    (za.css("cursor","pointer"),z(za,ua),L(za,ha,ua,ba)):za.attr("title",H.emptyFolder);za.append(Ia);ta.append('<div class="ke-name" title="'+ua.filename+'">'+ua.filename+"</div>")}}var Z=w.undef(Y.width,650),S=w.undef(Y.height,510),da=w.undef(Y.dirName,""),pa=w.undef(Y.viewType,"VIEW").toUpperCase(),W=Y.clickFn;Y=['<div style="padding:10px 20px;"><div class="ke-plugin-filemanager-header"><div class="ke-left">','<img class="ke-inline-block" name="moveupImg" src="'+F+'go-up.gif" width="16" height="16" border="0" alt="" /> ',
    '<a class="ke-inline-block" name="moveupLink" href="javascript:;">'+H.moveup+"</a>",'</div><div class="ke-right">',H.viewType+' <select class="ke-inline-block" name="viewType">','<option value="VIEW">'+H.viewImage+"</option>",'<option value="LIST">'+H.listImage+"</option>","</select> ",H.orderType+' <select class="ke-inline-block" name="orderType">','<option value="NAME">'+H.fileName+"</option>",'<option value="SIZE">'+H.fileSize+"</option>",'<option value="TYPE">'+H.fileType+"</option>",'</select></div><div class="ke-clearfix"></div></div><div class="ke-plugin-filemanager-body"></div></div>'].join("");
    var ka=Q.createDialog({name:"filemanager",width:Z,height:S,title:Q.lang("filemanager"),body:Y});Z=ka.div;var ca=w(".ke-plugin-filemanager-body",Z);w('[name="moveupImg"]',Z);var sa=w('[name="moveupLink"]',Z);w('[name="viewServer"]',Z);var ya=w('[name="viewType"]',Z),aa=w('[name="orderType"]',Z),Ga=[];ya.val(pa);N("",aa.val(),"VIEW"==pa?ba:T);return ka}});
KindEditor.plugin("image",function(w){var z=this,Q=w.undef(z.allowImageUpload,!0),V=w.undef(z.allowImageRemote,!0),F=w.undef(z.formatUploadUrl,!0),H=w.undef(z.allowFileManager,!1),Y=w.undef(z.uploadJson,z.basePath+"php/upload_json.php"),N=w.undef(z.imageTabIndex,0),L=z.pluginsPath+"image/images/",M=w.undef(z.extraFileUploadParams,{}),T=w.undef(z.filePostName,"file"),ba=w.undef(z.fillDescAfterUploadImage,!1),Z=z.lang("image.");z.plugin.imageDialog=function(S){function da(Aa,Ka){ua.val(Aa);ta.val(Ka);
    Va=Aa;Sa=Ka}w.undef(S.imageWidth,"");w.undef(S.imageHeight,"");w.undef(S.imageTitle,"");w.undef(S.imageAlign,"");var pa=w.undef(S.showRemote,!0),W=w.undef(S.showLocal,!0),ka=w.undef(S.tabIndex,0),ca=S.clickFn,sa="kindeditor_upload_iframe_"+(new Date).getTime(),ya=[],aa;for(aa in M)ya.push('<input type="hidden" name="'+aa+'" value="'+M[aa]+'" />');ya=['<div style="padding:20px;"><div class="tabs"></div><div class="tab1" style="display:none;"><div class="ke-dialog-row">','<label for="remoteUrl" style="width:60px;">'+
Z.remoteUrl+"</label>",'<input type="text" id="remoteUrl" class="ke-input-text" name="url" value="" style="width:200px;" /> &nbsp;<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+Z.viewServer+'" />','</span></div><div class="ke-dialog-row">','<label for="remoteWidth" style="width:60px;">'+Z.size+"</label>",Z.width+' <input type="text" id="remoteWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> ',
    Z.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> ','<img class="ke-refresh-btn" src="'+L+'refresh.png" width="16" height="16" alt="" style="cursor:pointer;" title="'+Z.resetSize+'" />','</div><div class="ke-dialog-row">','<label style="width:60px;">'+Z.align+"</label>",'<input type="radio" name="align" class="ke-inline-block" value="" checked="checked" /> <img name="defaultImg" src="'+L+'align_top.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="left" /> <img name="leftImg" src="'+
    L+'align_left.gif" width="23" height="25" alt="" />',' <input type="radio" name="align" class="ke-inline-block" value="right" /> <img name="rightImg" src="'+L+'align_right.gif" width="23" height="25" alt="" />','</div><div class="ke-dialog-row">','<label for="remoteTitle" style="width:60px;">'+Z.imgTitle+"</label>",'<input type="text" id="remoteTitle" class="ke-input-text" name="title" value="" style="width:200px;" /></div></div><div class="tab2" style="display:none;">','<iframe name="'+sa+'" style="display:none;"></iframe>',
    '<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+sa+'" action="'+w.addParam(Y,"dir=image")+'">','<div class="ke-dialog-row">',ya.join(""),'<label style="width:60px;">'+Z.localUrl+"</label>",'<input type="text" name="localUrl" class="ke-input-text" tabindex="-1" style="width:200px;" readonly="true" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+Z.upload+'" />',"</div></form></div></div>"].join("");var Ga=z.createDialog({name:"image",width:W||
    H?450:400,height:W&&pa?300:250,title:z.lang("image"),body:ya,yesBtn:{name:z.lang("yes"),click:function(Aa){if(!Ga.isLoading)if(W&&pa&&Ja&&1===Ja.selectedIndex||!pa)""==Ta.fileBox.val()?alert(z.lang("pleaseSelectFile")):(Ga.showLoading(z.lang("uploadLoading")),Ta.submit(),qa.val(""));else{Aa=w.trim(va.val());var Ka=ua.val(),bb=ta.val(),ob=Ia.val(),hb="";Na.each(function(){if(this.checked)return hb=this.value,!1});"http://"==Aa||w.invalidUrl(Aa)?(alert(z.lang("invalidUrl")),va[0].focus()):/^\d*$/.test(Ka)?
            /^\d*$/.test(bb)?ca.call(z,Aa,ob,Ka,bb,0,hb):(alert(z.lang("invalidHeight")),ta[0].focus()):(alert(z.lang("invalidWidth")),ua[0].focus())}}},beforeRemove:function(){Ba.unbind();ua.unbind();ta.unbind();za.unbind()}}),ha=Ga.div,va=w('[name="url"]',ha),qa=w('[name="localUrl"]',ha),Ba=w('[name="viewServer"]',ha),ua=w('.tab1 [name="width"]',ha),ta=w('.tab1 [name="height"]',ha),za=w(".ke-refresh-btn",ha),Ia=w('.tab1 [name="title"]',ha),Na=w('.tab1 [name="align"]',ha);if(pa&&W){var Ja=w.tabs({src:w(".tabs",
        ha),afterSelect:function(Aa){}});Ja.add({title:Z.remoteImage,panel:w(".tab1",ha)});Ja.add({title:Z.localImage,panel:w(".tab2",ha)});Ja.select(ka)}else pa?w(".tab1",ha).show():W&&w(".tab2",ha).show();var Ta=w.uploadbutton({button:w(".ke-upload-button",ha)[0],fieldName:T,form:w(".ke-form",ha),target:sa,width:60,afterUpload:function(Aa){Ga.hideLoading();if(0===Aa.error){var Ka=Aa.url;F&&(Ka=w.formatUrl(Ka,"absolute"));z.afterUpload&&z.afterUpload.call(z,Ka,Aa,"image");ba?(w(".ke-dialog-row #remoteUrl",
        ha).val(Ka),w(".ke-tabs-li",ha)[0].click(),w(".ke-refresh-btn",ha).click()):ca.call(z,Ka,Aa.title,Aa.width,Aa.height,Aa.border,Aa.align)}else alert(Aa.message)},afterError:function(Aa){Ga.hideLoading();z.errorDialog(Aa)}});Ta.fileBox.change(function(Aa){qa.val(Ta.fileBox.val())});H?Ba.click(function(Aa){z.loadPlugin("filemanager",function(){z.plugin.filemanagerDialog({viewType:"VIEW",dirName:"image",clickFn:function(Ka,bb){1<z.dialogs.length&&(w('[name="url"]',ha).val(Ka),z.afterSelectFile&&z.afterSelectFile.call(z,
        Ka),z.hideDialog())}})})}):Ba.hide();var Va=0,Sa=0;za.click(function(Aa){var Ka=w('<img src="'+va.val()+'" />',document).css({position:"absolute",visibility:"hidden",top:0,left:"-1000px"});Ka.bind("load",function(){da(Ka.width(),Ka.height());Ka.remove()});w(document.body).append(Ka)});ua.change(function(Aa){0<Va&&ta.val(Math.round(Sa/Va*parseInt(this.value,10)))});ta.change(function(Aa){0<Sa&&ua.val(Math.round(Va/Sa*parseInt(this.value,10)))});va.val(S.imageUrl);da(S.imageWidth,S.imageHeight);Ia.val(S.imageTitle);
    Na.each(function(){if(this.value===S.imageAlign)return this.checked=!0,!1});pa&&0===ka&&(va[0].focus(),va[0].select());return Ga};z.plugin.image={edit:function(){var S=z.plugin.getSelectedImage();z.plugin.imageDialog({imageUrl:S?S.attr("data-ke-src"):"http://",imageWidth:S?S.width():"",imageHeight:S?S.height():"",imageTitle:S?S.attr("title"):"",imageAlign:S?S.attr("align"):"",showRemote:V,showLocal:Q,tabIndex:S?0:N,clickFn:function(da,pa,W,ka,ca,sa){S?(S.attr("src",da),S.attr("data-ke-src",da),S.attr("width",
            W),S.attr("height",ka),S.attr("title",pa),S.attr("align",sa),S.attr("alt",pa)):z.exec("insertimage",da,pa,W,ka,ca,sa);setTimeout(function(){z.hideDialog().focus()},0)}})},"delete":function(){var S=z.plugin.getSelectedImage();"a"==S.parent().name&&(S=S.parent());S.remove();z.addBookmark()}};z.clickToolbar("image",z.plugin.image.edit)});
KindEditor.plugin("insertfile",function(w){var z=this,Q=w.undef(z.allowFileUpload,!0),V=w.undef(z.allowFileManager,!1),F=w.undef(z.formatUploadUrl,!0),H=w.undef(z.uploadJson,z.basePath+"php/upload_json.php"),Y=w.undef(z.extraFileUploadParams,{}),N=w.undef(z.filePostName,"imgFile"),L=z.lang("insertfile.");z.plugin.fileDialog=function(M){var T=w.undef(M.fileUrl,"http://"),ba=w.undef(M.fileTitle,""),Z=M.clickFn;M=['<div style="padding:20px;"><div class="ke-dialog-row">','<label for="keUrl" style="width:60px;">'+
L.url+"</label>",'<input type="text" id="keUrl" name="url" class="ke-input-text" style="width:160px;" /> &nbsp;','<input type="button" class="ke-upload-button" value="'+L.upload+'" /> &nbsp;','<span class="ke-button-common ke-button-outer">','<input type="button" class="ke-button-common ke-button" name="viewServer" value="'+L.viewServer+'" />','</span></div><div class="ke-dialog-row">','<label for="keTitle" style="width:60px;">'+L.title+"</label>",'<input type="text" id="keTitle" class="ke-input-text" name="title" value="" style="width:160px;" /></div></div></form></div>'].join("");
    var S=z.createDialog({name:"insertfile",width:450,title:z.lang("insertfile"),body:M,yesBtn:{name:z.lang("yes"),click:function(ca){ca=w.trim(pa.val());var sa=W.val();"http://"==ca||w.invalidUrl(ca)?(alert(z.lang("invalidUrl")),pa[0].focus()):(""===w.trim(sa)&&(sa=ca),Z.call(z,ca,sa))}}}),da=S.div,pa=w('[name="url"]',da);M=w('[name="viewServer"]',da);var W=w('[name="title"]',da);if(Q){var ka=w.uploadbutton({button:w(".ke-upload-button",da)[0],fieldName:N,url:w.addParam(H,"dir=file"),extraParams:Y,afterUpload:function(ca){S.hideLoading();
            if(0===ca.error){var sa=ca.url;F&&(sa=w.formatUrl(sa,"absolute"));pa.val(sa);z.afterUpload&&z.afterUpload.call(z,sa,ca,"insertfile");alert(z.lang("uploadSuccess"))}else alert(ca.message)},afterError:function(ca){S.hideLoading();z.errorDialog(ca)}});ka.fileBox.change(function(ca){S.showLoading(z.lang("uploadLoading"));ka.submit()})}else w(".ke-upload-button",da).hide();V?M.click(function(ca){z.loadPlugin("filemanager",function(){z.plugin.filemanagerDialog({viewType:"LIST",dirName:"file",clickFn:function(sa,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ya){1<z.dialogs.length&&(w('[name="url"]',da).val(sa),z.afterSelectFile&&z.afterSelectFile.call(z,sa),z.hideDialog())}})})}):M.hide();pa.val(T);W.val(ba);pa[0].focus();pa[0].select()};z.clickToolbar("insertfile",function(){z.plugin.fileDialog({clickFn:function(M,T){z.insertHtml('<a class="ke-insertfile" href="'+M+'" data-ke-src="'+M+'" target="_blank">'+T+"</a>").hideDialog().focus()}})})});
KindEditor.plugin("lineheight",function(w){var z=this,Q=z.lang("lineheight.");z.clickToolbar("lineheight",function(){var V="",F=z.cmd.commonNode({"*":".line-height"});F&&(V=F.css("line-height"));var H=z.createMenu({name:"lineheight",width:150});w.each(Q.lineHeight,function(Y,N){w.each(N,function(L,M){H.addItem({title:M,checked:V===L,click:function(){z.cmd.toggle('<span style="line-height:'+L+';"></span>',{span:".line-height="+L});z.updateState();z.addBookmark();z.hideMenu()}})})})})});
KindEditor.plugin("link",function(w){var z=this;z.plugin.link={edit:function(){var Q=z.lang("link."),V='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+Q.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+Q.linkType+'</label><select id="keType" name="type"></select></div></div>';V=z.createDialog({name:"link",width:450,title:z.lang("link"),
        body:V,yesBtn:{name:z.lang("yes"),click:function(Y){Y=w.trim(F.val());"http://"==Y||w.invalidUrl(Y)?(alert(z.lang("invalidUrl")),F[0].focus()):z.exec("createlink",Y,H.val()).hideDialog().focus()}}}).div;var F=w('input[name="url"]',V),H=w('select[name="type"]',V);F.val("http://");H[0].options[0]=new Option(Q.newWindow,"_blank");H[0].options[1]=new Option(Q.selfWindow,"");z.cmd.selection();if(Q=z.plugin.getSelectedLink())z.cmd.range.selectNode(Q[0]),z.cmd.select(),F.val(Q.attr("data-ke-src")),H.val(Q.attr("target"));
        F[0].focus();F[0].select()},"delete":function(){z.exec("unlink",null)}};z.clickToolbar("link",z.plugin.link.edit)});
KindEditor.plugin("pagebreak",function(w){var z=this,Q=w.undef(z.pagebreakHtml,'<hr style="page-break-after: always;" class="ke-pagebreak" />');z.clickToolbar("pagebreak",function(){var V=z.cmd,F=V.range;z.focus();var H="br"==z.newlineTag||w.WEBKIT?"":'<span id="__kindeditor_tail_tag__"></span>';z.insertHtml(Q+H);""!==H&&(H=w("#__kindeditor_tail_tag__",z.edit.doc),F.selectNodeContents(H[0]),H.removeAttr("id"),V.select())})});
KindEditor.plugin("plainpaste",function(w){var z=this;z.clickToolbar("plainpaste",function(){var Q='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+z.lang("plainpaste.").comment+'</div><textarea class="ke-textarea" style="width:408px;height:260px;"></textarea></div>';Q=z.createDialog({name:"plainpaste",width:450,title:z.lang("plainpaste"),body:Q,yesBtn:{name:z.lang("yes"),click:function(F){F=V.val();F=w.escape(F);F=F.replace(/ {2}/g," &nbsp;");F="p"==z.newlineTag?F.replace(/^/,
            "<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>"):F.replace(/\n/g,"<br />$&");z.insertHtml(F).hideDialog().focus()}}});var V=w("textarea",Q.div);V[0].focus()})});
KindEditor.plugin("preview",function(w){var z=this;z.clickToolbar("preview",function(){z.lang("preview.");var Q=z.createDialog({name:"preview",width:750,title:z.lang("preview"),body:'<div style="padding:10px 20px;"><iframe class="ke-textarea" frameborder="0" style="width:708px;height:400px;"></iframe></div>'});Q=w("iframe",Q.div);var V=w.iframeDoc(Q);V.open();V.write(z.fullHtml());V.close();w(V.body).css("background-color","#FFF");Q[0].contentWindow.focus()})});
KindEditor.plugin("quickformat",function(w){function z(F){for(F=F.first();F&&F.first();)F=F.first();return F}var Q=this,V=w.toMap("blockquote,center,div,h1,h2,h3,h4,h5,h6,p");Q.clickToolbar("quickformat",function(){Q.focus();for(var F=Q.edit.doc,H=Q.cmd.range,Y=w(F.body).first(),N,L=[],M=[],T=H.createBookmark(!0);Y;){N=Y.next();var ba=z(Y);if(!ba||"img"!=ba.name)if(V[Y.name]?(Y.html(Y.html().replace(/^(\s|&nbsp;|\u3000)+/ig,"")),Y.css("text-indent","2em")):M.push(Y),!N||V[N.name]||V[Y.name]&&!V[N.name])0<
M.length&&L.push(M),M=[];Y=N}w.each(L,function(Z,S){var da=w('<p style="text-indent:2em;"></p>',F);S[0].before(da);w.each(S,function(pa,W){da.append(W)})});H.moveToBookmark(T);Q.addBookmark()})});
KindEditor.plugin("table",function(w){function z(N,L){L=L.toUpperCase();N.css("background-color",L);N.css("color","#000000"===L?"#FFFFFF":"#000000");N.html(L)}function Q(N,L){function M(){w.each(Y,function(){this.remove()});Y=[];w(document).unbind("click,mousedown",M);N.unbind("click,mousedown",M)}L.bind("click,mousedown",function(T){T.stopPropagation()});L.click(function(T){M();var ba=w(this);T=ba.pos();T=w.colorpicker({x:T.x,y:T.y+ba.height(),z:811214,selectedColor:w(this).html(),colors:F.colorTable,
    noColor:F.lang("noColor"),shadowMode:F.shadowMode,click:function(Z){z(ba,Z);M()}});Y.push(T);w(document).bind("click,mousedown",M);N.bind("click,mousedown",M)})}function V(N,L,M){for(var T=N=0,ba=L.cells.length;T<ba&&L.cells[T]!=M;T++)N+=L.cells[T].rowSpan-1;return M.cellIndex-N}var F=this,H=F.lang("table."),Y=[];F.plugin.table={prop:function(N){var L=['<div style="padding:20px;"><div class="ke-dialog-row">','<label for="keRows" style="width:90px;">'+H.cells+"</label>",H.rows+' <input type="text" id="keRows" class="ke-input-text ke-input-number" name="rows" value="" maxlength="4" /> &nbsp; ',
        H.cols+' <input type="text" class="ke-input-text ke-input-number" name="cols" value="" maxlength="4" />','</div><div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+H.size+"</label>",H.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+H.percent+"</option>",'<option value="px">'+H.px+"</option>","</select> &nbsp; ",H.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ',
        '<select name="heightType">','<option value="%">'+H.percent+"</option>",'<option value="px">'+H.px+"</option>",'</select></div><div class="ke-dialog-row">','<label for="kePadding" style="width:90px;">'+H.space+"</label>",H.padding+' <input type="text" id="kePadding" class="ke-input-text ke-input-number" name="padding" value="" maxlength="4" /> &nbsp; ',H.spacing+' <input type="text" class="ke-input-text ke-input-number" name="spacing" value="" maxlength="4" />','</div><div class="ke-dialog-row">',
        '<label for="keAlign" style="width:90px;">'+H.align+"</label>",'<select id="keAlign" name="align">','<option value="">'+H.alignDefault+"</option>",'<option value="left">'+H.alignLeft+"</option>",'<option value="center">'+H.alignCenter+"</option>",'<option value="right">'+H.alignRight+"</option>",'</select></div><div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+H.border+"</label>",H.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',
        H.borderColor+' <span class="ke-inline-block ke-input-color"></span>','</div><div class="ke-dialog-row">','<label for="keBgColor" style="width:90px;">'+H.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span></div></div>'].join(""),M=F.cmd.range.createBookmark();L=F.createDialog({name:"table",width:500,title:F.lang("table"),body:L,beforeRemove:function(){ya.unbind()},yesBtn:{name:F.lang("yes"),click:function(ha){ha=T.val();var va=ba.val(),qa=Z.val(),Ba=S.val(),ua=da.val(),
                ta=pa.val(),za=W.val(),Ia=ka.val(),Na=ca.val(),Ja=sa.val(),Ta=w(ya[0]).html()||"",Va=w(ya[1]).html()||"";if(0!=ha&&/^\d+$/.test(ha))if(0!=va&&/^\d+$/.test(va))if(/^\d*$/.test(qa))if(/^\d*$/.test(Ba))if(/^\d*$/.test(za))if(/^\d*$/.test(Ia))if(/^\d*$/.test(Ja)){if(aa)""!==qa?aa.width(qa+ua):aa.css("width",""),void 0!==aa[0].width&&aa.removeAttr("width"),""!==Ba?aa.height(Ba+ta):aa.css("height",""),void 0!==aa[0].height&&aa.removeAttr("height"),aa.css("background-color",Va),void 0!==aa[0].bgColor&&aa.removeAttr("bgColor"),
                ""!==za?aa[0].cellPadding=za:aa.removeAttr("cellPadding"),""!==Ia?aa[0].cellSpacing=Ia:aa.removeAttr("cellSpacing"),""!==Na?aa[0].align=Na:aa.removeAttr("align"),""!==Ja?aa.attr("border",Ja):aa.removeAttr("border"),""===Ja||"0"===Ja?aa.addClass("ke-zeroborder"):aa.removeClass("ke-zeroborder"),""!==Ta?aa.attr("borderColor",Ta):aa.removeAttr("borderColor"),F.hideDialog().focus(),F.cmd.range.moveToBookmark(M),F.cmd.select();else{var Sa="";""!==qa&&(Sa+="width:"+qa+ua+";");""!==Ba&&(Sa+="height:"+Ba+
                ta+";");""!==Va&&(Sa+="background-color:"+Va+";");qa="<table";""!==Sa&&(qa+=' style="'+Sa+'"');""!==za&&(qa+=' cellpadding="'+za+'"');""!==Ia&&(qa+=' cellspacing="'+Ia+'"');""!==Na&&(qa+=' align="'+Na+'"');""!==Ja&&(qa+=' border="'+Ja+'"');if(""===Ja||"0"===Ja)qa+=' class="ke-zeroborder"';""!==Ta&&(qa+=' bordercolor="'+Ta+'"');qa+=">";for(za=0;za<ha;za++){qa+="<tr>";for(Ia=0;Ia<va;Ia++)qa+="<td>"+(w.IE?"&nbsp;":"<br />")+"</td>";qa+="</tr>"}qa+="</table>";w.IE||(qa+="<br />");F.insertHtml(qa);F.select().hideDialog().focus()}F.addBookmark()}else alert(F.lang("invalidBorder")),
                sa[0].focus();else alert(F.lang("invalidSpacing")),ka[0].focus();else alert(F.lang("invalidPadding")),W[0].focus();else alert(F.lang("invalidHeight")),S[0].focus();else alert(F.lang("invalidWidth")),Z[0].focus();else alert(F.lang("invalidRows")),ba[0].focus();else alert(F.lang("invalidRows")),T[0].focus()}}}).div;var T=w('[name="rows"]',L).val(3),ba=w('[name="cols"]',L).val(2),Z=w('[name="width"]',L).val(100),S=w('[name="height"]',L),da=w('[name="widthType"]',L),pa=w('[name="heightType"]',L),W=w('[name="padding"]',
        L).val(2),ka=w('[name="spacing"]',L).val(0),ca=w('[name="align"]',L),sa=w('[name="border"]',L).val(1),ya=w(".ke-input-color",L);Q(L,ya.eq(0));Q(L,ya.eq(1));z(ya.eq(0),"#000000");z(ya.eq(1),"");T[0].focus();T[0].select();var aa;if(!N&&(aa=F.plugin.getSelectedTable())){T.val(aa[0].rows.length);ba.val(0<aa[0].rows.length?aa[0].rows[0].cells.length:0);T.attr("disabled",!0);ba.attr("disabled",!0);var Ga;N=aa[0].style.width||aa[0].width;L=aa[0].style.height||aa[0].height;void 0!==N&&(Ga=/^(\d+)((?:px|%)*)$/.exec(N))?
        (Z.val(Ga[1]),da.val(Ga[2])):Z.val("");void 0!==L&&(Ga=/^(\d+)((?:px|%)*)$/.exec(L))&&(S.val(Ga[1]),pa.val(Ga[2]));W.val(aa[0].cellPadding||"");ka.val(aa[0].cellSpacing||"");ca.val(aa[0].align||"");sa.val(void 0===aa[0].border?"":aa[0].border);z(ya.eq(0),w.toHex(aa.attr("borderColor")||""));z(ya.eq(1),w.toHex(aa[0].style.backgroundColor||aa[0].bgColor||""));Z[0].focus();Z[0].select()}},cellprop:function(){var N=['<div style="padding:20px;"><div class="ke-dialog-row">','<label for="keWidth" style="width:90px;">'+
    H.size+"</label>",H.width+' <input type="text" id="keWidth" class="ke-input-text ke-input-number" name="width" value="" maxlength="4" /> &nbsp; ','<select name="widthType">','<option value="%">'+H.percent+"</option>",'<option value="px">'+H.px+"</option>","</select> &nbsp; ",H.height+' <input type="text" class="ke-input-text ke-input-number" name="height" value="" maxlength="4" /> &nbsp; ','<select name="heightType">','<option value="%">'+H.percent+"</option>",'<option value="px">'+H.px+"</option>",
        '</select></div><div class="ke-dialog-row">','<label for="keAlign" style="width:90px;">'+H.align+"</label>",H.textAlign+' <select id="keAlign" name="textAlign">','<option value="">'+H.alignDefault+"</option>",'<option value="left">'+H.alignLeft+"</option>",'<option value="center">'+H.alignCenter+"</option>",'<option value="right">'+H.alignRight+"</option>","</select> ",H.verticalAlign+' <select name="verticalAlign">','<option value="">'+H.alignDefault+"</option>",'<option value="top">'+H.alignTop+
        "</option>",'<option value="middle">'+H.alignMiddle+"</option>",'<option value="bottom">'+H.alignBottom+"</option>",'<option value="baseline">'+H.alignBaseline+"</option>",'</select></div><div class="ke-dialog-row">','<label for="keBorder" style="width:90px;">'+H.border+"</label>",H.borderWidth+' <input type="text" id="keBorder" class="ke-input-text ke-input-number" name="border" value="" maxlength="4" /> &nbsp; ',H.borderColor+' <span class="ke-inline-block ke-input-color"></span>','</div><div class="ke-dialog-row">',
        '<label for="keBgColor" style="width:90px;">'+H.backgroundColor+"</label>",'<span class="ke-inline-block ke-input-color"></span></div></div>'].join(""),L=F.cmd.range.createBookmark();N=F.createDialog({name:"table",width:500,title:F.lang("tablecell"),body:N,beforeRemove:function(){ca.unbind()},yesBtn:{name:F.lang("yes"),click:function(aa){aa=M.val();var Ga=T.val(),ha=ba.val(),va=Z.val();S.val();da.val();var qa=pa.val(),Ba=W.val(),ua=ka.val(),ta=w(ca[0]).html()||"",za=w(ca[1]).html()||"";/^\d*$/.test(aa)?
                /^\d*$/.test(Ga)?/^\d*$/.test(ua)?(sa.css({width:""!==aa?aa+ha:"",height:""!==Ga?Ga+va:"","background-color":za,"text-align":qa,"vertical-align":Ba,"border-width":ua,"border-style":""!==ua?"solid":"","border-color":ta}),F.hideDialog().focus(),F.cmd.range.moveToBookmark(L),F.cmd.select(),F.addBookmark()):(alert(F.lang("invalidBorder")),ka[0].focus()):(alert(F.lang("invalidHeight")),T[0].focus()):(alert(F.lang("invalidWidth")),M[0].focus())}}}).div;var M=w('[name="width"]',N).val(100),T=w('[name="height"]',
        N),ba=w('[name="widthType"]',N),Z=w('[name="heightType"]',N),S=w('[name="padding"]',N).val(2),da=w('[name="spacing"]',N).val(0),pa=w('[name="textAlign"]',N),W=w('[name="verticalAlign"]',N),ka=w('[name="border"]',N).val(1),ca=w(".ke-input-color",N);Q(N,ca.eq(0));Q(N,ca.eq(1));z(ca.eq(0),"#000000");z(ca.eq(1),"");M[0].focus();M[0].select();var sa=F.plugin.getSelectedCell(),ya=sa[0].style.height||sa[0].height||"";(N=/^(\d+)((?:px|%)*)$/.exec(sa[0].style.width||sa[0].width||""))?(M.val(N[1]),ba.val(N[2])):
        M.val("");if(N=/^(\d+)((?:px|%)*)$/.exec(ya))T.val(N[1]),Z.val(N[2]);pa.val(sa[0].style.textAlign||"");W.val(sa[0].style.verticalAlign||"");(N=sa[0].style.borderWidth||"")&&(N=parseInt(N));ka.val(N);z(ca.eq(0),w.toHex(sa[0].style.borderColor||""));z(ca.eq(1),w.toHex(sa[0].style.backgroundColor||""));M[0].focus();M[0].select()},insert:function(){this.prop(!0)},"delete":function(){var N=F.plugin.getSelectedTable();F.cmd.range.setStartBefore(N[0]).collapse(!0);F.cmd.select();N.remove();F.addBookmark()},
    colinsert:function(N){var L=F.plugin.getSelectedTable()[0],M=F.plugin.getSelectedRow()[0],T=F.plugin.getSelectedCell()[0];N=T.cellIndex+N;N+=L.rows[0].cells.length-M.cells.length;M=0;for(var ba=L.rows.length;M<ba;M++){var Z=L.rows[M];N=Z.insertCell(N);N.innerHTML=w.IE?"":"<br />";N=V(L,Z,N)}F.cmd.range.selectNodeContents(T).collapse(!0);F.cmd.select();F.addBookmark()},colinsertleft:function(){this.colinsert(0)},colinsertright:function(){this.colinsert(1)},rowinsert:function(N){var L=F.plugin.getSelectedTable()[0],
        M=F.plugin.getSelectedRow()[0],T=F.plugin.getSelectedCell()[0],ba=M.rowIndex;1===N&&(ba=M.rowIndex+(T.rowSpan-1)+N);for(var Z=L.insertRow(ba),S=0,da=M.cells.length;S<da;S++){1<M.cells[S].rowSpan&&(da-=M.cells[S].rowSpan-1);var pa=Z.insertCell(S);1===N&&1<M.cells[S].colSpan&&(pa.colSpan=M.cells[S].colSpan);pa.innerHTML=w.IE?"":"<br />"}for(M=ba;0<=M;M--)if(N=L.rows[M].cells,N.length>S){for(L=T.cellIndex;0<=L;L--)1<N[L].rowSpan&&(N[L].rowSpan+=1);break}F.cmd.range.selectNodeContents(T).collapse(!0);
        F.cmd.select();F.addBookmark()},rowinsertabove:function(){this.rowinsert(0)},rowinsertbelow:function(){this.rowinsert(1)},rowmerge:function(){var N=F.plugin.getSelectedTable()[0],L=F.plugin.getSelectedRow()[0],M=F.plugin.getSelectedCell()[0],T=L.rowIndex+M.rowSpan;L=N.rows[T];N.rows.length<=T||(N=M.cellIndex,L.cells.length<=N||(T=L.cells[N],M.colSpan===T.colSpan&&(M.rowSpan+=T.rowSpan,L.deleteCell(N),F.cmd.range.selectNodeContents(M).collapse(!0),F.cmd.select(),F.addBookmark())))},colmerge:function(){F.plugin.getSelectedTable();
        var N=F.plugin.getSelectedRow()[0],L=F.plugin.getSelectedCell()[0],M=L.cellIndex+1;if(!(N.cells.length<=M)){var T=N.cells[M];L.rowSpan===T.rowSpan&&(L.colSpan+=T.colSpan,N.deleteCell(M),F.cmd.range.selectNodeContents(L).collapse(!0),F.cmd.select(),F.addBookmark())}},rowsplit:function(){var N=F.plugin.getSelectedTable()[0],L=F.plugin.getSelectedRow()[0],M=F.plugin.getSelectedCell()[0],T=L.rowIndex;if(1!==M.rowSpan){var ba=V(N,L,M);L=1;for(var Z=M.rowSpan;L<Z;L++){var S=N.rows[T+L];ba=S.insertCell(ba);
        1<M.colSpan&&(ba.colSpan=M.colSpan);ba.innerHTML=w.IE?"":"<br />";ba=V(N,S,ba)}w(M).removeAttr("rowSpan");F.cmd.range.selectNodeContents(M).collapse(!0);F.cmd.select();F.addBookmark()}},colsplit:function(){F.plugin.getSelectedTable();var N=F.plugin.getSelectedRow()[0],L=F.plugin.getSelectedCell()[0],M=L.cellIndex;if(1!==L.colSpan){for(var T=1,ba=L.colSpan;T<ba;T++){var Z=N.insertCell(M+T);1<L.rowSpan&&(Z.rowSpan=L.rowSpan);Z.innerHTML=w.IE?"":"<br />"}w(L).removeAttr("colSpan");F.cmd.range.selectNodeContents(L).collapse(!0);
        F.cmd.select();F.addBookmark()}},coldelete:function(){for(var N=F.plugin.getSelectedTable()[0],L=F.plugin.getSelectedRow()[0],M=F.plugin.getSelectedCell()[0].cellIndex,T=0,ba=N.rows.length;T<ba;T++){var Z=N.rows[T],S=Z.cells[M];1<S.colSpan?(--S.colSpan,1===S.colSpan&&w(S).removeAttr("colSpan")):Z.deleteCell(M);1<S.rowSpan&&(T+=S.rowSpan-1)}0===L.cells.length?(F.cmd.range.setStartBefore(N).collapse(!0),F.cmd.select(),w(N).remove()):F.cmd.selection(!0);F.addBookmark()},rowdelete:function(){var N=F.plugin.getSelectedTable()[0],
        L=F.plugin.getSelectedRow()[0],M=F.plugin.getSelectedCell()[0];L=L.rowIndex;for(M=M.rowSpan-1;0<=M;M--)N.deleteRow(L+M);0===N.rows.length?(F.cmd.range.setStartBefore(N).collapse(!0),F.cmd.select(),w(N).remove()):F.cmd.selection(!0);F.addBookmark()}};F.clickToolbar("table",F.plugin.table.prop)});
KindEditor.plugin("template",function(w){function z(F){return V+F+"?ver="+encodeURIComponent(w.DEBUG?w.TIME:w.VERSION)}var Q=this;Q.lang("template.");var V=Q.pluginsPath+"template/html/";Q.clickToolbar("template",function(){var F=Q.lang("template."),H=['<div style="padding:10px 20px;">','<div class="ke-header">','<div class="ke-left">',F.selectTemplate+" <select>"];w.each(F.fileList,function(M,T){H.push('<option value="'+M+'">'+T+"</option>")});html=[H.join(""),'</select></div><div class="ke-right">',
    '<input type="checkbox" id="keReplaceFlag" name="replaceFlag" value="1" /> <label for="keReplaceFlag">'+F.replaceContent+"</label>",'</div><div class="ke-clearfix"></div></div><iframe class="ke-textarea" frameborder="0" style="width:458px;height:260px;background-color:#FFF;"></iframe></div>'].join("");F=Q.createDialog({name:"template",width:500,title:Q.lang("template"),body:html,yesBtn:{name:Q.lang("yes"),click:function(M){M=w.iframeDoc(L);Q[N[0].checked?"html":"insertHtml"](M.body.innerHTML).hideDialog().focus()}}});
    var Y=w("select",F.div),N=w('[name="replaceFlag"]',F.div),L=w("iframe",F.div);N[0].checked=!0;L.attr("src",z(Y.val()));Y.change(function(){L.attr("src",z(this.value))})})});
KindEditor.plugin("wordpaste",function(w){var z=this;z.clickToolbar("wordpaste",function(){var Q='<div style="padding:10px 20px;"><div style="margin-bottom:10px;">'+z.lang("wordpaste.").comment+'</div><iframe class="ke-textarea" frameborder="0" style="width:408px;height:260px;"></iframe></div>';Q=z.createDialog({name:"wordpaste",width:450,title:z.lang("wordpaste"),body:Q,yesBtn:{name:z.lang("yes"),click:function(F){F=V.body.innerHTML;F=w.clearMsWord(F,z.filterMode?z.htmlTags:w.options.htmlTags);z.insertHtml(F).hideDialog().focus()}}}).div;
    Q=w("iframe",Q);var V=w.iframeDoc(Q);w.IE||(V.designMode="on");V.open();V.write("<!doctype html><html><head><title>WordPaste</title></head>");V.write('<body style="background-color:#FFF;font-size:12px;margin:2px;">');w.IE||V.write("<br />");V.write("</body></html>");V.close();w.IE&&(V.body.contentEditable="true");Q[0].contentWindow.focus()})});
KindEditor.plugin("fixtoolbar",function(w){function z(){var Q=w(".ke-toolbar"),V=Q.pos().y;w(window).bind("scroll",function(){"fixed"==Q.css("position")?0>document.body.scrollTop-V&&(Q.css("position","static"),Q.css("top","auto")):0>Q.pos().y-document.body.scrollTop&&(Q.css("position","fixed"),Q.css("top",0))})}this.fixToolBar&&(this.isCreated?z():this.afterCreate(z))});